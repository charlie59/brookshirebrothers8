(function(){var t=this,e=t._,i={},n=Array.prototype,s=Object.prototype,r=Function.prototype,o=n.push,a=n.slice,l=n.concat,c=s.toString,h=s.hasOwnProperty,u=n.forEach,d=n.map,p=n.reduce,f=n.reduceRight,g=n.filter,m=n.every,v=n.some,y=n.indexOf,b=n.lastIndexOf,x=Array.isArray,w=Object.keys,_=r.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var C=k.each=k.forEach=function(t,e,n){if(null==t)return t;if(u&&t.forEach===u)t.forEach(e,n);else if(t.length===+t.length){for(var s=0,r=t.length;r>s;s++)if(e.call(n,t[s],s,t)===i)return}else for(var o=k.keys(t),s=0,r=o.length;r>s;s++)if(e.call(n,t[o[s]],o[s],t)===i)return;return t};k.map=k.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(C(t,function(t,s,r){n.push(e.call(i,t,s,r))}),n)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return n&&(e=k.bind(e,n)),s?t.reduce(e,i):t.reduce(e);if(C(t,function(t,r,o){s?i=e.call(n,i,t,r,o):(i=t,s=!0)}),!s)throw new TypeError(S);return i},k.reduceRight=k.foldr=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=k.bind(e,n)),s?t.reduceRight(e,i):t.reduceRight(e);var r=t.length;if(r!==+r){var o=k.keys(t);r=o.length}if(C(t,function(a,l,c){l=o?o[--r]:--r,s?i=e.call(n,i,t[l],l,c):(i=t[l],s=!0)}),!s)throw new TypeError(S);return i},k.find=k.detect=function(t,e,i){var n;return T(t,function(t,s,r){return e.call(i,t,s,r)?(n=t,!0):void 0}),n},k.filter=k.select=function(t,e,i){var n=[];return null==t?n:g&&t.filter===g?t.filter(e,i):(C(t,function(t,s,r){e.call(i,t,s,r)&&n.push(t)}),n)},k.reject=function(t,e,i){return k.filter(t,function(t,n,s){return!e.call(i,t,n,s)},i)},k.every=k.all=function(t,e,n){e||(e=k.identity);var s=!0;return null==t?s:m&&t.every===m?t.every(e,n):(C(t,function(t,r,o){return(s=s&&e.call(n,t,r,o))?void 0:i}),!!s)};var T=k.some=k.any=function(t,e,n){e||(e=k.identity);var s=!1;return null==t?s:v&&t.some===v?t.some(e,n):(C(t,function(t,r,o){return s||(s=e.call(n,t,r,o))?i:void 0}),!!s)};k.contains=k.include=function(t,e){return null!=t&&(y&&t.indexOf===y?t.indexOf(e)!=-1:T(t,function(t){return t===e}))},k.invoke=function(t,e){var i=a.call(arguments,2),n=k.isFunction(e);return k.map(t,function(t){return(n?e:t[e]).apply(t,i)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var n=-1/0,s=-1/0;return C(t,function(t,r,o){var a=e?e.call(i,t,r,o):t;a>s&&(n=t,s=a)}),n},k.min=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var n=1/0,s=1/0;return C(t,function(t,r,o){var a=e?e.call(i,t,r,o):t;s>a&&(n=t,s=a)}),n},k.shuffle=function(t){var e,i=0,n=[];return C(t,function(t){e=k.random(i++),n[i-1]=n[e],n[e]=t}),n},k.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var E=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,i){return e=E(e),k.pluck(k.map(t,function(t,n,s){return{value:t,index:n,criteria:e.call(i,t,n,s)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var M=function(t){return function(e,i,n){var s={};return i=E(i),C(e,function(r,o){var a=i.call(n,r,o,e);t(s,a,r)}),s}};k.groupBy=M(function(t,e,i){k.has(t,e)?t[e].push(i):t[e]=[i]}),k.indexBy=M(function(t,e,i){t[e]=i}),k.countBy=M(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,i,n){i=E(i);for(var s=i.call(n,e),r=0,o=t.length;o>r;){var a=r+o>>>1;i.call(n,t[a])<s?r=a+1:o=a}return r},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:a.call(t,0,e)},k.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},k.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var A=function(t,e,i){return e&&k.every(t,k.isArray)?l.apply(i,t):(C(t,function(t){k.isArray(t)||k.isArguments(t)?e?o.apply(i,t):A(t,e,i):i.push(t)}),i)};k.flatten=function(t,e){return A(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.partition=function(t,e){var i=[],n=[];return C(t,function(t){(e(t)?i:n).push(t)}),[i,n]},k.uniq=k.unique=function(t,e,i,n){k.isFunction(e)&&(n=i,i=e,e=!1);var s=i?k.map(t,i,n):t,r=[],o=[];return C(s,function(i,n){(e?n&&o[o.length-1]===i:k.contains(o,i))||(o.push(i),r.push(t[n]))}),r},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(n,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=k.pluck(arguments,""+i);return e},k.object=function(t,e){if(null==t)return{};for(var i={},n=0,s=t.length;s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},k.indexOf=function(t,e,i){if(null==t)return-1;var n=0,s=t.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,s+i):i}if(y&&t.indexOf===y)return t.indexOf(e,i);for(;s>n;n++)if(t[n]===e)return n;return-1},k.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(b&&t.lastIndexOf===b)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var s=n?i:t.length;s--;)if(t[s]===e)return s;return-1},k.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=0,r=new Array(n);n>s;)r[s++]=t,t+=i;return r};var P=function(){};k.bind=function(t,e){var i,n;if(_&&t.bind===_)return _.apply(t,a.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));P.prototype=t.prototype;var s=new P;P.prototype=null;var r=t.apply(s,i.concat(a.call(arguments)));return Object(r)===r?r:s}},k.partial=function(t){var e=a.call(arguments,1);return function(){for(var i=0,n=e.slice(),s=0,r=n.length;r>s;s++)n[s]===k&&(n[s]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},k.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var i={};return e||(e=k.identity),function(){var n=e.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},k.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e,i){var n,s,r,o=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:k.now(),o=null,r=t.apply(n,s),n=s=null};return function(){var c=k.now();a||i.leading!==!1||(a=c);var h=e-(c-a);return n=this,s=arguments,0>=h?(clearTimeout(o),o=null,a=c,r=t.apply(n,s),n=s=null):o||i.trailing===!1||(o=setTimeout(l,h)),r}},k.debounce=function(t,e,i){var n,s,r,o,a,l=function(){var c=k.now()-o;e>c?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(r,s),r=s=null))};return function(){r=this,s=arguments,o=k.now();var c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(r,s),r=s=null),a}},k.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(w)return w(t);var e=[];for(var i in t)k.has(t,i)&&e.push(i);return e},k.values=function(t){for(var e=k.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=t[e[s]];return n},k.pairs=function(t){for(var e=k.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=[e[s],t[e[s]]];return n},k.invert=function(t){for(var e={},i=k.keys(t),n=0,s=i.length;s>n;n++)e[t[i[n]]]=i[n];return e},k.functions=k.methods=function(t){var e=[];for(var i in t)k.isFunction(t[i])&&e.push(i);return e.sort()},k.extend=function(t){return C(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},k.pick=function(t){var e={},i=l.apply(n,a.call(arguments,1));return C(i,function(i){i in t&&(e[i]=t[i])}),e},k.omit=function(t){var e={},i=l.apply(n,a.call(arguments,1));for(var s in t)k.contains(i,s)||(e[s]=t[s]);return e},k.defaults=function(t){return C(a.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var O=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var s=c.call(t);if(s!=c.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=i.length;r--;)if(i[r]==t)return n[r]==e;var o=t.constructor,a=e.constructor;if(o!==a&&!(k.isFunction(o)&&o instanceof o&&k.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;i.push(t),n.push(e);var l=0,h=!0;if("[object Array]"==s){if(l=t.length,h=l==e.length)for(;l--&&(h=O(t[l],e[l],i,n)););}else{for(var u in t)if(k.has(t,u)&&(l++,!(h=k.has(e,u)&&O(t[u],e[u],i,n))))break;if(h){for(u in e)if(k.has(e,u)&&!l--)break;h=!l}}return i.pop(),n.pop(),h};k.isEqual=function(t,e){return O(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=x||function(t){return"[object Array]"==c.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return h.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var i in t)if(t[i]!==e[i])return!1;return!0}},k.times=function(t,e,i){for(var n=Array(Math.max(0,t)),s=0;t>s;s++)n[s]=e.call(i,s);return n},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};D.unescape=k.invert(D.escape);var L={escape:new RegExp("["+k.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(D.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(L[t],function(e){return D[t][e]})}}),k.result=function(t,e){if(null!=t){var i=t[e];return k.isFunction(i)?i.call(t):i}},k.mixin=function(t){C(k.functions(t),function(e){var i=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),H.call(this,i.apply(k,t))}})};var I=0;k.uniqueId=function(t){var e=++I+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,i){var n;i=k.defaults({},i,k.templateSettings);var s=new RegExp([(i.escape||R).source,(i.interpolate||R).source,(i.evaluate||R).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(s,function(e,i,n,s,a){return o+=t.slice(r,a).replace(B,function(t){return"\\"+N[t]}),i&&(o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(o+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(o+="';\n"+s+"\n__p+='"),r=a+e.length,e}),o+="';\n",i.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{n=new Function(i.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return n(e,k);var l=function(t){return n.call(this,t,k)};return l.source="function("+(i.variable||"obj")+"){\n"+o+"}",l},k.chain=function(t){return k(t).chain()};var H=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];k.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],H.call(this,i)}}),C(["concat","join","slice"],function(t){var e=n[t];k.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}).call(this),function(t,e){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],o=r.slice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(var s=t?[t]:i.keys(this._events),r=0,o=s.length;r<o;r++){t=s[r];var a=this._events[t];if(a)if(e||n){for(var l=[],h=0,u=a.length;h<u;h++){var d=a[h];(e&&e!==d.callback&&e!==d.callback._callback||n&&n!==d.context)&&l.push(d)}l.length?this._events[t]=l:delete this._events[t]}else delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&h(i,e),n&&h(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var o in s)t=s[o],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(l.test(i)){for(var r=i.split(l),o=0,a=r.length;o<a;o++)t[e].apply(t,[r[o]].concat(n));return!1}return!0},h=function(t,e){var i,n=-1,s=t.length,r=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},u={listenTo:"on",listenToOnce:"once"};i.each(u,function(t,e){a[e]=function(e,n,s){var r=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=i.uniqueId("l"));return r[o]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,o,a,l,c,h,u;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;o=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(u[s],e)||a.push(s),i.isEqual(h[s],e)?delete this.changed[s]:this.changed[s]=e,o?delete u[s]:u[s]=e;if(!l){a.length&&(this._pending=n);for(var d=0,p=a.length;d<p;d++)this.trigger("change:"+a[d],this,u[a[d]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return!!e.set(e.parse(i,t),t)&&(n&&n(e,i,t),void e.trigger("sync",e,i,t))},R(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,o,a=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},a,s)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),!(i.isObject(e)&&!l.set(e,n))&&(c&&c(l,t,n),void l.trigger("sync",l,t,n))},R(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),o=this.sync(r,this,n),s&&n.wait&&(this.attributes=a),o},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;R(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||I();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){i[t]&&(d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)})});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};i.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,m))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});for(var s=0,r=t.length;s<r;s++){var o=t[s]=this.get(t[s]);if(o){delete this._byId[o.id],delete this._byId[o.cid];var a=this.indexOf(o);this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e)}}return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:t.slice();for(var s,r,o,a,l,c=e.at,h=this.comparator&&null==c&&e.sort!==!1,u=i.isString(this.comparator)?this.comparator:null,d=[],p=[],f={},m=e.add,v=e.merge,y=e.remove,b=!(h||!m||!y)&&[],x=0,w=t.length;x<w;x++){if(o=t[x]||{},s=this._isModel(o)?r=o:o[this.model.prototype.idAttribute||"id"],a=this.get(s))y&&(f[a.cid]=!0),v&&(o=o===r?r.attributes:o,e.parse&&(o=a.parse(o,e)),a.set(o,e),h&&!l&&a.hasChanged(u)&&(l=!0)),t[x]=a;else if(m){if(r=t[x]=this._prepareModel(o,e),!r)continue;d.push(r),this._addReference(r,e)}r=a||r,r&&(!b||!r.isNew()&&f[r.id]||b.push(r),f[r.id]=!0)}if(y){for(var x=0,w=this.length;x<w;x++)f[(r=this.models[x]).cid]||p.push(r);p.length&&this.remove(p,e)}if(d.length||b&&b.length)if(h&&(l=!0),this.length+=d.length,null!=c)for(var x=0,w=d.length;x<w;x++)this.models.splice(c+x,0,d[x]);else{b&&(this.models.length=0);for(var _=b||d,x=0,w=_.length;x<w;x++)this.models.push(_[x])}if(l&&this.sort({silent:!0}),!e.silent){for(var x=0,w=d.length;x<w;x++)(r=d[x]).trigger("add",r,this,e);(l||b&&b.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;n<s;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_isModel:function(t){return t instanceof d},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];i.each(v,function(t){i[t]&&(f.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),i[t].apply(i,e)})});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){i[t]&&(f.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)})});var b=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments)},x=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(x);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var r=k[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(s.url||(o.url=i.result(n,"url")||I()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",s.emulateJSON&&(o.data._method=r);var a=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),a)return a.apply(this,arguments)}}"GET"===o.type||s.emulateJSON||(o.processData=!1),"PATCH"===o.type&&_&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,l&&l.apply(this,arguments)};var c=s.xhr=e.ajax(i.extend(o,s));return n.trigger("request",n,c,s),c};var _=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,E=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(C.prototype,a,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var o=r._extractParameters(t,i);r.execute(s,o,n)!==!1&&(r.trigger.apply(r,["route:"+n].concat(o)),r.trigger("route",n,o),e.history.trigger("route",r,n,o))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(S,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,D=/#.*$/;A.started=!1,i.extend(A.prototype,a,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.location.search},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=decodeURI(this.location.pathname+this.location.search),e=this.root.slice(0,-1);return t.indexOf(e)||(t=t.slice(e.length)),t.slice(1)},getFragment:function(t){return null==t&&(t=this._hasPushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(P,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState),this.fragment=this.getFragment();var e=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this.root=("/"+this.root+"/").replace(O,"/"),!this._hasHashChange&&this._wantsHashChange&&(!this._wantsPushState||!this._hasPushState)){var n=document.createElement("iframe");n.src="javascript:0",n.style.display="none",n.tabIndex=-1;var s=document.body;this.iframe=s.insertBefore(n,s.firstChild).contentWindow,this.navigate(this.fragment)}if(this._hasPushState?e("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe?e("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),
this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.location.replace(this.root+"#"+this.getPath()),!0;this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._hasPushState?t("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe)),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=decodeURI(t.replace(D,"")),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe)&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var L=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=f.extend=C.extend=b.extend=A.extend=L;var I=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),function(t,e){if("function"==typeof define&&define.amd)define("backbone.wreqr",["backbone","underscore"],function(t,i){return e(t,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=e(i,n)}else e(t.Backbone,t._)}(this,function(t,e){"use strict";var i=t.Wreqr,n=t.Wreqr={};return t.Wreqr.VERSION="1.3.1",t.Wreqr.noConflict=function(){return t.Wreqr=i,this},n.Handlers=function(t,e){var i=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,i){var n=null;e.isObject(t)&&!e.isFunction(t)&&(n=t.context,t=t.callback),this.setHandler(i,t,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(t,e),n.CommandStorage=function(){var i=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),i}(),n.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,i)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,i,n){var s=this.storage.getCommands(t);e.each(s.instances,function(t){i.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var i,n=t.storageType||this.storageType;i=e.isFunction(n)?new n:n,this.storage=i}})}(n),n.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.hasHandler(t)?this.getHandler(t).apply(this,e):void 0}})}(n),n.EventAggregator=function(t,e){var i=function(){};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events),i}(t,e),n.Channel=function(){var i=function(e){this.vent=new t.Wreqr.EventAggregator,this.reqres=new t.Wreqr.RequestResponse,this.commands=new t.Wreqr.Commands,this.channelName=e};return e.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,i,n){if(i){n=n||this;var s="vent"===t?"on":"setHandler";e.each(i,function(i,r){this[t][s](r,e.bind(i,n))},this)}}}),i}(n),n.radio=function(t){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(i.prototype,{channel:function(t){if(!t)throw Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var i=this._channels[e];return i||(i=new t.Channel(e),this._channels[e]=i),i},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(n[t],function(e){this[t][e]=s(this,t,e)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},s=function(t,e,i){return function(n){var s=t._getChannel(n)[e],r=Array.prototype.slice.call(arguments,1);return s[i].apply(s,r)}};return new i}(n),t.Wreqr}),function(t,e){if("function"==typeof define&&define.amd)define("backbone.babysitter",["backbone","underscore"],function(t,i){return e(t,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=e(i,n)}else e(t.Backbone,t._)}(this,function(t,e){"use strict";var i=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;return this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===i?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(t,e),t.ChildViewContainer.VERSION="0.1.4",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=i,this},t.ChildViewContainer}),!function(t,e){if("object"==typeof exports){var i=require("underscore"),n=require("backbone"),s=require("backbone.wreqr"),r=require("backbone.babysitter");module.exports=e(i,n,s,r)}else"function"==typeof define&&define.amd&&define("marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],e)}(this,function(t,e){return!function(t,e,i){"use strict";function n(t,e){var i=new Error(t);throw i.name=e||"Error",i}var s={};e.Marionette=s,s.$=e.$;var r=Array.prototype.slice;return s.extend=e.Model.extend,s.getOption=function(t,e){if(t&&e){var i;return i=t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},s.normalizeMethods=function(t){var e,n={};return i.each(t,function(t,s){e=t,i.isFunction(e)||(e=this[e]),e&&(n[s]=e)},this),n},s.normalizeUIKeys=function(t,e){return"undefined"!=typeof t?(i.each(i.keys(t),function(i){var n=/@ui.[a-zA-Z_$0-9]*/g;i.match(n)&&(t[i.replace(n,function(t){return e[t.slice(4)]})]=t[i],delete t[i])}),t):void 0},s.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e)),s=[t].concat(i.toArray(arguments));return i[n].apply(i,s)}})},s.triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var e=/(^|:)(\w)/gi,n=function(n){var s="on"+n.replace(e,t),r=this[s];return i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(r)?r.apply(this,i.tail(arguments)):void 0};return n}(),s.MonitorDOMRefresh=function(t){function e(t){t._isShown=!0,s(t)}function n(t){t._isRendered=!0,s(t)}function s(t){t._isShown&&t._isRendered&&r(t)&&i.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}function r(e){return t.contains(e.el)}return function(t){t.listenTo(t,"show",function(){e(t)}),t.listenTo(t,"render",function(){n(t)})}}(document.documentElement),function(t){function e(t,e,s,r){var o=r.split(/\s+/);i.each(o,function(i){var r=t[i];r||n("Method '"+i+"' was configured as an event handler, but does not exist."),t.listenTo(e,s,r)})}function s(t,e,i,n){t.listenTo(e,i,n)}function r(t,e,n,s){var r=s.split(/\s+/);i.each(r,function(i){var s=t[i];t.stopListening(e,n,s)})}function o(t,e,i,n){t.stopListening(e,i,n)}function a(t,e,n,s,r){e&&n&&(i.isFunction(n)&&(n=n.call(t)),i.each(n,function(n,o){i.isFunction(n)?s(t,e,o,n):r(t,e,o,n)}))}t.bindEntityEvents=function(t,i,n){a(t,i,n,s,e)},t.unbindEntityEvents=function(t,e,i){a(t,e,i,o,r)}}(s),s.Callbacks=function(){this._deferred=s.$.Deferred(),this._callbacks=[]},i.extend(s.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(i,n){e&&(i=e),t.call(i,n)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=s.$.Deferred(),this._callbacks=[],i.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),s.Controller=function(t){this.triggerMethod=s.triggerMethod,this.options=t||{},i.isFunction(this.initialize)&&this.initialize(this.options)},s.Controller.extend=s.extend,i.extend(s.Controller.prototype,e.Events,{close:function(){this.stopListening();var t=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(t)),this.off()}}),s.Region=function(t){if(this.options=t||{},this.el=s.getOption(this,"el"),this.el||n("An 'el' must be specified for a region.","NoElError"),this.initialize){var e=Array.prototype.slice.apply(arguments);this.initialize.apply(this,e)}},i.extend(s.Region,{buildRegion:function(t,e){var s=i.isString(t),r=i.isString(t.selector),o=i.isUndefined(t.regionType),a=i.isFunction(t);a||s||r||n("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;s&&(l=t),t.selector&&(l=t.selector,delete t.selector),a&&(c=t),!a&&o&&(c=e),t.regionType&&(c=t.regionType,delete t.regionType),(s||a)&&(t={}),t.el=l;var h=new c(t);return t.parentEl&&(h.getEl=function(e){var n=t.parentEl;return i.isFunction(n)&&(n=n()),n.find(e)}),h}}),i.extend(s.Region.prototype,e.Events,{show:function(t,e){this.ensureEl();var n=e||{},r=t.isClosed||i.isUndefined(t.$el),o=t!==this.currentView,a=!!n.preventClose,l=!a&&o;return l&&this.close(),t.render(),s.triggerMethod.call(this,"before:show",t),i.isFunction(t.triggerMethod)?t.triggerMethod("before:show"):s.triggerMethod.call(t,"before:show"),(o||r)&&this.open(t),this.currentView=t,s.triggerMethod.call(this,"show",t),i.isFunction(t.triggerMethod)?t.triggerMethod("show"):s.triggerMethod.call(t,"show"),this},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return s.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),s.triggerMethod.call(this,"close",t),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),s.Region.extend=s.extend,s.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,e){var n={};return i.each(t,function(t,s){i.isString(t)&&(t={selector:t}),t.selector&&(t=i.defaults({},t,e));var r=this.addRegion(s,t);n[s]=r},this),n},addRegion:function(e,n){var s,r=i.isObject(n),o=i.isString(n),a=!!n.selector;return s=o||r&&a?t.Region.buildRegion(n,t.Region):i.isFunction(n)?t.Region.buildRegion(n,t.Region):n,this._store(e,s),this.triggerMethod("region:add",e,s),s},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){i.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){i.each(this._regions,function(t){t.close()},this)},close:function(){this.removeRegions(),t.Controller.prototype.close.apply(this,arguments)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){e.close(),e.stopListening(),delete this._regions[t],this._setLength(),this.triggerMethod("region:remove",t,e)},_setLength:function(){this.length=i.size(this._regions)}});return t.actAsCollection(e.prototype,"_regions"),e}(s),s.TemplateCache=function(t){this.templateId=t},i.extend(s.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new s.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=r.call(arguments),i=e.length;if(i>0)for(t=0;i>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),i.extend(s.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=s.$(t).html();return e&&0!==e.length||n("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return i.template(t)}}),s.Renderer={render:function(t,e){t||n("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var i;return(i="function"==typeof t?t:s.TemplateCache.get(t))(e)}},s.View=e.View.extend({constructor:function(t){i.bindAll(this,"render"),this.options=i.extend({},i.result(this,"options"),i.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(i.result(this,"events")),i.isObject(this.behaviors)&&new s.Behaviors(this),e.View.prototype.constructor.apply(this,arguments),s.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:s.triggerMethod,normalizeMethods:s.normalizeMethods,getTemplate:function(){return s.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var e=s.getOption(this,"templateHelpers");return i.isFunction(e)&&(e=e.call(this)),i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"ui");return s.normalizeUIKeys(t,e)},configureTriggers:function(){if(this.triggers){var t={},e=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(e,function(e,n){var s=i.isObject(e),r=s?e.event:e;t[n]=function(t){if(t){var i=t.preventDefault,n=t.stopPropagation,o=s?e.preventDefault:i,a=s?e.stopPropagation:n;o&&i&&i.apply(t),a&&n&&n.apply(t)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,l)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),s.bindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.bindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,i.isFunction(t)&&(t=t.call(this));var n={},s=i.result(this,"behaviorEvents")||{},r=this.configureTriggers();i.extend(n,s,t,r),e.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,t),s.unbindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.unbindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var t=Array.prototype.slice.call(arguments),e=this.triggerMethod.apply(this,["before:close"].concat(t));e!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(t)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(t),function(e){var i=t[e];this.ui[e]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),s.ItemView=s.View.extend({constructor:function(){s.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),i=s.Renderer.render(e,t);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),s.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),s.CollectionView=s.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),s.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(t){i.isFunction(t.triggerMethod)?t.triggerMethod("show"):s.triggerMethod.call(t,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(t){this.closeEmptyView();var e=this.getItemView(t),i=this.collection.indexOf(t);this.addItemView(t,e,i)},onShowCalled:function(){this.children.each(function(t){i.isFunction(t.triggerMethod)?t.triggerMethod("show"):s.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var t;this.collection.each(function(e,i){t=this.getItemView(e),this.addItemView(e,t,i)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new e.Model;this.addItemView(i,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return s.getOption(this,"emptyView")},getItemView:function(){var t=s.getOption(this,"itemView");return t||n("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(t,e,n){var r=s.getOption(this,"itemViewOptions");i.isFunction(r)&&(r=r.call(this,t,n));var o=this.buildItemView(t,e,r);return this.addChildViewEventForwarding(o),this.triggerMethod("before:item:added",o),this.children.add(o),this.renderItemView(o,n),this._isShown&&!this.isBuffering&&(i.isFunction(o.triggerMethod)?o.triggerMethod("show"):s.triggerMethod.call(o,"show")),this.triggerMethod("after:item:added",o),o},addChildViewEventForwarding:function(t){var e=s.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var n=r.call(arguments),o=n[0],a=this.normalizeMethods(this.getItemEvents());n[0]=e+":"+o,n.splice(1,0,t),"undefined"!=typeof a&&i.isFunction(a[o])&&a[o].apply(this,n),s.triggerMethod.apply(this,n)},this)},getItemEvents:function(){return i.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,e,n){var s=i.extend({model:t},n);return new e(s)},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(t.close?t.close():t.remove&&t.remove(),this.stopListening(t),this.children.remove(t)),this.triggerMethod("item:removed",t)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(t,e){t.$el.append(e)},appendHtml:function(t,e){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),s.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),s.CompositeView=s.CollectionView.extend({constructor:function(){s.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(){var t=s.getOption(this,"itemView")||this.constructor;return t||n("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),s.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return s.Renderer.render(e,t)},appendBuffer:function(t,e){var i=this.getItemViewContainer(t);i.append(e)},appendHtml:function(t,e){if(t.isBuffering)t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e);else{var i=this.getItemViewContainer(t);i.append(e.el)}},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var e,r=s.getOption(t,"itemViewContainer");if(r){var o=i.isFunction(r)?r.call(t):r;e="@"===o.charAt(0)&&t.ui?t.ui[o.substr(4)]:t.$(o),e.length<=0&&n("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else e=t.$el;return t.$itemViewContainer=e,e},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),s.Layout=s.ItemView.extend({regionType:s.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),s.ItemView.prototype.constructor.call(this,t)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),s.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),s.ItemView.prototype.close.apply(this,arguments))},addRegion:function(t,e){var i={};return i[t]=e,this._buildRegions(i)[t]},addRegions:function(t){return this.regions=i.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},_buildRegions:function(t){var e=this,i={regionType:s.getOption(this,"regionType"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,i)},_initializeRegions:function(t){var e;this._initRegionManager(),e=i.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new s.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),s.Behavior=function(t,e){function i(e,i){this.view=i,this.defaults=t.result(this,"defaults")||{},this.options=t.extend({},this.defaults,e),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return t.extend(i.prototype,e.Events,{initialize:function(){},close:function(){this.stopListening()},triggerMethod:s.triggerMethod}),i.extend=s.extend,i}(i,e),s.Behaviors=function(t,e){function i(t){this.behaviors=i.parseBehaviors(t,e.result(t,"behaviors")),i.wrap(t,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","behaviorEvents","triggerMethod","setElement","close"])}var n={setElement:function(t,i){t.apply(this,e.tail(arguments,2)),e.each(i,function(t){t.$el=this.$el},this)},close:function(t,i){var n=e.tail(arguments,2);t.apply(this,n),e.invoke(i,"close",n)},bindUIElements:function(t,i){t.apply(this),e.invoke(i,t)},unbindUIElements:function(t,i){t.apply(this),e.invoke(i,t)},triggerMethod:function(t,i){var n=e.tail(arguments,2);t.apply(this,n),e.each(i,function(e){t.apply(e,n)})},delegateEvents:function(i,n){var s=e.tail(arguments,2);i.apply(this,s),e.each(n,function(e){t.bindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.bindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},undelegateEvents:function(i,n){var s=e.tail(arguments,2);i.apply(this,s),e.each(n,function(e){t.unbindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.unbindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},behaviorEvents:function(i,n){var s={},r=e.result(this,"ui");return e.each(n,function(i,n){var o={},a=e.clone(e.result(i,"events"))||{},l=e.result(i,"ui"),c=e.extend({},r,l);a=t.normalizeUIKeys(a,c),e.each(e.keys(a),function(t){var s=new Array(n+2).join(" "),r=t+s,l=e.isFunction(a[t])?a[t]:i[a[t]];o[r]=e.bind(l,i)}),s=e.extend(s,o)}),s}};return e.extend(i,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(t,n){return e.map(n,function(e,n){var s=i.getBehaviorClass(e,n);return new s(e,t)})},wrap:function(t,i,s){e.each(s,function(s){t[s]=e.partial(n[s],t[s],i)})}}),i}(s,i),s.AppRouter=e.Router.extend({constructor:function(t){e.Router.prototype.constructor.apply(this,arguments),this.options=t||{};var i=s.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){var n=i.invert(this.appRoutes)[t];i.isFunction(this.onRoute)&&this.onRoute(t,n,e)},processAppRoutes:function(t,e){if(e){var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)}},_getController:function(){return s.getOption(this,"controller")},_addAppRoute:function(t,e,s){var r=t[s];r||n("Method '"+s+"' was not found on the controller"),this.route(e,s,i.bind(r,t))}}),s.Application=function(t){this._initRegionManager(),this._initCallbacks=new s.Callbacks,this.vent=new e.Wreqr.EventAggregator,this.commands=new e.Wreqr.Commands,this.reqres=new e.Wreqr.RequestResponse,this.submodules={},i.extend(this,t),this.triggerMethod=s.triggerMethod},i.extend(s.Application.prototype,e.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(t){this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},module:function(t,e){var i=s.Module.getClass(e),n=r.call(arguments);return n.unshift(this),i.create.apply(i,n)},_initRegionManager:function(){this._regionManager=new s.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t){delete this[t]})}}),s.Application.extend=s.extend,s.Module=function(t,e,n){this.moduleName=t,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,this.triggerMethod=s.triggerMethod,i.isFunction(this.initialize)&&this.initialize(this.options,t,e)},s.Module.extend=s.extend,i.extend(s.Module.prototype,e.Events,{initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(i.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t));
},stop:function(){this._isInitialized&&(this._isInitialized=!1,s.triggerMethod.call(this,"before:stop"),i.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),s.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var r=i.flatten([this,this.app,e,s,s.$,i,n]);t.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new s.Callbacks,this._finalizerCallbacks=new s.Callbacks}}),i.extend(s.Module,{create:function(t,e,n){var s=t,o=r.call(arguments);o.splice(0,3),e=e.split(".");var a=e.length,l=[];return l[a-1]=n,i.each(e,function(e,i){var r=s;s=this._getModule(r,e,t,n),this._addModuleDefinition(r,s,l[i],o)},this),s},_getModule:function(t,e,n,s){var r=i.extend({},s),o=this.getClass(s),a=t[e];return a||(a=new o(e,n,r),t[e]=a,t.submodules[e]=a),a},getClass:function(t){var e=s.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,i,n){var s=this._getDefine(i),r=this._getStartWithParent(i,e);s&&e.addDefinition(s,n),this._addStartWithParent(t,e,r)},_getStartWithParent:function(t,e){var n;return i.isFunction(t)&&t.prototype instanceof s.Module?(n=e.constructor.prototype.startWithParent,!!i.isUndefined(n)||n):!i.isObject(t)||(n=t.startWithParent,!!i.isUndefined(n)||n)},_getDefine:function(t){return!i.isFunction(t)||t.prototype instanceof s.Module?i.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),s}(this,e,t),e.Marionette}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("handlebars",e):"object"==typeof exports?exports.Handlebars=e():t.Handlebars=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(){var t=v();return t.compile=function(e,i){return h.compile(e,i,t)},t.precompile=function(e,i){return h.precompile(e,i,t)},t.AST=l["default"],t.Compiler=h.Compiler,t.JavaScriptCompiler=d["default"],t.Parser=c.parser,t.parse=c.parse,t}var s=i(8)["default"];e.__esModule=!0;var r=i(1),o=s(r),a=i(2),l=s(a),c=i(3),h=i(4),u=i(5),d=s(u),p=i(6),f=s(p),g=i(7),m=s(g),v=o["default"].create,y=n();y.create=n,m["default"](y),y.Visitor=f["default"],y["default"]=y,e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";function n(){var t=new a.HandlebarsEnvironment;return p.extend(t,a),t.SafeString=c["default"],t.Exception=u["default"],t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=g,t.template=function(e){return g.template(e,t)},t}var s=i(9)["default"],r=i(8)["default"];e.__esModule=!0;var o=i(10),a=s(o),l=i(11),c=r(l),h=i(12),u=r(h),d=i(13),p=s(d),f=i(14),g=s(f),m=i(7),v=r(m),y=n();y.create=n,v["default"](y),y["default"]=y,e["default"]=y,t.exports=e["default"]},function(t,e,i){"use strict";e.__esModule=!0;var n={Program:function(t,e,i,n){this.loc=n,this.type="Program",this.body=t,this.blockParams=e,this.strip=i},MustacheStatement:function(t,e,i,n,s,r){this.loc=r,this.type="MustacheStatement",this.path=t,this.params=e||[],this.hash=i,this.escaped=n,this.strip=s},BlockStatement:function(t,e,i,n,s,r,o,a,l){this.loc=l,this.type="BlockStatement",this.path=t,this.params=e||[],this.hash=i,this.program=n,this.inverse=s,this.openStrip=r,this.inverseStrip=o,this.closeStrip=a},PartialStatement:function(t,e,i,n,s){this.loc=s,this.type="PartialStatement",this.name=t,this.params=e||[],this.hash=i,this.indent="",this.strip=n},ContentStatement:function(t,e){this.loc=e,this.type="ContentStatement",this.original=this.value=t},CommentStatement:function(t,e,i){this.loc=i,this.type="CommentStatement",this.value=t,this.strip=e},SubExpression:function(t,e,i,n){this.loc=n,this.type="SubExpression",this.path=t,this.params=e||[],this.hash=i},PathExpression:function(t,e,i,n,s){this.loc=s,this.type="PathExpression",this.data=t,this.original=n,this.parts=i,this.depth=e},StringLiteral:function(t,e){this.loc=e,this.type="StringLiteral",this.original=this.value=t},NumberLiteral:function(t,e){this.loc=e,this.type="NumberLiteral",this.original=this.value=Number(t)},BooleanLiteral:function(t,e){this.loc=e,this.type="BooleanLiteral",this.original=this.value="true"===t},UndefinedLiteral:function(t){this.loc=t,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(t){this.loc=t,this.type="NullLiteral",this.original=this.value=null},Hash:function(t,e){this.loc=e,this.type="Hash",this.pairs=t},HashPair:function(t,e,i){this.loc=i,this.type="HashPair",this.key=t,this.value=e},helpers:{helperExpression:function(t){return!("SubExpression"!==t.type&&!t.params.length&&!t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!n.helpers.scopedId(t)&&!t.depth}}};e["default"]=n,t.exports=e["default"]},function(t,e,i){"use strict";function n(t,e){if("Program"===t.type)return t;a["default"].yy=g,g.locInfo=function(t){return new g.SourceLocation(e&&e.srcName,t)};var i=new u["default"];return i.accept(a["default"].parse(t))}var s=i(8)["default"],r=i(9)["default"];e.__esModule=!0,e.parse=n;var o=i(15),a=s(o),l=i(2),c=s(l),h=i(16),u=s(h),d=i(17),p=r(d),f=i(13);e.parser=a["default"];var g={};f.extend(g,p,c["default"])},function(t,e,i){"use strict";function n(){}function s(t,e,i){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new h["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var n=i.parse(t,e),s=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(s,e)}function r(t,e,i){function n(){var e=i.parse(t,r),n=(new i.Compiler).compile(e,r),s=(new i.JavaScriptCompiler).compile(n,r,void 0,!0);return i.template(s)}function s(t,e){return o||(o=n()),o.call(this,t,e)}var r=void 0===arguments[1]?{}:arguments[1];if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new h["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in r||(r.data=!0),r.compat&&(r.useDepths=!0);var o=void 0;return s._setup=function(t){return o||(o=n()),o._setup(t)},s._child=function(t,e,i,s){return o||(o=n()),o._child(t,e,i,s)},s}function o(t,e){if(t===e)return!0;if(u.isArray(t)&&u.isArray(e)&&t.length===e.length){for(var i=0;i<t.length;i++)if(!o(t[i],e[i]))return!1;return!0}}function a(t){if(!t.path.parts){var e=t.path;t.path=new p["default"].PathExpression((!1),0,[e.original+""],e.original+"",e.loc)}}var l=i(8)["default"];e.__esModule=!0,e.Compiler=n,e.precompile=s,e.compile=r;var c=i(12),h=l(c),u=i(13),d=i(2),p=l(d),f=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;i<e;i++){var n=this.opcodes[i],s=t.opcodes[i];if(n.opcode!==s.opcode||!o(n.args,s.args))return!1}e=this.children.length;for(var i=0;i<e;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var i=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},i)for(var n in i)n in i&&(e.knownHelpers[n]=i[n]);return this.accept(t)},compileProgram:function(t){var e=new this.compiler,i=e.compile(t,this.options),n=this.guid++;return this.usePartial=this.usePartial||i.usePartial,this.children[n]=i,this.useDepths=this.useDepths||i.useDepths,n},accept:function(t){this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,i=e.length,n=0;n<i;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===i,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){a(t);var e=t.program,i=t.inverse;e=e&&this.compileProgram(e),i=i&&this.compileProgram(i);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,i):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,i),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(t){this.usePartial=!0;var e=t.params;if(e.length>1)throw new h["default"]("Unsupported number of partial arguments: "+e.length,t);e.length||e.push({type:"PathExpression",parts:[],depth:0});var i=t.name.original,n="SubExpression"===t.name.type;n&&this.accept(t.name),this.setupFullMustacheParams(t,void 0,void 0,!0);var s=t.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",n,i,s),this.opcode("append")},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){a(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,i){var n=t.path,s=n.parts[0],r=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.accept(n),this.opcode("invokeAmbiguous",s,r)},simpleSexpr:function(t){this.accept(t.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),s=t.path,r=s.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",n.length,r);else{if(this.options.knownHelpersOnly)throw new h["default"]("You specified knownHelpersOnly, but used the unknown helper "+r,t);s.falsy=!0,this.accept(s),this.opcode("invokeHelper",n.length,s.original,p["default"].helpers.simpleId(s))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],i=p["default"].helpers.scopedId(t),n=!t.depth&&!i&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts)):this.opcode("lookupOnContext",t.parts,t.falsy,i):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,i=0,n=e.length;for(this.opcode("pushHash");i<n;i++)this.pushParam(e[i].value);for(;i--;)this.opcode("assignToHash",e[i].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=p["default"].helpers.simpleId(t.path),i=e&&!!this.blockParamIndex(t.path.parts[0]),n=!i&&p["default"].helpers.helperExpression(t),s=!i&&(n||e);if(s&&!n){var r=t.path.parts[0],o=this.options;o.knownHelpers[r]?n=!0:o.knownHelpersOnly&&(s=!1)}return n?"helper":s?"ambiguous":"simple"},pushParams:function(t){for(var e=0,i=t.length;e<i;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var i=void 0;if(!t.parts||p["default"].helpers.scopedId(t)||t.depth||(i=this.blockParamIndex(t.parts[0])),i){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,n)}else e=t.original||e,e.replace&&(e=e.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,i,n){var s=t.params;return this.pushParams(s),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),s},blockParamIndex:function(t){for(var e=0,i=this.options.blockParams.length;e<i;e++){var n=this.options.blockParams[e],s=n&&u.indexOf(n,t);if(n&&s>=0)return[e,s]}}}},function(t,e,i){"use strict";function n(t){this.value=t}function s(){}function r(t,e,i,n){var s=e.popStack(),r=0,o=i.length;for(t&&o--;r<o;r++)s=e.nameLookup(s,i[r],n);return t?[e.aliasable("this.strict"),"(",s,", ",e.quotedString(i[r]),")"]:s}var o=i(8)["default"];e.__esModule=!0;var a=i(10),l=i(12),c=o(l),h=i(13),u=i(18),d=o(u);s.prototype={nameLookup:function(t,e){return s.isValidJavaScriptVariableName(e)?[t,".",e]:[t,"['",e,"']"]},depthedLookup:function(t){return[this.aliasable("this.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=a.COMPILER_REVISION,e=a.REVISION_CHANGES[t];return[t,e]},appendToBuffer:function(t,e,i){return h.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:i?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,e,i,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var s=t.opcodes,r=void 0,o=void 0,a=void 0,l=void 0;for(a=0,l=s.length;a<l;a++)r=s[a],this.source.currentLocation=r.loc,o=o||r.loc,this[r.opcode].apply(this,r.args);if(this.source.currentLocation=o,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c["default"]("Compile completed with content left on stack");var h=this.createFunctionContext(n);if(this.isChild)return h;var u={compiler:this.compilerInfo(),main:h},d=this.context.programs;for(a=0,l=d.length;a<l;a++)d[a]&&(u[a]=d[a]);return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.useBlockParams&&(u.useBlockParams=!0),this.options.compat&&(u.compat=!0),n?u.compilerOptions=this.options:(u.compiler=JSON.stringify(u.compiler),this.source.currentLocation={start:{line:1,column:0}},u=this.objectLiteral(u),e.srcName?(u=u.toStringWithSourceMap({file:e.destName}),u.map=u.map&&u.map.toString()):u=u.toString()),u},preamble:function(){this.lastContext=0,this.source=new d["default"](this.options.srcName)},createFunctionContext:function(t){var e="",i=this.stackVars.concat(this.registers.list);i.length>0&&(e+=", "+i.join(", "));var n=0;for(var s in this.aliases){var r=this.aliases[s];this.aliases.hasOwnProperty(s)&&r.children&&r.referenceCount>1&&(e+=", alias"+ ++n+"="+s,r.children[0]="alias"+n)}var o=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var a=this.mergeSource(e);return t?(o.push(a),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",a,"}"])},mergeSource:function(t){var e=this.environment.isSimple,i=!this.forceBuffer,n=void 0,s=void 0,r=void 0,o=void 0;return this.source.each(function(t){t.appendToBuffer?(r?t.prepend("  + "):r=t,o=t):(r&&(s?r.prepend("buffer += "):n=!0,o.add(";"),r=o=void 0),s=!0,e||(i=!1))}),i?r?(r.prepend("return "),o.add(";")):s||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),r?(r.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(t){var e=this.aliasable("helpers.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(t,0,i);var n=this.popStack();i.splice(1,0,n),this.push(this.source.functionCall(e,"call",i))},ambiguousBlockValue:function(){var t=this.aliasable("helpers.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var i=this.topStack();e.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,i){var n=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[n++])),this.resolvePath("context",t,n,e)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e){t?this.pushStackLiteral("this.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0)},resolvePath:function(t,e,i,n){var s=this;if(this.options.strict||this.options.assumeObjects)return void this.push(r(this.options.strict,this,e,t));for(var o=e.length;i<o;i++)this.replaceStack(function(r){var o=s.nameLookup(r,e[i],t);return n?[" && ",o]:[" != null ? ",o," : ",r]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,i){var n=this.popStack(),s=this.setupHelper(t,e),r=i?[s.name," || "]:"",o=["("].concat(r,n);this.options.strict||o.push(" || ",this.aliasable("helpers.helperMissing")),o.push(")"),this.push(this.source.functionCall(o,"call",s.callParams))},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),s=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=["(","(helper = ",s," || ",i,")"];this.options.strict||(r[0]="(helper = ",r.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",r,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,i){var n=[],s=this.setupParams(e,1,n,!1);t&&(e=this.popStack(),delete s.name),i&&(s.indent=JSON.stringify(i)),s.helpers="helpers",s.partials="partials",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(s.depths="depths"),s=this.objectLiteral(s),n.push(s),this.push(this.source.functionCall("this.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),i=void 0,n=void 0,s=void 0;this.trackIds&&(s=this.popStack()),this.stringParams&&(n=this.popStack(),i=this.popStack());var r=this.hash;i&&(r.contexts[t]=i),n&&(r.types[t]=n),s&&(r.ids[t]=s),r.values[t]=e},pushId:function(t,e,i){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:s,compileChildren:function(t,e){for(var i=t.children,n=void 0,s=void 0,r=0,o=i.length;r<o;r++){n=i[r],s=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=s.compile(n,e,this.context,!this.precompile),this.context.environments[a]=n,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams):(n.index=a,n.name="program"+a,this.useDepths=this.useDepths||n.useDepths,this.useBlockParams=this.useBlockParams||n.useBlockParams)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;e<i;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){var e=this.environment.children[t],i=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"this.program("+i.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],i=void 0,s=void 0,r=void 0;if(!this.isInline())throw new c["default"]("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof n)i=[o.value],e=["(",i],r=!0;else{s=!0;var a=this.incrStack();e=["((",this.push(a)," = ",o,")"],i=this.topStack()}var l=t.call(this,i);r||this.popStack(),s&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,i=t.length;e<i;e++){var s=t[e];if(s instanceof n)this.compileStack.push(s);else{var r=this.incrStack();this.pushSource([r," = ",s,";"]),this.compileStack.push(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new c["default"]("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):(e=this.aliases[t]=this.source.wrap(t),e.aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,i){var n=[],s=this.setupHelperArgs(e,t,n,i),r=this.nameLookup("helpers",e,"helper");return{params:n,paramsInit:s,name:r,callParams:[this.contextName(0)].concat(n)}},setupParams:function(t,e,i){var n={},s=[],r=[],o=[],a=void 0;n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"this.noop",n.inverse=l||"this.noop");for(var h=e;h--;)a=this.popStack(),i[h]=a,this.trackIds&&(o[h]=this.popStack()),this.stringParams&&(r[h]=this.popStack(),s[h]=this.popStack());return this.trackIds&&(n.ids=this.source.generateArray(o)),this.stringParams&&(n.types=this.source.generateArray(r),n.contexts=this.source.generateArray(s)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,i,n){var s=this.setupParams(t,e,i,!0);return s=this.objectLiteral(s),n?(this.useRegister("options"),i.push("options"),["options=",s]):(i.push(s),"")}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=s.RESERVED_WORDS={},i=0,n=t.length;i<n;i++)e[t[i]]=!0}(),s.isValidJavaScriptVariableName=function(t){return!s.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e["default"]=s,t.exports=e["default"]},function(t,e,i){"use strict";function n(){this.parents=[]}var s=i(8)["default"];e.__esModule=!0;var r=i(12),o=s(r),a=i(2),l=s(a);n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var i=this.accept(t[e]);if(this.mutating){if(i&&(!i.type||!l["default"][i.type]))throw new o["default"]('Unexpected node type "'+i.type+'" found when accepting '+e+" on "+t.type);t[e]=i}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new o["default"](t.type+" requires "+e)},acceptArray:function(t){for(var e=0,i=t.length;e<i;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,i--)},accept:function(t){if(t){this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:e!==!1?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")},BlockStatement:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash"),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")},PartialStatement:function(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e["default"]=n,t.exports=e["default"]},function(t,e,i){(function(i){"use strict";e.__esModule=!0,e["default"]=function(t){var e="undefined"!=typeof i?i:window,n=e.Handlebars;t.noConflict=function(){e.Handlebars===t&&(e.Handlebars=n)}},t.exports=e["default"]}).call(e,function(){return this}())},function(t,e,i){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e,i){"use strict";e["default"]=function(t){if(t&&t.__esModule)return t;var e={};if("object"==typeof t&&null!==t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e},e.__esModule=!0},function(t,e,i){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},s(this)}function s(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new u["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse,s=i.fn;if(e===!0)return s(this);if(e===!1||null==e)return n(this);if(g(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):n(this);if(i.data&&i.ids){var o=r(i.data);o.contextPath=c.appendContextPath(i.data.contextPath,i.name),i={data:o}}return s(e,i)}),t.registerHelper("each",function(t,e){function i(e,i,s){l&&(l.key=e,l.index=i,l.first=0===i,l.last=!!s,h&&(l.contextPath=h+e)),a+=n(t[e],{data:l,blockParams:c.blockParams([t[e],e],[h+e,null])})}if(!e)throw new u["default"]("Must pass iterator to #each");var n=e.fn,s=e.inverse,o=0,a="",l=void 0,h=void 0;if(e.data&&e.ids&&(h=c.appendContextPath(e.data.contextPath,e.ids[0])+"."),m(t)&&(t=t.call(this)),e.data&&(l=r(e.data)),t&&"object"==typeof t)if(g(t))for(var d=t.length;o<d;o++)i(o,o,o===t.length-1);else{var p=void 0;for(var f in t)t.hasOwnProperty(f)&&(p&&i(p,o-1),p=f,o++);p&&i(p,o-1,!0)}return 0===o&&(a=s(this)),a}),t.registerHelper("if",function(t,e){return m(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||c.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){m(t)&&(t=t.call(this));var i=e.fn;if(c.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var n=r(e.data);n.contextPath=c.appendContextPath(e.data.contextPath,e.ids[0]),e={data:n}}return i(t,e)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}function r(t){var e=c.extend({},t);return e._parent=t,e}var o=i(9)["default"],a=i(8)["default"];e.__esModule=!0,e.HandlebarsEnvironment=n,e.createFrame=r;var l=i(13),c=o(l),h=i(12),u=a(h),d="3.0.1";e.VERSION=d;var p=6;e.COMPILER_REVISION=p;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};e.REVISION_CHANGES=f;var g=c.isArray,m=c.isFunction,v=c.toString,y="[object Object]";n.prototype={constructor:n,logger:b,log:x,registerHelper:function(t,e){if(v.call(t)===y){if(e)throw new u["default"]("Arg not supported with multiple helpers");c.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(v.call(t)===y)c.extend(this.partials,t);else{if("undefined"==typeof e)throw new u["default"]("Attempting to register a partial as undefined");this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]}};var b={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(t,e){if("undefined"!=typeof console&&b.level<=t){var i=b.methodMap[t];(console[i]||console.log).call(console,e)}}};e.logger=b;var x=b.log;e.log=x},function(t,e,i){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e["default"]=n,t.exports=e["default"]},function(t,e,i){"use strict";function n(t,e){var i=e&&e.loc,r=void 0,o=void 0;i&&(r=i.start.line,o=i.start.column,t+=" - "+r+":"+o);for(var a=Error.prototype.constructor.call(this,t),l=0;l<s.length;l++)this[s[l]]=a[s[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n),i&&(this.lineNumber=r,this.column=o)}e.__esModule=!0;var s=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e["default"]=n,t.exports=e["default"];
},function(t,e,i){"use strict";function n(t){return h[t]}function s(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function r(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function o(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return d.test(t)?t.replace(u,n):t}function a(t){return!t&&0!==t||!(!g(t)||0!==t.length)}function l(t,e){return t.path=e,t}function c(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=s,e.indexOf=r,e.escapeExpression=o,e.isEmpty=a,e.blockParams=l,e.appendContextPath=c;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,d=/[&<>"'`]/,p=Object.prototype.toString;e.toString=p;var f=function(t){return"function"==typeof t};f(/x/)&&(e.isFunction=f=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)});var f;e.isFunction=f;var g=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===p.call(t)};e.isArray=g},function(t,e,i){"use strict";function n(t){var e=t&&t[0]||1,i=m.COMPILER_REVISION;if(e!==i){if(e<i){var n=m.REVISION_CHANGES[i],s=m.REVISION_CHANGES[e];throw new g["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new g["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){function i(i,n,s){s.hash&&(n=p.extend({},n,s.hash)),i=e.VM.resolvePartial.call(this,i,n,s);var r=e.VM.invokePartial.call(this,i,n,s);if(null==r&&e.compile&&(s.partials[s.name]=e.compile(i,t.compilerOptions,e),r=s.partials[s.name](n,s)),null!=r){if(s.indent){for(var o=r.split("\n"),a=0,l=o.length;a<l&&(o[a]||a+1!==l);a++)o[a]=s.indent+o[a];r=o.join("\n")}return r}throw new g["default"]("The partial "+s.name+" could not be compiled when running in runtime-only mode")}function n(e){var i=void 0===arguments[1]?{}:arguments[1],r=i.data;n._setup(i),!i.partial&&t.useData&&(r=c(e,r));var o=void 0,a=t.useBlockParams?[]:void 0;return t.useDepths&&(o=i.depths?[e].concat(i.depths):[e]),t.main.call(s,e,s.helpers,s.partials,r,a,o)}if(!e)throw new g["default"]("No environment passed to template");if(!t||!t.main)throw new g["default"]("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var s={strict:function(t,e){if(!(e in t))throw new g["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:p.escapeExpression,invokePartial:i,fn:function(e){return t[e]},programs:[],program:function(t,e,i,n,s){var o=this.programs[t],a=this.fn(t);return e||s||n||i?o=r(this,t,a,e,i,n,s):o||(o=this.programs[t]=r(this,t,a)),o},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=p.extend({},e,t)),i},noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(i){i.partial?(s.helpers=i.helpers,s.partials=i.partials):(s.helpers=s.merge(i.helpers,e.helpers),t.usePartial&&(s.partials=s.merge(i.partials,e.partials)))},n._child=function(e,i,n,o){if(t.useBlockParams&&!n)throw new g["default"]("must pass block params");if(t.useDepths&&!o)throw new g["default"]("must pass parent depths");return r(s,e,t[e],i,0,n,o)},n}function r(t,e,i,n,s,r,o){function a(e){var s=void 0===arguments[1]?{}:arguments[1];return i.call(t,e,t.helpers,t.partials,s.data||n,r&&[s.blockParams].concat(r),o&&[e].concat(o))}return a.program=e,a.depth=o?o.length:0,a.blockParams=s||0,a}function o(t,e,i){return t?t.call||i.name||(i.name=t,t=i.partials[t]):t=i.partials[i.name],t}function a(t,e,i){if(i.partial=!0,void 0===t)throw new g["default"]("The partial "+i.name+" could not be found");if(t instanceof Function)return t(e,i)}function l(){return""}function c(t,e){return e&&"root"in e||(e=e?m.createFrame(e):{},e.root=t),e}var h=i(9)["default"],u=i(8)["default"];e.__esModule=!0,e.checkRevision=n,e.template=s,e.wrapProgram=r,e.resolvePartial=o,e.invokePartial=a,e.noop=l;var d=i(13),p=h(d),f=i(12),g=u(f),m=i(10)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(t,e,i,n,s,r,o){var a=r.length-1;switch(s){case 1:return r[a-1];case 2:this.$=new n.Program(r[a],null,{},n.locInfo(this._$));break;case 3:this.$=r[a];break;case 4:this.$=r[a];break;case 5:this.$=r[a];break;case 6:this.$=r[a];break;case 7:this.$=r[a];break;case 8:this.$=new n.CommentStatement(n.stripComment(r[a]),n.stripFlags(r[a],r[a]),n.locInfo(this._$));break;case 9:this.$=new n.ContentStatement(r[a],n.locInfo(this._$));break;case 10:this.$=n.prepareRawBlock(r[a-2],r[a-1],r[a],this._$);break;case 11:this.$={path:r[a-3],params:r[a-2],hash:r[a-1]};break;case 12:this.$=n.prepareBlock(r[a-3],r[a-2],r[a-1],r[a],!1,this._$);break;case 13:this.$=n.prepareBlock(r[a-3],r[a-2],r[a-1],r[a],!0,this._$);break;case 14:this.$={path:r[a-4],params:r[a-3],hash:r[a-2],blockParams:r[a-1],strip:n.stripFlags(r[a-5],r[a])};break;case 15:this.$={path:r[a-4],params:r[a-3],hash:r[a-2],blockParams:r[a-1],strip:n.stripFlags(r[a-5],r[a])};break;case 16:this.$={path:r[a-4],params:r[a-3],hash:r[a-2],blockParams:r[a-1],strip:n.stripFlags(r[a-5],r[a])};break;case 17:this.$={strip:n.stripFlags(r[a-1],r[a-1]),program:r[a]};break;case 18:var l=n.prepareBlock(r[a-2],r[a-1],r[a],r[a],!1,this._$),c=new n.Program([l],null,{},n.locInfo(this._$));c.chained=!0,this.$={strip:r[a-2].strip,program:c,chain:!0};break;case 19:this.$=r[a];break;case 20:this.$={path:r[a-1],strip:n.stripFlags(r[a-2],r[a])};break;case 21:this.$=n.prepareMustache(r[a-3],r[a-2],r[a-1],r[a-4],n.stripFlags(r[a-4],r[a]),this._$);break;case 22:this.$=n.prepareMustache(r[a-3],r[a-2],r[a-1],r[a-4],n.stripFlags(r[a-4],r[a]),this._$);break;case 23:this.$=new n.PartialStatement(r[a-3],r[a-2],r[a-1],n.stripFlags(r[a-4],r[a]),n.locInfo(this._$));break;case 24:this.$=r[a];break;case 25:this.$=r[a];break;case 26:this.$=new n.SubExpression(r[a-3],r[a-2],r[a-1],n.locInfo(this._$));break;case 27:this.$=new n.Hash(r[a],n.locInfo(this._$));break;case 28:this.$=new n.HashPair(n.id(r[a-2]),r[a],n.locInfo(this._$));break;case 29:this.$=n.id(r[a-1]);break;case 30:this.$=r[a];break;case 31:this.$=r[a];break;case 32:this.$=new n.StringLiteral(r[a],n.locInfo(this._$));break;case 33:this.$=new n.NumberLiteral(r[a],n.locInfo(this._$));break;case 34:this.$=new n.BooleanLiteral(r[a],n.locInfo(this._$));break;case 35:this.$=new n.UndefinedLiteral(n.locInfo(this._$));break;case 36:this.$=new n.NullLiteral(n.locInfo(this._$));break;case 37:this.$=r[a];break;case 38:this.$=r[a];break;case 39:this.$=n.preparePath(!0,r[a],this._$);break;case 40:this.$=n.preparePath(!1,r[a],this._$);break;case 41:r[a-2].push({part:n.id(r[a]),original:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 42:this.$=[{part:n.id(r[a]),original:r[a]}];break;case 43:this.$=[];break;case 44:r[a-1].push(r[a]);break;case 45:this.$=[];break;case 46:r[a-1].push(r[a]);break;case 53:this.$=[];break;case 54:r[a-1].push(r[a]);break;case 59:this.$=[];break;case 60:r[a-1].push(r[a]);break;case 65:this.$=[];break;case 66:r[a-1].push(r[a]);break;case 73:this.$=[];break;case 74:r[a-1].push(r[a]);break;case 77:this.$=[];break;case 78:r[a-1].push(r[a]);break;case 81:this.$=[];break;case 82:r[a-1].push(r[a]);break;case 85:this.$=[];break;case 86:r[a-1].push(r[a]);break;case 89:this.$=[r[a]];break;case 90:r[a-1].push(r[a]);break;case 91:this.$=[r[a]];break;case 92:r[a-1].push(r[a])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],s=[null],r=[],o=this.table,a="",l=0,c=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,x,w,_={};;){if(g=n[n.length-1],this.defaultActions[g]?m=this.defaultActions[g]:(null!==p&&"undefined"!=typeof p||(p=e()),m=o[g]&&o[g][p]),"undefined"==typeof m||!m.length||!m[0]){var k="";if(!h){w=[];for(y in o[g])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:w})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:n.push(p),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(m[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,h>0&&h--);break;case 2:if(b=this.productions_[m[1]][1],_.$=s[s.length-b],_._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},d&&(_._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(_,a,c,l,this.yy,m[1],s,r),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),s=s.slice(0,-1*b),r=r.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),s.push(_.$),r.push(_._$),x=o[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(i=this._input.match(this.rules[r[o]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=o,this.options.flex));o++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){function s(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e.yytext=e.yytext.substr(5,e.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(e.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return e.yytext=s(1,2).replace(/\\"/g,'"'),74;case 30:return e.yytext=s(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:return 76;case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:return 66;case 40:return 66;case 41:return"INVALID";case 42:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}},t}();return e.lexer=i,t.prototype=e,e.Parser=t,new t}();e["default"]=n,t.exports=e["default"]},function(t,e,i){"use strict";function n(){}function s(t,e,i){void 0===e&&(e=t.length);var n=t[e-1],s=t[e-2];return n?"ContentStatement"===n.type?(s||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function r(t,e,i){void 0===e&&(e=-1);var n=t[e+1],s=t[e+2];return n?"ContentStatement"===n.type?(s||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function o(t,e,i){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(i||!n.rightStripped)){var s=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==s}}function a(t,e,i){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(i||!n.leftStripped)){var s=n.value;return n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==s,n.leftStripped}}var l=i(8)["default"];e.__esModule=!0;var c=i(6),h=l(c);n.prototype=new h["default"],n.prototype.Program=function(t){var e=!this.isRootSeen;this.isRootSeen=!0;for(var i=t.body,n=0,l=i.length;n<l;n++){var c=i[n],h=this.accept(c);if(h){var u=s(i,n,e),d=r(i,n,e),p=h.openStandalone&&u,f=h.closeStandalone&&d,g=h.inlineStandalone&&u&&d;h.close&&o(i,n,!0),h.open&&a(i,n,!0),g&&(o(i,n),a(i,n)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(i[n-1].original)[1])),p&&(o((c.program||c.inverse).body),a(i,n)),f&&(o(i,n),a((c.inverse||c.program).body))}}return t},n.prototype.BlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,i=t.program&&t.inverse,n=i,l=i;if(i&&i.chained)for(n=i.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:r(e.body),closeStandalone:s((n||e).body)};if(t.openStrip.close&&o(e.body,null,!0),i){var h=t.inverseStrip;h.open&&a(e.body,null,!0),h.close&&o(n.body,null,!0),t.closeStrip.open&&a(l.body,null,!0),s(e.body)&&r(n.body)&&(a(e.body),o(n.body))}else t.closeStrip.open&&a(e.body,null,!0);return c},n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e["default"]=n,t.exports=e["default"]},function(t,e,i){"use strict";function n(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function s(t){return/^\[.*\]$/.test(t)?t.substr(1,t.length-2):t}function r(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}}function o(t){return t.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function a(t,e,i){i=this.locInfo(i);for(var n=t?"@":"",s=[],r=0,o="",a=0,l=e.length;a<l;a++){var c=e[a].part,h=e[a].original!==c;if(n+=(e[a].separator||"")+c,h||".."!==c&&"."!==c&&"this"!==c)s.push(c);else{if(s.length>0)throw new p["default"]("Invalid path: "+n,{loc:i});".."===c&&(r++,o+="../")}}return new this.PathExpression(t,r,s,n,i)}function l(t,e,i,n,s,r){var o=n.charAt(3)||n.charAt(2),a="{"!==o&&"&"!==o;return new this.MustacheStatement(t,e,i,a,s,this.locInfo(r))}function c(t,e,i,n){if(t.path.original!==i){var s={loc:t.path.loc};throw new p["default"](t.path.original+" doesn't match "+i,s)}n=this.locInfo(n);var r=new this.Program([e],null,{},n);return new this.BlockStatement(t.path,t.params,t.hash,r,(void 0),{},{},{},n);
}function h(t,e,i,n,s,r){if(n&&n.path&&t.path.original!==n.path.original){var o={loc:t.path.loc};throw new p["default"](t.path.original+" doesn't match "+n.path.original,o)}e.blockParams=t.blockParams;var a=void 0,l=void 0;return i&&(i.chain&&(i.program.body[0].closeStrip=n.strip),l=i.strip,a=i.program),s&&(s=a,a=e,e=s),new this.BlockStatement(t.path,t.params,t.hash,e,a,t.strip,l,n&&n.strip,this.locInfo(r))}var u=i(8)["default"];e.__esModule=!0,e.SourceLocation=n,e.id=s,e.stripFlags=r,e.stripComment=o,e.preparePath=a,e.prepareMustache=l,e.prepareRawBlock=c,e.prepareBlock=h;var d=i(12),p=u(d)},function(t,e,i){"use strict";function n(t,e,i){if(r.isArray(t)){for(var n=[],s=0,o=t.length;s<o;s++)n.push(e.wrap(t[s],i));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function s(t){this.srcFile=t,this.source=[]}e.__esModule=!0;var r=i(13),o=void 0;try{}catch(a){}o||(o=function(t,e,i,n){this.src="",n&&this.add(n)},o.prototype={add:function(t){r.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){r.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),s.prototype={prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(t){for(var e=0,i=this.source.length;e<i;e++)t(this.source[e])},empty:function(){var t=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new o(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof o?t:(t=n(t,this,e),new o(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,i){return i=this.generateList(i),this.wrap([t,e?"."+e+"(":"(",i,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i)){var s=n(t[i],this);"undefined"!==s&&e.push([this.quotedString(i),":",s])}var r=this.generateList(e);return r.prepend("{"),r.add("}"),r},generateList:function(t,e){for(var i=this.empty(e),s=0,r=t.length;s<r;s++)s&&i.add(","),i.add(n(t[s],this,e));return i},generateArray:function(t,e){var i=this.generateList(t,e);return i.prepend("["),i.add("]"),i}},e["default"]=s,t.exports=e["default"]}])}),function(){var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],e=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,n="undefined"!=typeof location&&location.href,s=n&&location.protocol&&location.protocol.replace(/\:/,""),r=n&&location.hostname,o=n&&(location.port||void 0),a=[];define("txt",[],function(){var l,c,h;return"undefined"!=typeof window&&window.navigator&&window.document?c=function(t,e){var i=l.createXhr();i.open("GET",t,!0),i.onreadystatechange=function(){4===i.readyState&&e(i.responseText)},i.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(h=require.nodeRequire("fs"),c=function(t,e){e(h.readFileSync(t,"utf8"))}):"undefined"!=typeof Packages&&(c=function(t,e){var i,n,s=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),"utf-8")),o="";try{for(i=new java.lang.StringBuffer,(n=s.readLine())&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),i.append(n);null!==(n=s.readLine());)i.append(r),i.append(n);o=String(i.toString())}finally{s.close()}e(o)}),l={version:"0.27.0",strip:function(t){if(t){var t=t.replace(e,""),n=t.match(i);n&&(t=n[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var e,i,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(i=0;i<3;i++){n=t[i];try{e=new ActiveXObject(n)}catch(s){}if(e){t=[n];break}}if(!e)throw Error("createXhr(): XMLHttpRequest not available");return e},get:c,parseName:function(t){var e=!1,i=t.indexOf("."),n=t.substring(0,i),t=t.substring(i+1,t.length),i=t.indexOf("!");return i!==-1&&(e=t.substring(i+1,t.length),e="strip"===e,t=t.substring(0,i)),{moduleName:n,ext:t,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,i,n){var s,r=l.xdRegExp.exec(t);return!r||(t=r[2],r=r[3],r=r.split(":"),s=r[1],r=r[0],!(t&&t!==e||r&&r!==i||(s||r)&&s!==n))},finishLoad:function(t,e,i,n,s){i=e?l.strip(i):i,s.isBuild&&s.inlineText&&(a[t]=i),n(i)},load:function(t,e,i,a){var c=l.parseName(t),h=c.moduleName+"."+c.ext,u=e.toUrl(h),d=a&&a.text&&a.text.useXhr||l.useXhr;!n||d(u,s,r,o)?l.get(u,function(e){l.finishLoad(t,c.strip,e,i,a)}):e([h],function(t){l.finishLoad(c.moduleName+"."+c.ext,c.strip,t,i,a)})},write:function(t,e,i){if(e in a){var n=l.jsEscape(a[e]);i.asModule(t+"!"+e,"define(function () { return '"+n+"';});\n")}},writeFile:function(t,e,i,n,s){var e=l.parseName(e),r=e.moduleName+"."+e.ext,o=i.toUrl(e.moduleName+"."+e.ext)+".js";l.load(r,i,function(){var e=function(t){return n(o,t)};e.asModule=function(t,e){return n.asModule(t,o,e)},l.write(t,r,e,s)},s)}}})}(),define("txt!config/config.json",[],function(){return'{\n    "BUILD_VERSION" : "99",\n\n    "REMOTE_URL" : "https://ice-bbros.dpn.inmar.com/v2",\n\n    "REQUEST_TIMEOUT" : 10000,\n\n    "MIN_PASSWORD_LENGTH" : 6,\n\n    "PAGE_SIZE" : 24,\n\n    "SCROLL_PAGINATION" : true,\n\n    "IS_LOYALTY_TYPE_PHONE" : false,\n\n    "LOYALTY_ID_PATTERN" : "^[\\\\d]{11}$",\n\n    "ALT_ID_PATTERN" : "^[0-9]{10}$",\n\n    "ENABLE_RELEVANT" : true,\n\n    "DEFAULT_SORT" : "relevant",\n\n    "DEFAULT_WALLET_SORT" : "category",\n\n    "SSO_ENABLE" : true,\n\n    "SSO_Paths" : {\n      "SSO_LOGIN" : "https://brookshirebrothers.force.com/Login?source=coupon",\n      "SSO_REGISTER" : "https://brookshirebrothers.force.com/Register?source=coupon",\n      "SSO_LOGOUT" : ""\n    },\n\n    "ERECEIPT_ENABLE" : false,\n\n    "TARGETED_OFFERS" : true,\n\n    "ENABLE_FEATURES" : false,\n\n    "FEATURED_REMOTE_URL" : "",\n\n    "FEATURED_CAROUSEL_ENABLED" : false\n}\n'}),define("txt!config/errors.json",[],function(){return'{\n    "errors": [\n\n        {\n            "fields": null,\n            "message": "Sorry, this offer is no longer available please check the site for additional savings",\n            "path": "/offers/clip",\n            "status": 410\n        },\n\n        {\n            "fields": null,\n            "message": "Invalid <%= label %>",\n            "path": "register",\n            "status": 400\n        },\n\n        {\n            "fields": null,\n            "message": "An account with this <%= label %> already exists",\n            "path": "register",\n            "status": 409\n        },\n\n        {\n            "fields": null,\n            "message": "An error occurred",\n            "path": "register",\n            "status": 500\n        },\n\n        {\n            "fields": null,\n            "message": "Invalid <%= label %>",\n            "path": "login",\n            "status": 400\n        },\n\n        {\n            "fields": null,\n            "message": "Invalid username / password",\n            "path": "login",\n            "status": 401\n        },\n\n        {\n            "fields": null,\n            "message": "An account with this <%= label %> already exists",\n            "path": "login",\n            "status": 409\n        },\n\n        {\n            "fields": null,\n            "message": "An error occurred",\n            "path": "login",\n            "status": 500\n        },\n\n        {\n            "fields": null,\n            "message": "Invalid <%= label %>",\n            "path": "/user",\n            "status": 400\n        },\n\n        {\n            "fields": null,\n            "message": "An account with this <%= label %> already exists",\n            "path": "/user",\n            "status": 409\n        },\n\n        {\n            "fields": "phone",\n            "message": "Account with this phone already exists",\n            "path": "/user",\n            "status": 409\n        },\n\n        {\n            "fields": null,\n            "message": "An error occurred",\n            "path": "/user",\n            "status": 500\n        },\n\n        {\n            "fields": null,\n            "message": "Oh no! Looks like we couldn\'t find what you were looking for.",\n            "path": null,\n            "status": 404\n        },\n\n        {\n            "fields": null,\n            "message": "Oh no! Looks like you got the shopping cart with bad wheels...",\n            "path": null,\n            "status": 500\n        },\n\n        {\n            "fields": null,\n            "message" : "Oh no! Looks like you got the shopping cart with one bad wheel... if the problem persists please contact us at <a href=\\"mailto:celebrate@brookshirebros.com\\">celebrate@brookshirebros.com</a>",\n            "path": null,\n            "status": null\n        }\n    ]\n}\n'}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,s,r,o,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;i<r;i+=1)o[i]=str(i,l)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;i<r;i+=1)"string"==typeof rep[i]&&(n=rep[i],s=str(n,l),s&&o.push(quote(n)+(gap?": ":":")+s));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(s=str(n,l),s&&o.push(quote(n)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var i,n,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n=walk(s,i),void 0!==n?s[i]=n:delete s[i]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(){}),!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("moment",e):t.moment=e()}(this,function(){"use strict";function t(){return on.apply(null,arguments)}function e(t){on=t}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function s(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,e){for(var i in e)r(e,i)&&(t[i]=e[i]);return r(e,"toString")&&(t.toString=e.toString),r(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,i,n){return Rt(t,e,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function c(t){return null==t._pf&&(t._pf=l()),t._pf}function h(t){if(null==t._isValid){var e=c(t),i=an.call(e.parsedDateParts,function(t){return null!=t});t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function u(t){var e=a(NaN);return null!=t?o(c(e),t):c(e).userInvalidated=!0,e}function d(t){return void 0===t}function p(t,e){var i,n,s;if(d(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),d(e._i)||(t._i=e._i),d(e._f)||(t._f=e._f),d(e._l)||(t._l=e._l),d(e._strict)||(t._strict=e._strict),d(e._tzm)||(t._tzm=e._tzm),d(e._isUTC)||(t._isUTC=e._isUTC),d(e._offset)||(t._offset=e._offset),d(e._pf)||(t._pf=c(e)),d(e._locale)||(t._locale=e._locale),ln.length>0)for(i in ln)n=ln[i],s=e[n],d(s)||(t[n]=s);return t}function f(e){p(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),cn===!1&&(cn=!0,t.updateOffset(this),cn=!1)}function g(t){return t instanceof f||null!=t&&null!=t._isAMomentObject}function m(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=m(e)),i}function y(t,e,i){var n,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&v(t[n])!==v(e[n]))&&o++;return o+r}function b(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function x(e,i){var n=!0;return o(function(){return null!=t.deprecationHandler&&t.deprecationHandler(null,e),n&&(b(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),i.apply(this,arguments)},i)}function w(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),hn[e]||(b(i),hn[e]=!0)}function _(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function k(t){return"[object Object]"===Object.prototype.toString.call(t)}function C(t){var e,i;for(i in t)e=t[i],_(e)?this[i]=e:this["_"+i]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function S(t,e){var i,n=o({},t);for(i in e)r(e,i)&&(k(t[i])&&k(e[i])?(n[i]={},o(n[i],t[i]),o(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);return n}function T(t){null!=t&&this.set(t)}function E(t){return t?t.toLowerCase().replace("_","-"):t}function M(t){for(var e,i,n,s,r=0;r<t.length;){for(s=E(t[r]).split("-"),e=s.length,i=E(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=A(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&y(s,i,!0)>=e-1)break;e--}r++}return null}function A(t){var e=null;if(!fn[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=dn._abbr,require("./locale/"+t),P(e)}catch(i){}return fn[t]}function P(t,e){var i;return t&&(i=d(e)?L(t):O(t,e),i&&(dn=i)),dn._abbr}function O(t,e){return null!==e?(e.abbr=t,null!=fn[t]?(w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),e=S(fn[t]._config,e)):null!=e.parentLocale&&(null!=fn[e.parentLocale]?e=S(fn[e.parentLocale]._config,e):w("parentLocaleUndefined","specified parentLocale is not defined yet")),fn[t]=new T(e),P(t),fn[t]):(delete fn[t],null)}function D(t,e){if(null!=e){var i;null!=fn[t]&&(e=S(fn[t]._config,e)),i=new T(e),i.parentLocale=fn[t],fn[t]=i,P(t)}else null!=fn[t]&&(null!=fn[t].parentLocale?fn[t]=fn[t].parentLocale:null!=fn[t]&&delete fn[t]);return fn[t]}function L(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return dn;if(!i(t)){if(e=A(t))return e;t=[t]}return M(t)}function I(){return un(fn)}function R(t,e){var i=t.toLowerCase();gn[i]=gn[i+"s"]=gn[e]=t}function N(t){return"string"==typeof t?gn[t]||gn[t.toLowerCase()]:void 0}function B(t){var e,i,n={};for(i in t)r(t,i)&&(e=N(i),e&&(n[e]=t[i]));return n}function H(e,i){return function(n){return null!=n?(V(this,e,n),t.updateOffset(this,i),this):j(this,e)}}function j(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function V(t,e,i){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](i)}function F(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else if(t=N(t),_(this[t]))return this[t](e);return this}function $(t,e,i){var n=""+Math.abs(t),s=e-n.length,r=t>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function z(t,e,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),t&&(bn[t]=s),e&&(bn[e[0]]=function(){return $(s.apply(this,arguments),e[1],e[2])}),i&&(bn[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function Y(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function W(t){var e,i,n=t.match(mn);for(e=0,i=n.length;i>e;e++)bn[n[e]]?n[e]=bn[n[e]]:n[e]=Y(n[e]);return function(e){var s,r="";for(s=0;i>s;s++)r+=n[s]instanceof Function?n[s].call(e,t):n[s];return r}}function G(t,e){return t.isValid()?(e=U(e,t.localeData()),yn[e]=yn[e]||W(e),yn[e](t)):t.localeData().invalidDate()}function U(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(vn.lastIndex=0;n>=0&&vn.test(t);)t=t.replace(vn,i),vn.lastIndex=0,n-=1;return t}function q(t,e,i){Bn[t]=_(e)?e:function(t,n){return t&&i?i:e}}function X(t,e){return r(Bn,t)?Bn[t](e._strict,e._locale):new RegExp(J(t))}function J(t){return Z(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s}))}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(n=function(t,i){i[e]=v(t)}),i=0;i<t.length;i++)Hn[t[i]]=n}function Q(t,e){K(t,function(t,i,n,s){n._w=n._w||{},e(t,n._w,n,s)})}function tt(t,e,i){null!=e&&r(Hn,t)&&Hn[t](e,i._a,i,t)}function et(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function it(t,e){return i(this._months)?this._months[t.month()]:this._months[qn.test(e)?"format":"standalone"][t.month()]}function nt(t,e){return i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[qn.test(e)?"format":"standalone"][t.month()]}function st(t,e,i){var n,s,r,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)r=a([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?(s=pn.call(this._shortMonthsParse,o),-1!==s?s:null):(s=pn.call(this._longMonthsParse,o),-1!==s?s:null):"MMM"===e?(s=pn.call(this._shortMonthsParse,o),-1!==s?s:(s=pn.call(this._longMonthsParse,o),-1!==s?s:null)):(s=pn.call(this._longMonthsParse,o),-1!==s?s:(s=pn.call(this._shortMonthsParse,o),-1!==s?s:null))}function rt(t,e,i){var n,s,r;if(this._monthsParseExact)return st.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(s=a([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ot(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=v(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return i=Math.min(t.date(),et(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function at(e){return null!=e?(ot(this,e),t.updateOffset(this,!0),this):j(this,"Month")}function lt(){return et(this.year(),this.month())}function ct(t){return this._monthsParseExact?(r(this,"_monthsRegex")||ut.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}function ht(t){return this._monthsParseExact?(r(this,"_monthsRegex")||ut.call(this),t?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}function ut(){function t(t,e){return e.length-t.length}var e,i,n=[],s=[],r=[];for(e=0;12>e;e++)i=a([2e3,e]),n.push(this.monthsShort(i,"")),s.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(n.sort(t),s.sort(t),r.sort(t),e=0;12>e;e++)n[e]=Z(n[e]),s[e]=Z(s[e]),r[e]=Z(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function dt(t){var e,i=t._a;return i&&-2===c(t).overflow&&(e=i[Vn]<0||i[Vn]>11?Vn:i[Fn]<1||i[Fn]>et(i[jn],i[Vn])?Fn:i[$n]<0||i[$n]>24||24===i[$n]&&(0!==i[zn]||0!==i[Yn]||0!==i[Wn])?$n:i[zn]<0||i[zn]>59?zn:i[Yn]<0||i[Yn]>59?Yn:i[Wn]<0||i[Wn]>999?Wn:-1,c(t)._overflowDayOfYear&&(jn>e||e>Fn)&&(e=Fn),c(t)._overflowWeeks&&-1===e&&(e=Gn),c(t)._overflowWeekday&&-1===e&&(e=Un),c(t).overflow=e),t}function pt(t){var e,i,n,s,r,o,a=t._i,l=Qn.exec(a)||ts.exec(a);if(l){for(c(t).iso=!0,e=0,i=is.length;i>e;e++)if(is[e][1].exec(l[1])){s=is[e][0],n=is[e][2]!==!1;break}if(null==s)return void(t._isValid=!1);if(l[3]){for(e=0,i=ns.length;i>e;e++)if(ns[e][1].exec(l[3])){r=(l[2]||" ")+ns[e][0];break}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(l[4]){if(!es.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=s+(r||"")+(o||""),Mt(t)}else t._isValid=!1}function ft(e){var i=ss.exec(e._i);return null!==i?void(e._d=new Date((+i[1]))):(pt(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function gt(t,e,i,n,s,r,o){var a=new Date(t,e,i,n,s,r,o);return 100>t&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function mt(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function vt(t){return yt(t)?366:365}function yt(t){return t%4===0&&t%100!==0||t%400===0}function bt(){return yt(this.year())}function xt(t,e,i){var n=7+e-i,s=(7+mt(t,0,n).getUTCDay()-e)%7;return-s+n-1}function wt(t,e,i,n,s){var r,o,a=(7+i-n)%7,l=xt(t,n,s),c=1+7*(e-1)+a+l;return 0>=c?(r=t-1,o=vt(r)+c):c>vt(t)?(r=t+1,o=c-vt(t)):(r=t,o=c),{year:r,dayOfYear:o}}function _t(t,e,i){var n,s,r=xt(t.year(),e,i),o=Math.floor((t.dayOfYear()-r-1)/7)+1;return 1>o?(s=t.year()-1,n=o+kt(s,e,i)):o>kt(t.year(),e,i)?(n=o-kt(t.year(),e,i),s=t.year()+1):(s=t.year(),n=o),{week:n,year:s}}function kt(t,e,i){var n=xt(t,e,i),s=xt(t+1,e,i);return(vt(t)-n+s)/7}function Ct(t,e,i){return null!=t?t:null!=e?e:i}function St(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function Tt(t){var e,i,n,s,r=[];if(!t._d){for(n=St(t),t._w&&null==t._a[Fn]&&null==t._a[Vn]&&Et(t),t._dayOfYear&&(s=Ct(t._a[jn],n[jn]),t._dayOfYear>vt(s)&&(c(t)._overflowDayOfYear=!0),i=mt(s,0,t._dayOfYear),t._a[Vn]=i.getUTCMonth(),t._a[Fn]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=n[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[$n]&&0===t._a[zn]&&0===t._a[Yn]&&0===t._a[Wn]&&(t._nextDay=!0,t._a[$n]=0),t._d=(t._useUTC?mt:gt).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[$n]=24)}}function Et(t){var e,i,n,s,r,o,a,l;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,o=4,i=Ct(e.GG,t._a[jn],_t(Nt(),1,4).year),n=Ct(e.W,1),s=Ct(e.E,1),(1>s||s>7)&&(l=!0)):(r=t._locale._week.dow,o=t._locale._week.doy,i=Ct(e.gg,t._a[jn],_t(Nt(),r,o).year),n=Ct(e.w,1),null!=e.d?(s=e.d,(0>s||s>6)&&(l=!0)):null!=e.e?(s=e.e+r,(e.e<0||e.e>6)&&(l=!0)):s=r),1>n||n>kt(i,r,o)?c(t)._overflowWeeks=!0:null!=l?c(t)._overflowWeekday=!0:(a=wt(i,n,s,r,o),t._a[jn]=a.year,t._dayOfYear=a.dayOfYear)}function Mt(e){if(e._f===t.ISO_8601)return void pt(e);e._a=[],c(e).empty=!0;var i,n,s,r,o,a=""+e._i,l=a.length,h=0;for(s=U(e._f,e._locale).match(mn)||[],i=0;i<s.length;i++)r=s[i],n=(a.match(X(r,e))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&c(e).unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),h+=n.length),bn[r]?(n?c(e).empty=!1:c(e).unusedTokens.push(r),tt(r,n,e)):e._strict&&!n&&c(e).unusedTokens.push(r);c(e).charsLeftOver=l-h,a.length>0&&c(e).unusedInput.push(a),c(e).bigHour===!0&&e._a[$n]<=12&&e._a[$n]>0&&(c(e).bigHour=void 0),c(e).parsedDateParts=e._a.slice(0),c(e).meridiem=e._meridiem,e._a[$n]=At(e._locale,e._a[$n],e._meridiem),Tt(e),dt(e)}function At(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function Pt(t){var e,i,n,s,r;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)r=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],Mt(e),h(e)&&(r+=c(e).charsLeftOver,r+=10*c(e).unusedTokens.length,c(e).score=r,(null==n||n>r)&&(n=r,i=e));o(t,i||e)}function Ot(t){if(!t._d){var e=B(t._i);t._a=s([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),Tt(t)}}function Dt(t){var e=new f(dt(Lt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Lt(t){var e=t._i,s=t._f;return t._locale=t._locale||L(t._l),null===e||void 0===s&&""===e?u({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),g(e)?new f(dt(e)):(i(s)?Pt(t):s?Mt(t):n(e)?t._d=e:It(t),h(t)||(t._d=null),t))}function It(e){var r=e._i;void 0===r?e._d=new Date(t.now()):n(r)?e._d=new Date(r.valueOf()):"string"==typeof r?ft(e):i(r)?(e._a=s(r.slice(0),function(t){return parseInt(t,10)}),Tt(e)):"object"==typeof r?Ot(e):"number"==typeof r?e._d=new Date(r):t.createFromInputFallback(e)}function Rt(t,e,i,n,s){var r={};return"boolean"==typeof i&&(n=i,i=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=i,r._i=t,r._f=e,r._strict=n,Dt(r)}function Nt(t,e,i,n){return Rt(t,e,i,n,!1)}function Bt(t,e){var n,s;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Nt();for(n=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](n))&&(n=e[s]);return n}function Ht(){var t=[].slice.call(arguments,0);return Bt("isBefore",t)}function jt(){var t=[].slice.call(arguments,0);return Bt("isAfter",t)}function Vt(t){var e=B(t),i=e.year||0,n=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*c+6e4*l+1e3*a*60*60,this._days=+o+7*r,this._months=+s+3*n+12*i,this._data={},this._locale=L(),this._bubble()}function Ft(t){return t instanceof Vt}function $t(t,e){z(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+$(~~(t/60),2)+e+$(~~t%60,2)})}function zt(t,e){var i=(e||"").match(t)||[],n=i[i.length-1]||[],s=(n+"").match(cs)||["-",0,0],r=+(60*s[1])+v(s[2]);return"+"===s[0]?r:-r}function Yt(e,i){var s,r;return i._isUTC?(s=i.clone(),r=(g(e)||n(e)?e.valueOf():Nt(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),t.updateOffset(s,!1),s):Nt(e).local()}function Wt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Gt(e,i){var n,s=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=zt(In,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&i&&(n=Wt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==e&&(!i||this._changeInProgress?ce(this,ne(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?s:Wt(this):null!=e?this:NaN}function Ut(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function qt(t){return this.utcOffset(0,t)}function Xt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Wt(this),"m")),this}function Jt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(zt(Ln,this._i)),this}function Zt(t){return!!this.isValid()&&(t=t?Nt(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function Kt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Qt(){if(!d(this._isDSTShifted))return this._isDSTShifted;var t={};if(p(t,this),t=Lt(t),t._a){var e=t._isUTC?a(t._a):Nt(t._a);this._isDSTShifted=this.isValid()&&y(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function te(){return!!this.isValid()&&!this._isUTC}function ee(){return!!this.isValid()&&this._isUTC}function ie(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function ne(t,e){var i,n,s,o=t,a=null;return Ft(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(a=hs.exec(t))?(i="-"===a[1]?-1:1,o={y:0,d:v(a[Fn])*i,h:v(a[$n])*i,m:v(a[zn])*i,s:v(a[Yn])*i,ms:v(a[Wn])*i}):(a=us.exec(t))?(i="-"===a[1]?-1:1,o={y:se(a[2],i),M:se(a[3],i),w:se(a[4],i),d:se(a[5],i),h:se(a[6],i),m:se(a[7],i),s:se(a[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(s=oe(Nt(o.from),Nt(o.to)),o={},o.ms=s.milliseconds,o.M=s.months),n=new Vt(o),Ft(t)&&r(t,"_locale")&&(n._locale=t._locale),n}function se(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function re(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function oe(t,e){var i;return t.isValid()&&e.isValid()?(e=Yt(e,t),t.isBefore(e)?i=re(t,e):(i=re(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ae(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function le(t,e){return function(i,n){var s,r;return null===n||isNaN(+n)||(w(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=i,i=n,n=r),i="string"==typeof i?+i:i,s=ne(i,n),ce(this,s,t),this}}function ce(e,i,n,s){var r=i._milliseconds,o=ae(i._days),a=ae(i._months);e.isValid()&&(s=null==s||s,r&&e._d.setTime(e._d.valueOf()+r*n),o&&V(e,"Date",j(e,"Date")+o*n),a&&ot(e,j(e,"Month")+a*n),s&&t.updateOffset(e,o||a))}function he(t,e){var i=t||Nt(),n=Yt(i,this).startOf("day"),s=this.diff(n,"days",!0),r=-6>s?"sameElse":-1>s?"lastWeek":0>s?"lastDay":1>s?"sameDay":2>s?"nextDay":7>s?"nextWeek":"sameElse",o=e&&(_(e[r])?e[r]():e[r]);return this.format(o||this.localeData().calendar(r,this,Nt(i)))}function ue(){return new f(this)}function de(t,e){var i=g(t)?t:Nt(t);return!(!this.isValid()||!i.isValid())&&(e=N(d(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf());
}function pe(t,e){var i=g(t)?t:Nt(t);return!(!this.isValid()||!i.isValid())&&(e=N(d(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function fe(t,e,i,n){return n=n||"()",("("===n[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function ge(t,e){var i,n=g(t)?t:Nt(t);return!(!this.isValid()||!n.isValid())&&(e=N(e||"millisecond"),"millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function me(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function ve(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ye(t,e,i){var n,s,r,o;return this.isValid()?(n=Yt(t,this),n.isValid()?(s=6e4*(n.utcOffset()-this.utcOffset()),e=N(e),"year"===e||"month"===e||"quarter"===e?(o=be(this,n),"quarter"===e?o/=3:"year"===e&&(o/=12)):(r=this-n,o="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-s)/864e5:"week"===e?(r-s)/6048e5:r),i?o:m(o)):NaN):NaN}function be(t,e){var i,n,s=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(s,"months");return 0>e-r?(i=t.clone().add(s-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(s+1,"months"),n=(e-r)/(i-r)),-(s+n)||0}function xe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function we(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?_(Date.prototype.toISOString)?this.toDate().toISOString():G(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):G(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function _e(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=G(this,e);return this.localeData().postformat(i)}function ke(t,e){return this.isValid()&&(g(t)&&t.isValid()||Nt(t).isValid())?ne({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Ce(t){return this.from(Nt(),t)}function Se(t,e){return this.isValid()&&(g(t)&&t.isValid()||Nt(t).isValid())?ne({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Te(t){return this.to(Nt(),t)}function Ee(t){var e;return void 0===t?this._locale._abbr:(e=L(t),null!=e&&(this._locale=e),this)}function Me(){return this._locale}function Ae(t){switch(t=N(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function Pe(t){return t=N(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Oe(){return this._d.valueOf()-6e4*(this._offset||0)}function De(){return Math.floor(this.valueOf()/1e3)}function Le(){return this._offset?new Date(this.valueOf()):this._d}function Ie(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Re(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ne(){return this.isValid()?this.toISOString():null}function Be(){return h(this)}function He(){return o({},c(this))}function je(){return c(this).overflow}function Ve(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Fe(t,e){z(0,[t,t.length],0,e)}function $e(t){return Ge.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ze(t){return Ge.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Ye(){return kt(this.year(),1,4)}function We(){var t=this.localeData()._week;return kt(this.year(),t.dow,t.doy)}function Ge(t,e,i,n,s){var r;return null==t?_t(this,n,s).year:(r=kt(t,n,s),e>r&&(e=r),Ue.call(this,t,e,i,n,s))}function Ue(t,e,i,n,s){var r=wt(t,e,i,n,s),o=mt(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function qe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Xe(t){return _t(t,this._week.dow,this._week.doy).week}function Je(){return this._week.dow}function Ze(){return this._week.doy}function Ke(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Qe(t){var e=_t(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function ti(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function ei(t,e){return i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}function ii(t){return this._weekdaysShort[t.day()]}function ni(t){return this._weekdaysMin[t.day()]}function si(t,e,i){var n,s,r,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)r=a([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?(s=pn.call(this._weekdaysParse,o),-1!==s?s:null):"ddd"===e?(s=pn.call(this._shortWeekdaysParse,o),-1!==s?s:null):(s=pn.call(this._minWeekdaysParse,o),-1!==s?s:null):"dddd"===e?(s=pn.call(this._weekdaysParse,o),-1!==s?s:(s=pn.call(this._shortWeekdaysParse,o),-1!==s?s:(s=pn.call(this._minWeekdaysParse,o),-1!==s?s:null))):"ddd"===e?(s=pn.call(this._shortWeekdaysParse,o),-1!==s?s:(s=pn.call(this._weekdaysParse,o),-1!==s?s:(s=pn.call(this._minWeekdaysParse,o),-1!==s?s:null))):(s=pn.call(this._minWeekdaysParse,o),-1!==s?s:(s=pn.call(this._weekdaysParse,o),-1!==s?s:(s=pn.call(this._shortWeekdaysParse,o),-1!==s?s:null)))}function ri(t,e,i){var n,s,r;if(this._weekdaysParseExact)return si.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(s=a([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function oi(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ti(t,this.localeData()),this.add(t-e,"d")):e}function ai(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function li(t){return this.isValid()?null==t?this.day()||7:this.day(this.day()%7?t:t-7):null!=t?this:NaN}function ci(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||di.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex}function hi(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||di.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function ui(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||di.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function di(){function t(t,e){return e.length-t.length}var e,i,n,s,r,o=[],l=[],c=[],h=[];for(e=0;7>e;e++)i=a([2e3,1]).day(e),n=this.weekdaysMin(i,""),s=this.weekdaysShort(i,""),r=this.weekdays(i,""),o.push(n),l.push(s),c.push(r),h.push(n),h.push(s),h.push(r);for(o.sort(t),l.sort(t),c.sort(t),h.sort(t),e=0;7>e;e++)l[e]=Z(l[e]),c[e]=Z(c[e]),h[e]=Z(h[e]);this._weekdaysRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function pi(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function fi(){return this.hours()%12||12}function gi(){return this.hours()||24}function mi(t,e){z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function vi(t,e){return e._meridiemParse}function yi(t){return"p"===(t+"").toLowerCase().charAt(0)}function bi(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function xi(t,e){e[Wn]=v(1e3*("0."+t))}function wi(){return this._isUTC?"UTC":""}function _i(){return this._isUTC?"Coordinated Universal Time":""}function ki(t){return Nt(1e3*t)}function Ci(){return Nt.apply(null,arguments).parseZone()}function Si(t,e,i){var n=this._calendar[t];return _(n)?n.call(e,i):n}function Ti(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function Ei(){return this._invalidDate}function Mi(t){return this._ordinal.replace("%d",t)}function Ai(t){return t}function Pi(t,e,i,n){var s=this._relativeTime[i];return _(s)?s(t,e,i,n):s.replace(/%d/i,t)}function Oi(t,e){var i=this._relativeTime[t>0?"future":"past"];return _(i)?i(e):i.replace(/%s/i,e)}function Di(t,e,i,n){var s=L(),r=a().set(n,e);return s[i](r,t)}function Li(t,e,i){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Di(t,e,i,"month");var n,s=[];for(n=0;12>n;n++)s[n]=Di(t,n,i,"month");return s}function Ii(t,e,i,n){"boolean"==typeof t?("number"==typeof e&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,"number"==typeof e&&(i=e,e=void 0),e=e||"");var s=L(),r=t?s._week.dow:0;if(null!=i)return Di(e,(i+r)%7,n,"day");var o,a=[];for(o=0;7>o;o++)a[o]=Di(e,(o+r)%7,n,"day");return a}function Ri(t,e){return Li(t,e,"months")}function Ni(t,e){return Li(t,e,"monthsShort")}function Bi(t,e,i){return Ii(t,e,i,"weekdays")}function Hi(t,e,i){return Ii(t,e,i,"weekdaysShort")}function ji(t,e,i){return Ii(t,e,i,"weekdaysMin")}function Vi(){var t=this._data;return this._milliseconds=Hs(this._milliseconds),this._days=Hs(this._days),this._months=Hs(this._months),t.milliseconds=Hs(t.milliseconds),t.seconds=Hs(t.seconds),t.minutes=Hs(t.minutes),t.hours=Hs(t.hours),t.months=Hs(t.months),t.years=Hs(t.years),this}function Fi(t,e,i,n){var s=ne(e,i);return t._milliseconds+=n*s._milliseconds,t._days+=n*s._days,t._months+=n*s._months,t._bubble()}function $i(t,e){return Fi(this,t,e,1)}function zi(t,e){return Fi(this,t,e,-1)}function Yi(t){return 0>t?Math.floor(t):Math.ceil(t)}function Wi(){var t,e,i,n,s,r=this._milliseconds,o=this._days,a=this._months,l=this._data;return r>=0&&o>=0&&a>=0||0>=r&&0>=o&&0>=a||(r+=864e5*Yi(Ui(a)+o),o=0,a=0),l.milliseconds=r%1e3,t=m(r/1e3),l.seconds=t%60,e=m(t/60),l.minutes=e%60,i=m(e/60),l.hours=i%24,o+=m(i/24),s=m(Gi(o)),a+=s,o-=Yi(Ui(s)),n=m(a/12),a%=12,l.days=o,l.months=a,l.years=n,this}function Gi(t){return 4800*t/146097}function Ui(t){return 146097*t/4800}function qi(t){var e,i,n=this._milliseconds;if(t=N(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+Gi(e),"month"===t?i:i/12;switch(e=this._days+Math.round(Ui(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function Xi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Ji(t){return function(){return this.as(t)}}function Zi(t){return t=N(t),this[t+"s"]()}function Ki(t){return function(){return this._data[t]}}function Qi(){return m(this.days()/7)}function tn(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function en(t,e,i){var n=ne(t).abs(),s=tr(n.as("s")),r=tr(n.as("m")),o=tr(n.as("h")),a=tr(n.as("d")),l=tr(n.as("M")),c=tr(n.as("y")),h=s<er.s&&["s",s]||1>=r&&["m"]||r<er.m&&["mm",r]||1>=o&&["h"]||o<er.h&&["hh",o]||1>=a&&["d"]||a<er.d&&["dd",a]||1>=l&&["M"]||l<er.M&&["MM",l]||1>=c&&["y"]||["yy",c];return h[2]=e,h[3]=+t>0,h[4]=i,tn.apply(null,h)}function nn(t,e){return void 0!==er[t]&&(void 0===e?er[t]:(er[t]=e,!0))}function sn(t){var e=this.localeData(),i=en(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function rn(){var t,e,i,n=ir(this._milliseconds)/1e3,s=ir(this._days),r=ir(this._months);t=m(n/60),e=m(t/60),n%=60,t%=60,i=m(r/12),r%=12;var o=i,a=r,l=s,c=e,h=t,u=n,d=this.asSeconds();return d?(0>d?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||h||u?"T":"")+(c?c+"H":"")+(h?h+"M":"")+(u?u+"S":""):"P0D"}var on,an;an=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;i>n;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var ln=t.momentProperties=[],cn=!1,hn={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var un;un=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)r(t,e)&&i.push(e);return i};var dn,pn,fn={},gn={},mn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,vn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,yn={},bn={},xn=/\d/,wn=/\d\d/,_n=/\d{3}/,kn=/\d{4}/,Cn=/[+-]?\d{6}/,Sn=/\d\d?/,Tn=/\d\d\d\d?/,En=/\d\d\d\d\d\d?/,Mn=/\d{1,3}/,An=/\d{1,4}/,Pn=/[+-]?\d{1,6}/,On=/\d+/,Dn=/[+-]?\d+/,Ln=/Z|[+-]\d\d:?\d\d/gi,In=/Z|[+-]\d\d(?::?\d\d)?/gi,Rn=/[+-]?\d+(\.\d{1,3})?/,Nn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Bn={},Hn={},jn=0,Vn=1,Fn=2,$n=3,zn=4,Yn=5,Wn=6,Gn=7,Un=8;pn=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),z("MMMM",0,0,function(t){return this.localeData().months(this,t)}),R("month","M"),q("M",Sn),q("MM",Sn,wn),q("MMM",function(t,e){return e.monthsShortRegex(t)}),q("MMMM",function(t,e){return e.monthsRegex(t)}),K(["M","MM"],function(t,e){e[Vn]=v(t)-1}),K(["MMM","MMMM"],function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);null!=s?e[Vn]=s:c(i).invalidMonth=t});var qn=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Xn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Jn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Zn=Nn,Kn=Nn,Qn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ts=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,es=/Z|[+-]\d\d(?::?\d\d)?/,is=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ns=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ss=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=x("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),z("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),R("year","y"),q("Y",Dn),q("YY",Sn,wn),q("YYYY",An,kn),q("YYYYY",Pn,Cn),q("YYYYYY",Pn,Cn),K(["YYYYY","YYYYYY"],jn),K("YYYY",function(e,i){i[jn]=2===e.length?t.parseTwoDigitYear(e):v(e)}),K("YY",function(e,i){i[jn]=t.parseTwoDigitYear(e)}),K("Y",function(t,e){e[jn]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)};var rs=H("FullYear",!0);t.ISO_8601=function(){};var os=x("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Nt.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:u()}),as=x("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Nt.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:u()}),ls=function(){return Date.now?Date.now():+new Date};$t("Z",":"),$t("ZZ",""),q("Z",In),q("ZZ",In),K(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=zt(In,t)});var cs=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var hs=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,us=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;ne.fn=Vt.prototype;var ds=le(1,"add"),ps=le(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var fs=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Fe("gggg","weekYear"),Fe("ggggg","weekYear"),Fe("GGGG","isoWeekYear"),Fe("GGGGG","isoWeekYear"),R("weekYear","gg"),R("isoWeekYear","GG"),q("G",Dn),q("g",Dn),q("GG",Sn,wn),q("gg",Sn,wn),q("GGGG",An,kn),q("gggg",An,kn),q("GGGGG",Pn,Cn),q("ggggg",Pn,Cn),Q(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=v(t)}),Q(["gg","GG"],function(e,i,n,s){i[s]=t.parseTwoDigitYear(e)}),z("Q",0,"Qo","quarter"),R("quarter","Q"),q("Q",xn),K("Q",function(t,e){e[Vn]=3*(v(t)-1)}),z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),R("week","w"),R("isoWeek","W"),q("w",Sn),q("ww",Sn,wn),q("W",Sn),q("WW",Sn,wn),Q(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=v(t)});var gs={dow:0,doy:6};z("D",["DD",2],"Do","date"),R("date","D"),q("D",Sn),q("DD",Sn,wn),q("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),K(["D","DD"],Fn),K("Do",function(t,e){e[Fn]=v(t.match(Sn)[0],10)});var ms=H("Date",!0);z("d",0,"do","day"),z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),R("day","d"),R("weekday","e"),R("isoWeekday","E"),q("d",Sn),q("e",Sn),q("E",Sn),q("dd",function(t,e){return e.weekdaysMinRegex(t)}),q("ddd",function(t,e){return e.weekdaysShortRegex(t)}),q("dddd",function(t,e){return e.weekdaysRegex(t)}),Q(["dd","ddd","dddd"],function(t,e,i,n){var s=i._locale.weekdaysParse(t,n,i._strict);null!=s?e.d=s:c(i).invalidWeekday=t}),Q(["d","e","E"],function(t,e,i,n){e[n]=v(t)});var vs="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ys="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),bs="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),xs=Nn,ws=Nn,_s=Nn;z("DDD",["DDDD",3],"DDDo","dayOfYear"),R("dayOfYear","DDD"),q("DDD",Mn),q("DDDD",_n),K(["DDD","DDDD"],function(t,e,i){i._dayOfYear=v(t)}),z("H",["HH",2],0,"hour"),z("h",["hh",2],0,fi),z("k",["kk",2],0,gi),z("hmm",0,0,function(){return""+fi.apply(this)+$(this.minutes(),2)}),z("hmmss",0,0,function(){return""+fi.apply(this)+$(this.minutes(),2)+$(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+$(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+$(this.minutes(),2)+$(this.seconds(),2)}),mi("a",!0),mi("A",!1),R("hour","h"),q("a",vi),q("A",vi),q("H",Sn),q("h",Sn),q("HH",Sn,wn),q("hh",Sn,wn),q("hmm",Tn),q("hmmss",En),q("Hmm",Tn),q("Hmmss",En),K(["H","HH"],$n),K(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),K(["h","hh"],function(t,e,i){e[$n]=v(t),c(i).bigHour=!0}),K("hmm",function(t,e,i){var n=t.length-2;e[$n]=v(t.substr(0,n)),e[zn]=v(t.substr(n)),c(i).bigHour=!0}),K("hmmss",function(t,e,i){var n=t.length-4,s=t.length-2;e[$n]=v(t.substr(0,n)),e[zn]=v(t.substr(n,2)),e[Yn]=v(t.substr(s)),c(i).bigHour=!0}),K("Hmm",function(t,e,i){var n=t.length-2;e[$n]=v(t.substr(0,n)),e[zn]=v(t.substr(n))}),K("Hmmss",function(t,e,i){var n=t.length-4,s=t.length-2;e[$n]=v(t.substr(0,n)),e[zn]=v(t.substr(n,2)),e[Yn]=v(t.substr(s))});var ks=/[ap]\.?m?\.?/i,Cs=H("Hours",!0);z("m",["mm",2],0,"minute"),R("minute","m"),q("m",Sn),q("mm",Sn,wn),K(["m","mm"],zn);var Ss=H("Minutes",!1);z("s",["ss",2],0,"second"),R("second","s"),q("s",Sn),q("ss",Sn,wn),K(["s","ss"],Yn);var Ts=H("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),R("millisecond","ms"),q("S",Mn,xn),q("SS",Mn,wn),q("SSS",Mn,_n);var Es;for(Es="SSSS";Es.length<=9;Es+="S")q(Es,On);for(Es="S";Es.length<=9;Es+="S")K(Es,xi);var Ms=H("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var As=f.prototype;As.add=ds,As.calendar=he,As.clone=ue,As.diff=ye,As.endOf=Pe,As.format=_e,As.from=ke,As.fromNow=Ce,As.to=Se,As.toNow=Te,As.get=F,As.invalidAt=je,As.isAfter=de,As.isBefore=pe,As.isBetween=fe,As.isSame=ge,As.isSameOrAfter=me,As.isSameOrBefore=ve,As.isValid=Be,As.lang=fs,As.locale=Ee,As.localeData=Me,As.max=as,As.min=os,As.parsingFlags=He,As.set=F,As.startOf=Ae,As.subtract=ps,As.toArray=Ie,As.toObject=Re,As.toDate=Le,As.toISOString=we,As.toJSON=Ne,As.toString=xe,As.unix=De,As.valueOf=Oe,As.creationData=Ve,As.year=rs,As.isLeapYear=bt,As.weekYear=$e,As.isoWeekYear=ze,As.quarter=As.quarters=qe,As.month=at,As.daysInMonth=lt,As.week=As.weeks=Ke,As.isoWeek=As.isoWeeks=Qe,As.weeksInYear=We,As.isoWeeksInYear=Ye,As.date=ms,As.day=As.days=oi,As.weekday=ai,As.isoWeekday=li,As.dayOfYear=pi,As.hour=As.hours=Cs,As.minute=As.minutes=Ss,As.second=As.seconds=Ts,As.millisecond=As.milliseconds=Ms,As.utcOffset=Gt,As.utc=qt,As.local=Xt,As.parseZone=Jt,As.hasAlignedHourOffset=Zt,As.isDST=Kt,As.isDSTShifted=Qt,As.isLocal=te,As.isUtcOffset=ee,As.isUtc=ie,As.isUTC=ie,As.zoneAbbr=wi,As.zoneName=_i,As.dates=x("dates accessor is deprecated. Use date instead.",ms),As.months=x("months accessor is deprecated. Use month instead",at),As.years=x("years accessor is deprecated. Use year instead",rs),As.zone=x("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ut);var Ps=As,Os={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ds={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ls="Invalid date",Is="%d",Rs=/\d{1,2}/,Ns={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Bs=T.prototype;Bs._calendar=Os,Bs.calendar=Si,Bs._longDateFormat=Ds,Bs.longDateFormat=Ti,Bs._invalidDate=Ls,Bs.invalidDate=Ei,Bs._ordinal=Is,Bs.ordinal=Mi,Bs._ordinalParse=Rs,Bs.preparse=Ai,Bs.postformat=Ai,Bs._relativeTime=Ns,Bs.relativeTime=Pi,Bs.pastFuture=Oi,Bs.set=C,Bs.months=it,Bs._months=Xn,Bs.monthsShort=nt,Bs._monthsShort=Jn,Bs.monthsParse=rt,Bs._monthsRegex=Kn,Bs.monthsRegex=ht,Bs._monthsShortRegex=Zn,Bs.monthsShortRegex=ct,Bs.week=Xe,Bs._week=gs,Bs.firstDayOfYear=Ze,Bs.firstDayOfWeek=Je,Bs.weekdays=ei,Bs._weekdays=vs,Bs.weekdaysMin=ni,Bs._weekdaysMin=bs,Bs.weekdaysShort=ii,Bs._weekdaysShort=ys,Bs.weekdaysParse=ri,Bs._weekdaysRegex=xs,Bs.weekdaysRegex=ci,Bs._weekdaysShortRegex=ws,Bs.weekdaysShortRegex=hi,Bs._weekdaysMinRegex=_s,Bs.weekdaysMinRegex=ui,Bs.isPM=yi,Bs._meridiemParse=ks,Bs.meridiem=bi,P("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===v(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=x("moment.lang is deprecated. Use moment.locale instead.",P),t.langData=x("moment.langData is deprecated. Use moment.localeData instead.",L);var Hs=Math.abs,js=Ji("ms"),Vs=Ji("s"),Fs=Ji("m"),$s=Ji("h"),zs=Ji("d"),Ys=Ji("w"),Ws=Ji("M"),Gs=Ji("y"),Us=Ki("milliseconds"),qs=Ki("seconds"),Xs=Ki("minutes"),Js=Ki("hours"),Zs=Ki("days"),Ks=Ki("months"),Qs=Ki("years"),tr=Math.round,er={s:45,m:45,h:22,d:26,M:11},ir=Math.abs,nr=Vt.prototype;nr.abs=Vi,nr.add=$i,nr.subtract=zi,nr.as=qi,nr.asMilliseconds=js,nr.asSeconds=Vs,nr.asMinutes=Fs,nr.asHours=$s,nr.asDays=zs,nr.asWeeks=Ys,nr.asMonths=Ws,nr.asYears=Gs,nr.valueOf=Xi,nr._bubble=Wi,nr.get=Zi,nr.milliseconds=Us,nr.seconds=qs,nr.minutes=Xs,nr.hours=Js,nr.days=Zs,nr.weeks=Qi,nr.months=Ks,nr.years=Qs,nr.humanize=sn,nr.toISOString=rn,nr.toString=rn,nr.toJSON=rn,nr.locale=Ee,nr.localeData=Me,nr.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",rn),nr.lang=fs,z("X",0,0,"unix"),z("x",0,0,"valueOf"),q("x",Dn),q("X",Rn),K("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),K("x",function(t,e,i){i._d=new Date(v(t))}),t.version="2.13.0",e(Nt),t.fn=Ps,t.min=Ht,t.max=jt,t.now=ls,t.utc=a,t.unix=ki,t.months=Ri,t.isDate=n,t.locale=P,t.invalid=u,t.duration=ne,t.isMoment=g,t.weekdays=Bi,t.parseZone=Ci,t.localeData=L,t.isDuration=Ft,t.monthsShort=Ni,t.weekdaysMin=ji,t.defineLocale=O,t.updateLocale=D,t.locales=I,t.weekdaysShort=Hi,t.normalizeUnits=N,t.relativeTimeThreshold=nn,t.prototype=Ps;var sr=t;return sr}),define("controls/config",["marionette","handlebars","txt!config/config.json","txt!config/errors.json","module","json2","moment","jquery"],function(Marionette,Handlebars,config,errorText,module,jsontwo,mome,$){"use strict";return window.Config=_.extend({REMOTE_URL:"",X_RETAILER:"",REQUEST_TIMEOUT:0,DEBUG:!1,DEBUG_URL:"",MIN_PASSWORD_LENGTH:0,LOYALTY_ID_PATTERN:"^[0-9]{11}$",ALT_ID_PATTERN:"^[0-9]{10}$",PAGE_SIZE:0,DEFAULT_SORT:"desc",DEFAULT_WALLET_SORT:"category",ENABLE_RELEVANT:!1,SCROLL_PAGINATION:!1,SSO_ENABLE:!1,SSO_PATH:{},ENABLE_DEFAULT_ROUTE:!0,BADGE_EXPIRING_DAYS:4,ERECEIPT_ENABLE:!1,SMARTBANNER_ENABLED:!1,IS_LOYALTY_TYPE_PHONE:!1,TARGETED_OFFERS:!1,FEATURED_CAROUSEL_ENABLED:!1,SHORT_DESCRIPTION_MAX_SIZE_DESKTOP:50,SHORT_DESCRIPTION_MAX_SIZE_MOBILE:90,CAROUSEL_DATA:{},LOADER:'<div class="background-loader"><span class="dots"></span><span class="dots"></span><span class="dots"></span><span class="dots"></span><span class="dots"></span><span class="dots"></span><span class="dots"></span><span class="dots"></span><span class="dots"></span><span class="dots"></span></div>',FAIL_CODES:[0,404,408,410,500,502,503,504],ERROR_TEXT:errorText?JSON.parse(errorText):null,Events:{NAVIGATE:"navigate",MODAL:"modal",RELOAD:"reload",REFRESH:"refresh",LOAD_MORE:"loadMore",CLIP:"clip"},Paths:{HOME:"",FEATURE:"feature",TARGET:"target",CATEGORY:"category",LOGIN:"login",REGISTER:"register",WALLET:"wallet",ACCOUNT:"account"},States:[{label:"Alabama",value:"AL"},{label:"Alaska",value:"AK"},{label:"Arizona",value:"AZ"},{label:"Arkansas",value:"AR"},{label:"California",value:"CA"},{label:"Colorado",value:"CO"},{label:"Connecticut",value:"CT"},{label:"Delaware",value:"DE"},{label:"District of Columbia",value:"DC"},{label:"Florida",value:"FL"},{label:"Georgia",value:"GA"},{label:"Hawaii",value:"HI"},{label:"Idaho",value:"ID"},{label:"Illinois",value:"IL"},{label:"Indiana",value:"IN"},{label:"Iowa",value:"IA"},{label:"Kansa",value:"KS"},{label:"Kentucky",value:"KY"},{label:"Lousiana",value:"LA"},{label:"Maine",value:"ME"},{label:"Maryland",value:"MD"},{label:"Massachusetts",value:"MA"},{label:"Michigan",value:"MI"},{label:"Minnesota",value:"MN"},{label:"Mississippi",value:"MS"},{label:"Missouri",value:"MO"},{label:"Montana",value:"MT"},{label:"Nebraska",value:"NE"},{label:"Nevada",value:"NV"},{label:"New Hampshire",value:"NH"},{label:"New Jersey",value:"NJ"},{label:"New Mexico",value:"NM"},{label:"New York",value:"NY"},{label:"North Carolina",value:"NC"},{label:"North Dakota",value:"ND"},{label:"Ohio",value:"OH"},{label:"Oklahoma",value:"OK"},{label:"Oregon",value:"OR"},{label:"Pennsylvania",value:"PA"},{label:"Rhode Island",value:"RI"},{label:"South Carolina",value:"SC"},{label:"South Dakota",value:"SD"},{label:"Tennessee",value:"TN"},{label:"Texas",value:"TX"},{label:"Utah",value:"UT"},{label:"Vermont",value:"VT"},{label:"Virginia",value:"VA"},{label:"Washington",value:"WA"},{label:"West Virginia",value:"WV"},{label:"Wisconsin",value:"WI"},{label:"Wyoming",value:"WY"}],MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],getErrorText:function(t,e,i){var n,s=this.ERROR_TEXT&&this.ERROR_TEXT.errors?this.ERROR_TEXT.errors:null;return s&&_.isArray(s)&&(n=_.where(s,{status:t?t:null,path:e?e:null,fields:i?i:null}),n.length||(n=_.where(s,{status:t?t:null,path:e?e:null,fields:null})),n.length||(n=_.where(s,{status:t?t:null,path:null,fields:null}))),n&&n.length?n[0].message:"An error occurred"},isIE:function(){return"number"==typeof document.documentMode||eval("/*@cc_on!@*/!1")},isAndroid:function(){return/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)},isIPhone:function(){return/iP(od|hone)/i.test(window.navigator.userAgent)},isWindowsPhone:function(){return/Windows Phone/i.test(window.navigator.userAgent)},isMobile:function(){return this.isAndroid()||this.isIPhone()||this.isWindowsPhone()},isMobileCSS:function(){try{return/'?mobile'?/.test(window.getComputedStyle(document.querySelector("#inWrap"),":before").getPropertyValue("content"))}catch(t){throw t}},isAuthenticated:function(){return auth.isAuthenticated()},isTouchDevice:function(){return"ontouchstart"in window||"onmsgesturechange"in window},validateEmail:function(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},cleanPhone:function(t){return t.replace(/\D/g,"")},validatePhone:function(t){return/^[2-9]\d{2}[2-9]\d{2}\d{4}$/.test(this.cleanPhone(t))},validateZipCode:function(t){return/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(t)},cleanLoyaltyCardId:function(t){return t.replace(/\D/g,"")},validateLoyaltyCardId:function(t){var e=new RegExp(this.LOYALTY_ID_PATTERN);return e.test(this.cleanLoyaltyCardId(t))},cleanAlternateId:function(t){return t.replace(/\D/g,"")},validateAlternateID:function(t){var e=new RegExp(this.ALT_ID_PATTERN);return e.test(this.cleanAlternateId(t))},callHandleBarsHelper:function(t,e){return _.isArray(e)||(e=[e]),Handlebars.helpers[t].apply(this,e)},getURLParam:function(t,e){return decodeURI(t.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));
},scrollOffset:function(t){var e=$(t).offset();return e.top-=$(window).scrollTop(),e.left-=$(window).scrollLeft(),e},parseDate:function(t){if(!t)return"";try{return new Date(mome.parseZone(t).utcOffset(t))}catch(e){return console.error("Unable to parse date: "+t),""}},formatDate:function(t,e){if(!t)return"";e&&"string"==typeof e||(e="MMM D[,] YYYY");try{return mome(t).format(e)}catch(i){return console.error("Unable to format date: "+t),""}},queryStringParameters:{},getQueryStringParameters:function(t){var e={};if(!_.isString(t))return Config.queryStringParameters=e,e;t=t.substring(t.indexOf("?")+1);var i=decodeURI(t).split(/&/g);return _.each(i,function(t){var i=t.split("=");if(i.length>=1){var t=void 0;2==i.length&&(t=i[1]),e[i[0]]=t}}),Config.queryStringParameters=e,e},featuredDataCheck:!1,featuredData:function(){return!Config.featuredDataCheck&&Config.FEATURED_REMOTE_URL?$.ajax({url:Config.FEATURED_REMOTE_URL,dataType:"json"}).always(function(t,e,i){return Config.featuredDataCheck=!0,t.FEATURE_DATA&&(Config.FEATURE_DATA=t.FEATURE_DATA),t.CAROUSEL_DATA&&(Config.CAROUSEL_DATA=t.CAROUSEL_DATA),this}):$.Deferred().resolve()}},JSON.parse(config),module.config()),_.extend(Marionette.TemplateCache.prototype,{loadTemplate:function(t){if(!t||0===t.length)throw new Error("No template specified");return t},compileTemplate:function(t){return Handlebars.compile(t)}}),Handlebars.registerHelper("toHTML",function(t){return new Handlebars.SafeString(t)}),Handlebars.registerHelper("compare",function(t,e,i){if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");var n=i.hash.operator||"==",s={"==":function(t,e){return t==e},"===":function(t,e){return t===e},"!=":function(t,e){return t!=e},"<":function(t,e){return t<e},">":function(t,e){return t>e},"<=":function(t,e){return t<=e},">=":function(t,e){return t>=e},"typeof":function(t,e){return typeof t==e}};if(!s[n])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+n);var r=s[n](t,e);return r?i.fn(this):i.inverse(this)}),Handlebars.registerHelper("inverse",function(t){return 100-parseInt(t)}),Handlebars.registerHelper("formatCurrency",function(t){return t=parseFloat(t)/100||0,t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Handlebars.registerHelper("formatDate",function(t,e){return Config.formatDate(t,e)}),Handlebars.registerHelper("moment",function(t,e){t&&t.hash&&(e=_.cloneDeep(t),t=void 0);var i=mome(t);for(var n in e.hash)i[n]?i=i[n](e.hash[n]):console.log('moment.js does not support "'+n+'"');return i}),Handlebars.registerHelper("formatOfferValueText",function(t){var e="";return e=t,new Handlebars.SafeString(e)}),Handlebars.registerHelper("formatShortDescriptionText",function(t,e){var i="",n=Config.isMobile()?Config.SHORT_DESCRIPTION_MAX_SIZE_MOBILE:Config.SHORT_DESCRIPTION_MAX_SIZE_DESKTOP;if(e&&0==t.toUpperCase().indexOf(e.toUpperCase())&&(t=t.substring(e.length)),t.length<n+1)return new Handlebars.SafeString(t);for(var s=t.split(" "),r=0;r<s.length;r++){if(i.length>n-4||i.length+s[r].length>n){i+=" ...";break}i+=" "+s[r]}return new Handlebars.SafeString(i)}),Handlebars.registerHelper("global",function(t){return t.fn(Config)}),Config}),define("controls/router",["marionette"],function(t){"use strict";return t.AppRouter.extend({appRoutes:{"":"showHome","target(/)(:matchRunId)(?)(:querystring)":"showTargeted","category/:category":"showHome","feature/:id/:token(?)(queryString)":"showAuthenticatedFeature","feature/:id":"showFeature","login/:token":"showLogin",login:"showLogin",register:"showRegister","forgot-password":"showForgotPassword","reset-password/:token":"showResetPassword",wallet:"showWallet",basket:"showBasket","account/:view":"showAccount",logout:"doLogout","*path":"showDefault"}})}),function(){function t(){var t="{}";if("userDataBehavior"==m){f.load("jStorage");try{t=f.getAttribute("jStorage")}catch(e){}try{b=f.getAttribute("jStorage_update")}catch(i){}p.jStorage=t}s(),a(),l()}function e(){var e;clearTimeout(y),y=setTimeout(function(){if("localStorage"==m||"globalStorage"==m)e=p.jStorage_update;else if("userDataBehavior"==m){f.load("jStorage");try{e=f.getAttribute("jStorage_update")}catch(n){}}if(e&&e!=b){b=e;var s,r=h.parse(h.stringify(d.__jstorage_meta.CRC32));t(),s=h.parse(h.stringify(d.__jstorage_meta.CRC32));var o,a=[],l=[];for(o in r)r.hasOwnProperty(o)&&(s[o]?r[o]!=s[o]&&"2."==String(r[o]).substr(0,2)&&a.push(o):l.push(o));for(o in s)s.hasOwnProperty(o)&&(r[o]||a.push(o));i(a,"updated"),i(l,"deleted")}},25)}function i(t,e){t=[].concat(t||[]);var i,n,s,r;if("flushed"==e){t=[];for(i in v)v.hasOwnProperty(i)&&t.push(i);e="deleted"}for(i=0,s=t.length;i<s;i++){if(v[t[i]])for(n=0,r=v[t[i]].length;n<r;n++)v[t[i]][n](t[i],e);if(v["*"])for(n=0,r=v["*"].length;n<r;n++)v["*"][n](t[i],e)}}function n(){var t=(+new Date).toString();if("localStorage"==m||"globalStorage"==m)try{p.jStorage_update=t}catch(i){m=!1}else"userDataBehavior"==m&&(f.setAttribute("jStorage_update",t),f.save("jStorage"));e()}function s(){if(p.jStorage)try{d=h.parse(String(p.jStorage))}catch(t){p.jStorage="{}"}else p.jStorage="{}";g=p.jStorage?String(p.jStorage).length:0,d.__jstorage_meta||(d.__jstorage_meta={}),d.__jstorage_meta.CRC32||(d.__jstorage_meta.CRC32={})}function r(){if(d.__jstorage_meta.PubSub){for(var t=+new Date-2e3,e=0,i=d.__jstorage_meta.PubSub.length;e<i;e++)if(d.__jstorage_meta.PubSub[e][0]<=t){d.__jstorage_meta.PubSub.splice(e,d.__jstorage_meta.PubSub.length-e);break}d.__jstorage_meta.PubSub.length||delete d.__jstorage_meta.PubSub}try{p.jStorage=h.stringify(d),f&&(f.setAttribute("jStorage",p.jStorage),f.save("jStorage")),g=p.jStorage?String(p.jStorage).length:0}catch(n){}}function o(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==t)throw new TypeError("Reserved key name");return!0}function a(){var t,e,s,o,l=1/0,c=!1,h=[];if(clearTimeout(u),d.__jstorage_meta&&"object"==typeof d.__jstorage_meta.TTL){t=+new Date,s=d.__jstorage_meta.TTL,o=d.__jstorage_meta.CRC32;for(e in s)s.hasOwnProperty(e)&&(s[e]<=t?(delete s[e],delete o[e],delete d[e],c=!0,h.push(e)):s[e]<l&&(l=s[e]));1/0!=l&&(u=setTimeout(a,Math.min(l-t,2147483647))),c&&(r(),n(),i(h,"deleted"))}}function l(){var t;if(d.__jstorage_meta.PubSub){var e,i=w;for(t=d.__jstorage_meta.PubSub.length-1;0<=t;t--)if(e=d.__jstorage_meta.PubSub[t],e[0]>w){var i=e[0],n=e[1];if(e=e[2],x[n])for(var s=0,r=x[n].length;s<r;s++)try{x[n][s](n,h.parse(h.stringify(e)))}catch(o){}}w=i}}var c=window.jQuery||window.$||(window.$={}),h={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(t){return String(t).evalJSON()}||c.parseJSON||c.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||c.toJSON};if(!("parse"in h&&"stringify"in h))throw Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var u,d={__jstorage_meta:{CRC32:{}}},p={jStorage:"{}"},f=null,g=0,m=!1,v={},y=!1,b=0,x={},w=+new Date,_={isXML:function(t){return!!(t=(t?t.ownerDocument||t:0).documentElement)&&"HTML"!==t.nodeName},encode:function(t){if(!this.isXML(t))return!1;try{return(new XMLSerializer).serializeToString(t)}catch(e){try{return t.xml}catch(i){}}return!1},decode:function(t){var e="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return!!e&&(t=e.call("DOMParser"in window&&new DOMParser||window,t,"text/xml"),!!this.isXML(t)&&t)}};c.jStorage={version:"0.4.10",set:function(t,e,n){if(o(t),n=n||{},"undefined"==typeof e)return this.deleteKey(t),e;if(_.isXML(e))e={_is_xml:!0,xml:_.encode(e)};else{if("function"==typeof e)return;e&&"object"==typeof e&&(e=h.parse(h.stringify(e)))}d[t]=e;for(var s,r=d.__jstorage_meta.CRC32,a=h.stringify(e),l=a.length,c=2538058380^l,u=0;4<=l;)s=255&a.charCodeAt(u)|(255&a.charCodeAt(++u))<<8|(255&a.charCodeAt(++u))<<16|(255&a.charCodeAt(++u))<<24,s=1540483477*(65535&s)+((1540483477*(s>>>16)&65535)<<16),s^=s>>>24,s=1540483477*(65535&s)+((1540483477*(s>>>16)&65535)<<16),c=1540483477*(65535&c)+((1540483477*(c>>>16)&65535)<<16)^s,l-=4,++u;switch(l){case 3:c^=(255&a.charCodeAt(u+2))<<16;case 2:c^=(255&a.charCodeAt(u+1))<<8;case 1:c^=255&a.charCodeAt(u),c=1540483477*(65535&c)+((1540483477*(c>>>16)&65535)<<16)}return c^=c>>>13,c=1540483477*(65535&c)+((1540483477*(c>>>16)&65535)<<16),r[t]="2."+((c^c>>>15)>>>0),this.setTTL(t,n.TTL||0),i(t,"updated"),e},get:function(t,e){return o(t),t in d?d[t]&&"object"==typeof d[t]&&d[t]._is_xml?_.decode(d[t].xml):d[t]:"undefined"==typeof e?null:e},deleteKey:function(t){return o(t),t in d&&(delete d[t],"object"==typeof d.__jstorage_meta.TTL&&t in d.__jstorage_meta.TTL&&delete d.__jstorage_meta.TTL[t],delete d.__jstorage_meta.CRC32[t],r(),n(),i(t,"deleted"),!0)},setTTL:function(t,e){var i=+new Date;return o(t),e=Number(e)||0,t in d&&(d.__jstorage_meta.TTL||(d.__jstorage_meta.TTL={}),0<e?d.__jstorage_meta.TTL[t]=i+e:delete d.__jstorage_meta.TTL[t],r(),a(),n(),!0)},getTTL:function(t){var e=+new Date;return o(t),t in d&&d.__jstorage_meta.TTL&&d.__jstorage_meta.TTL[t]?(t=d.__jstorage_meta.TTL[t]-e)||0:0},flush:function(){return d={__jstorage_meta:{CRC32:{}}},r(),n(),i(null,"flushed"),!0},storageObj:function(){function t(){}return t.prototype=d,new t},index:function(){var t,e=[];for(t in d)d.hasOwnProperty(t)&&"__jstorage_meta"!=t&&e.push(t);return e},storageSize:function(){return g},currentBackend:function(){return m},storageAvailable:function(){return!!m},listenKeyChange:function(t,e){o(t),v[t]||(v[t]=[]),v[t].push(e)},stopListening:function(t,e){if(o(t),v[t])if(e)for(var i=v[t].length-1;0<=i;i--)v[t][i]==e&&v[t].splice(i,1);else delete v[t]},subscribe:function(t,e){if(t=(t||"").toString(),!t)throw new TypeError("Channel not defined");x[t]||(x[t]=[]),x[t].push(e)},publish:function(t,e){if(t=(t||"").toString(),!t)throw new TypeError("Channel not defined");d.__jstorage_meta||(d.__jstorage_meta={}),d.__jstorage_meta.PubSub||(d.__jstorage_meta.PubSub=[]),d.__jstorage_meta.PubSub.unshift([+new Date,t,e]),r(),n()},reInit:function(){t()},noConflict:function(t){return delete window.$.jStorage,t&&(window.jStorage=this),this}},function(){var t=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),t=!0,window.localStorage.removeItem("_tmptest")}catch(i){}if(t)try{window.localStorage&&(p=window.localStorage,m="localStorage",b=p.jStorage_update)}catch(n){}else if("globalStorage"in window)try{window.globalStorage&&(p="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],m="globalStorage",b=p.jStorage_update)}catch(r){}else{if(f=document.createElement("link"),!f.addBehavior)return void(f=null);f.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(f);try{f.load("jStorage")}catch(o){f.setAttribute("jStorage","{}"),f.save("jStorage"),f.load("jStorage")}t="{}";try{t=f.getAttribute("jStorage")}catch(c){}try{b=f.getAttribute("jStorage_update")}catch(h){}p.jStorage=t,m="userDataBehavior"}s(),a(),"localStorage"==m||"globalStorage"==m?"addEventListener"in window?window.addEventListener("storage",e,!1):document.attachEvent("onstorage",e):"userDataBehavior"==m&&setInterval(e,1e3),l(),"addEventListener"in window&&window.addEventListener("pageshow",function(t){t.persisted&&e()},!1)}()}(),define("jstorage",function(){}),define("models/auth",["backbone","jquery","jstorage"],function(t,e){"use strict";var i=t.Model.extend({id:1,defaults:{token:""},initialize:function(){this.set("token",e.jStorage.get("token",""))},isAuthenticated:function(){return!!this.get("token")},register:function(t){return this.save(t,{url:"/user/register",sendEmpty:!1})},login:function(t){return this.save(t,{url:"/user/login"})},tokenLogin:function(t){return this.clear(),this.set("token",t),e.jStorage.set("token",t)},changeId:function(t){return this.save(t,{url:"/user/username"})},changePassword:function(t){return this.save(t,{url:"/user/password"})},forgotPassword:function(t){return this.save(t,{url:"/user/password/forgot"})},resetPassword:function(t){return this.save(t,{url:"/user/password/reset"})},isNew:function(){return!0},reset:function(){this.clear(),e.jStorage.flush()},save:function(i,n){var s=this;return n.success=function(t,i){s.clear(),s.set("token",i.token),e.jStorage.set("token",i.token)},n.ignoreFail=!0,n.ignoreUnauthorized=!0,n.data=i,t.Model.prototype.save.call(this,i,n)}});return new i}),define("controls/vent",["backbone.wreqr"],function(t){"use strict";return new t.EventAggregator}),define("txt!templates/components/unauthenticated.html",[],function(){return'<div id="inMenu">\n  <div id="to-top"><i class="fa fa-angle-up"></i> Back to Top</div>\n</div>\n<div class="registration">\n  <div class="hgroup">\n    <div class="container-fluid">\n      <div class="row">\n        {{#if totalCount}}\n        <h1>Save up to <span class="value">${{formatCurrency totalValue}}</span>\n          <span class="hidden-xs hidden-sm">today </span>\n        </h1>\n        <h2> with {{totalCount}} digital coupons!</h2>\n        {{else}}\n        <h1>Save today</h1>\n        <h2> with digital coupons!</h2>\n        {{/if}}\n      </div>\n    </div>\n  </div>\n  <div class="container-fluid">\n    <div role="form" class="sign-up center-block">\n      <p>Not signed up to Celebrate yet?</p>\n      <div class="form-group">\n        <a href="#register"><button class="reg-btn btn btn-primary btn-lg">Create an Account</button></a>\n      </div>\n      <p>Already have a Celebrate Account?</p>\n      <div class="form-group">\n        <button id="inmar-login-button" class="login-btn btn btn-success btn-lg">Account Login</button>\n      </div>\n    </div>\n    <div class="tip"></div>\n  </div>\n</div>\n'}),define("txt!templates/mobile/unauthenticated.html",[],function(){return'<div id="inMenu">\n  <div id="to-top"><i class="fa fa-angle-up"></i> Back to Top</div>\n</div>\n\n<div class="registration">\n  <header>\n    {{#if totalCount}}\n    <!-- make these semantic.. -->\n    <h1>Save up to <span class="value">${{formatCurrency totalValue}}</span> today <span class="h-small">with {{totalCount}} digital coupons!</span></h1>\n    {{else}}\n    <h1>Save today <span class="h-small">with digital coupons!</span></h1>\n    {{/if}}\n  </header>\n\n  <div class="container">\n    <div role="form" class="sign-up center-block">\n      <p>Not signed up to Celebrate yet?</p>\n      <div class="form-group">\n        <button id="inmar-register-button" class="register-btn btn btn-primary btn-lg">Create an Account</button>\n      </div>\n      <div class="form-group">\n        <p>Already have a Celebrate Account?</p>\n        <button id="inmar-login-button" class="login-btn btn btn-success btn-lg">Account Login</button>\n      </div>\n    </div>\n    <div class="tip"></div>\n  </div>\n\n</div>\n'}),define("components/unauthenticated",["marionette","models/auth","controls/vent","txt!templates/components/unauthenticated.html","txt!templates/mobile/unauthenticated.html","jquery"],function(t,e,i,n,s,r){"use strict";return t.ItemView.extend({id:"unauthenticated",template:n,events:{"click .register-btn":"onRegisterButtonClick","click .login-btn":"onLoginButtonClick","click #to-top":"backToTop"},ui:{emailInput:".email-input",backToTop:"#to-top"},initialize:function(){Config.isMobileCSS()===!0&&(this.template=s)},onRender:function(){var t=this.ui.backToTop.offset();this.ui.backToTop.affix({offset:{top:t.top}})},onClose:function(){r(this.ui.backToTop).off(".affix").removeData("bs.affix")},onRegisterButtonClick:function(){e.set("email",this.ui.emailInput.val()),i.trigger(Config.Events.NAVIGATE,Config.Paths.REGISTER)},onLoginButtonClick:function(){i.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN)},backToTop:function(){r("body,html").animate({scrollTop:0},800)}})}),define("txt!templates/components/search.html",[],function(){return'<div class="input-group">\n    <select class="keywords form-control" data-placeholder="Search Keywords" placeholder="Search Keywords" multiple>\n        <option class="placeholder" selected disabled>Search Keywords</option>\n        {{#each items}}\n            <option {{#if selected}}selected{{/if}}>{{name}}</option>\n        {{/each}}\n    </select>\n    <span class="input-group-addon"><i class="inmico inm-ico_search"></i></span>\n</div>\n'}),!function(){var t,e,i,n,s,r={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,s,r,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),r=t.childNodes,o=[],n=0,s=r.length;s>n;n++)i=r[n],o.push(this.add_option(i,e,t.disabled));return o},t.prototype.add_option=function(t,e,i){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:i===!0?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,i;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},t}(),n.select_to_array=function(t){var e,i,s,r,o;for(i=new n,o=t.childNodes,s=0,r=o.length;r>s;s++)e=o[s],i.add_node(e);return i.parsed},e=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.results_option_build=function(t){var e,i,n,s,r;for(e="",r=this.results_data,n=0,s=r.length;s>n;n++)i=r[n],e+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},t.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.style.cssText=t.style,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,this.outerHTML(i)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,i,n,s;for(n=this.results_data,s=[],e=0,i=n.length;i>e;e++)t=n[e],t.selected?s.push(t.selected=!1):s.push(void 0);return s},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,i,n,s,r,o,a,l,c,h,u,d;for(this.no_results_clear(),s=0,o=this.get_search_text(),t=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=this.search_contains?"":"^",i=new RegExp(n+t,"i"),c=new RegExp(t,"i"),d=this.results_data,h=0,u=d.length;u>h;h++)e=d[h],e.search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(r=this.results_data[e.group_array_index],0===r.active_options&&r.search_match&&(s+=1),r.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,i),e.search_match&&!e.group&&(s+=1),e.search_match?(o.length&&(a=e.search_text.search(c),l=e.search_text.substr(0,a+o.length)+"</em>"+e.search_text.substr(a+o.length),e.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>s&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var i,n,s,r;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" "),n.length))for(s=0,r=n.length;r>s;s++)if(i=n[s],e.test(i))return!0},t.prototype.choices_count=function(){var t,e,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,e=0,i=n.length;i>e;e++)t=n[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(n){return e.browser_is_supported()?this.each(function(){var e,s;e=t(this),s=e.data("chosen"),"destroy"===n&&s?s.destroy():s||e.data("chosen",new i(this,n))}):this}}),i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments)}return o(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,i;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),i={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(){
return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(e){var i;return i=t(e.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,i,n,s,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),s=n+r,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=s)return this.search_results.scrollTop(e-n>0?e-n:0);if(r>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},i.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(e),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(e){var i,n,s=this;return i=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?i.addClass("search-choice-disabled"):(n=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),n.bind("click.chosen",function(t){return s.choice_destroy_link_click(t)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,i;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[e[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},i.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,i,n,s,r,o,a,l,c;if(this.is_multiple){for(n=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=o.length;c>l;l++)s=o[l],r+=s+":"+this.search_field.css(s)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(e)}.call(this),define("chosen",function(){}),define("components/search",["marionette","controls/vent","txt!templates/components/search.html","chosen"],function(t,e,i){"use strict";return t.ItemView.extend({id:"search",className:"search",template:i,ui:{keywords:".keywords",placeholder:".keywords > .placeholder"},collectionEvents:{change:"onCollectionChange"},events:{"mousedown .keywords":"onKeywordsClick","focusout .keywords":"onKeywordsFocusOut","change .keywords":"onKeywordsChange"},onRender:function(){Config.isMobile()||(this.ui.placeholder.remove(),this.ui.keywords.chosen({max_selected_options:5})),this.delegateEvents()},onCollectionChange:function(t,e){e&&e.ignore||this.render()},onKeywordsClick:function(){Config.isIPhone()&&this.ui.placeholder.prop("selected",!1)},onKeywordsFocusOut:function(){Config.isIPhone()&&!this.ui.keywords.val()&&this.ui.placeholder.prop("selected",!0)},onKeywordsChange:function(t,i){if(i)i.selected?this.collection.get(i.selected).set("selected",!0,{ignore:!0}):i.deselected&&this.collection.get(i.deselected).set("selected",!1,{ignore:!0});else{this.collection.selectAll(!1,{ignore:!0});var n=this.ui.keywords.val();if(n&&n.length){for(var s=0;s<n.length;s++)this.collection.get(n[s]).set("selected",!0,{ignore:!0});this.ui.placeholder.text(n.join(", "))}else this.ui.placeholder.text("Search Keywords")}e.trigger(Config.Events.REFRESH)}})}),define("txt!templates/components/category.html",[],function(){return'<a href="#" class="{{#if selected}}active{{/if}}">\n  <span class="category-count pull-right">{{active}}</span>\n  <input class="category-input" type="checkbox" name="category" {{#if selected}}checked{{/if}}/>\n  <label for="{{key}}"></label>\n  <span class="category-name">{{name}}</span>\n</a>\n'}),define("components/category",["marionette","controls/vent","txt!templates/components/category.html"],function(t,e,i){"use strict";return t.ItemView.extend({tagName:"li",className:"category",template:i,events:{"click  *":"onClick"},onClick:function(t){t.preventDefault(),t.stopPropagation(),this.model.toggle(),e.trigger(Config.Events.REFRESH)}})}),define("txt!templates/components/categories-dropdown.html",[],function(){return'<div class="dropdown-toggle inm-header" data-toggle="dropdown">\n    <i class="inmico inm-ico_categories"></i>\n    <span class="categories-label">\n        {{~#if categories_count ~}}\n           {{~categories_count}} {{#compare categories_count 1~}} Category {{~else~}} Categories {{~/compare}}\n        {{~else~}}\n            <span class="hidden-xs">All </span>Categories\n        {{~/if~}}\n    </span>\n    <div class="tip"></div>\n</div>\n\n<ul class="categories dropdown-menu keep-open">\n</ul>\n'}),define("components/categories-dropdown",["marionette","components/category","txt!templates/components/categories-dropdown.html","jquery"],function(t,e,i,n){"use strict";return t.CompositeView.extend({id:"categories-dropdown",className:"btn-group dropdown",template:i,itemViewContainer:"ul.dropdown-menu",itemView:e,collectionEvents:{change:"onCollectionChange"},events:{"hidden.bs.dropdown":"render"},onRender:function(){this.$el.find(".dropdown-toggle").inDropdown(),this.delegateEvents()},onCollectionChange:function(){this.$el.hasClass("open")?this._renderChildren():this.render()},onClose:function(){n(this.$el.find(".dropdown-toggle")).off(".dropdown").removeData("bs.dropdown")}})}),define("txt!templates/mobile/menu-dropdown-categories.html",[],function(){return'    <!-- <aside id="menu-dropdown-categories" class="menu-dropdown"> -->\n      <div class="tip"></div>\n\n      <header>\n        <span class="title">Select Categories</span>\n        <button class="btn inm-button-apply">Apply</button>\n      </header>\n\n      <ol class="dropdown-items"></ol>\n    <!-- </aside> -->\n'}),define("views/mobile/menu-dropdown-categories",["marionette","controls/vent","txt!templates/mobile/menu-dropdown-categories.html"],function(t,e,i){"use strict";var n=t.ItemView.extend({tagName:"li",template:'<label><input type="checkbox" /><span>{{name}}</span><span class="pull-right">{{active}}</span></label>',events:{"click label":"onItemClick"},onItemClick:function(t){"INPUT"===t.target.tagName&&this.model.toggle()}});return t.CollectionView.extend({itemView:n,collectionEvents:{change:"onCollectionChange"},onRender:function(){"undefined"!=typeof this.children.first()&&this.children.first().$el.find("input").attr("checked",this.collection.models[0].attributes.selected)},onCollectionChange:function(){this.collection.models.length>=1&&(this.collection.models[0].attributes.selected===!0?this.render():this.children.first().$el.find("input").attr("checked",!1))}})}),define("txt!templates/components/account-nav.html",[],function(){return'<div id="inmar-my-account-dropdown" class="dropdown-toggle inm-header" data-toggle="dropdown">\n    <span class="label"></span>\n    <i class="inmico inm-ico_profile">\n      <div class="arrow"></div>\n    </i>\n    <div class="tip"></div>\n</div>\n\n<ul class="dropdown-menu dropdown-menu-right" role="menu">\n    <li><a href="#account/savings">My Savings</a></li>\n    <li><a href="#wallet">Coupon Check List</a></li>\n</ul>\n'}),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e()})}(jQuery),define("bootstrap/transition",["jquery"],function(){}),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),r="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,r)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.1.1",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),n=this.$target.scrollTop(),s=this.$element.offset(),r=this.options.offset,o=r.top,a=r.bottom;"object"!=typeof r&&(a=o=r),"function"==typeof o&&(o=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var l=!(null!=this.unpin&&n+this.unpin<=s.top)&&(null!=a&&s.top+this.$element.height()>=e-a?"bottom":null!=o&&n<=o&&"top");if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),h=t.Event(c+".bs.affix");this.$element.trigger(h),h.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(t.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:e-this.$element.height()-a}))}}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),define("bootstrap/affix",["jquery","bootstrap/transition"],function(){}),define("components/account-nav",["marionette","models/auth","controls/vent","txt!templates/components/account-nav.html","jquery","bootstrap/affix"],function(t,e,i,n,s){"use strict";return t.ItemView.extend({id:"account-nav",className:"btn-group dropdown account",template:n,ui:{label:".label",list:".dropdown-menu"},events:{"click .help":"onHelpClick","click .logout":"onLogoutClick"},initialize:function(){this.model=e,this.model.set("ereceiptEnable",Config.ERECEIPT_ENABLE)},onRender:function(){this.$el.find(".dropdown-toggle").inDropdown();for(var t,e=Backbone.history.fragment,n=this.ui.list.find("a"),r=0,o=n.length;r<o;r++){var a=n[r],l=a.href.split("#").pop();""!==e&&l==e&&(t=s(a),this.ui.label.text(a.innerHTML))}t&&t.length>0&&t.click(function(t){i.trigger(Config.Events.RELOAD)}),this.delegateEvents()},onClose:function(){s(this.$el.find(".dropdown-toggle")).off(".dropdown").removeData("bs.dropdown")},onLogoutClick:function(){e.reset(),i.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN)}})}),define("txt!templates/components/menu.html",[],function(){return'<div class="container-fluid">\n\n  <div class="menu col-xs-12">\n\n    <div class="wrapper">\n\n      <div id="search" class="inm-mobile-hide"></div>\n\n      <div class="dropdowns">\n        <div id="categories-dropdown" class="btn-group dropdown"></div>\n        <div id="sort-by-dropdown" class="btn-group dropdown">\n          <div class="dropdown-toggle inm-header" data-toggle="dropdown">\n              <i class="inmico inm-ico_sort-desc"></i>\n              <span class="sort-label"></span>\n              <div class="tip"></div>\n          </div>\n\n          <ul class="sorts dropdown-menu keep-open">\n            {{#if enableRelevant}}<li class="sort"><label><input type="radio" name="sortgroup" value="relevant" {{#compare defaultSort "relevant"}}checked{{/compare}}><span>Personalized</span></label></li>{{/if}}\n            <li class="sort"><label><input type="radio" name="sortgroup" value="desc" {{#compare defaultSort "desc"}}checked{{/compare}}><span>Newest</span></label></li>\n            <li class="sort"><label><input type="radio" name="sortgroup" value="asc" {{#compare defaultSort "asc"}}checked{{/compare}}><span>Expiring</span></label></li>\n            <li class="sort"><label><input type="radio" name="sortgroup" value="popular" {{#compare defaultSort "popular"}}checked{{/compare}}><span>Popular</span></label></li>\n            <li class="sort"><label><input type="radio" name="sortgroup" value="brand" {{#compare defaultSort "brand"}}checked{{/compare}}><span>Brand</span></label></li>\n            <li class="sort"><label><input type="radio" name="sortgroup" value="valueDesc" {{#compare defaultSort "valueDesc"}}checked{{/compare}}><span>Value</span></label></li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="account-tools">\n\n        <div id="wallet-button" class="btn btn-success">\n          <i id="card-icon" class="fa fa-shopping-cart"></i>\n          <div class="card-count"><span id="inmar-clipped-coupon-count" class="badge{{#compare clippedCount 9 operator=\'>\'}} double{{/compare}}">{{clippedCount}}</span></div>\n          <div class="details">\n            <p id="inm-clipped-value" class="inm-header">${{formatCurrency clippedValue}}</p>\n          </div>\n        </div>\n\n        <div id="account-nav" class="btn-group dropdown"></div>\n\n      </div>\n\n    </div>\n\n    <div id="to-top"><i class="fa fa-angle-up"></i> Back to Top</div>\n\n  </div>\n</div>\n'}),define("txt!templates/mobile/menu.html",[],function(){return'<div class="mobile-menu">\n\n  <nav>\n    <ol>\n      <li><button id="menu-button-categories" type="button"><span class="inmico inm-ico_categories"></span></button></li>\n      <li><button id="menu-button-sorting" type="button"><span class="inmico inm-ico_sort-desc"></span></button></li>\n      <li><button id="menu-button-profile" type="button"><span class="inmico inm-ico_profile"></span></button></li>\n    </ol>\n  </nav>\n\n  <div id="wallet-button" class="sub-menu">\n\n    <div class="card-info">\n      <span class="fa fa-shopping-cart"></span>\n      <div class="card-count"><div id="inmar-clipped-coupon-count">{{clippedCount}}</div></div>\n      <span id="inm-clipped-value" class="value">${{formatCurrency clippedValue}}</span>\n    </div>\n\n    <div class="inm-menu-checklist">\n      <span>Coupon Check List <span class="fa fa-angle-right"></span></span>\n    </div>\n\n  </div>\n\n  <div class="menu-dropdown-wrapper">\n\n  <!-- <div id="debug"></div> -->\n\n    <aside id="menu-dropdown-categories" class="menu-dropdown categories">\n      <div class="tip"></div>\n\n      <header>\n        <div class="affix-wrapper">\n          <span class="title">Select Categories</span>\n          <button class="btn inm-button-apply">Apply</button>\n        </div>\n      </header>\n\n      <ol class="dropdown-items"></ol>\n    </aside>\n\n    <aside id="menu-dropdown-sorting" class="menu-dropdown sorting">\n      <div class="tip"></div>\n\n      <header>\n        <div class="affix-wrapper">\n          <span class="title">Sort by:</span>\n          <button class="btn inm-button-apply">Apply</button>\n        </div>\n      </header>\n\n      <ol class="dropdown-items">\n        {{#if enableRelevant}}<li><label><input type="radio" name="sortby" value="relevant" {{#compare defaultSort "relevant"}}checked{{/compare}}/><span>Personalized</span></label></li>{{/if}}\n        <li><label><input type="radio" name="sortby" value="desc" {{#compare defaultSort "desc"}}checked{{/compare}} /><span>Newest</span></label></li>\n        <li><label><input type="radio" name="sortby" value="asc" {{#compare defaultSort "asc"}}checked{{/compare}} /><span>Expiring</span></label></li>\n        <li><label><input type="radio" name="sortby" value="popular" {{#compare defaultSort "popular"}}checked{{/compare}} /><span>Popular</span></label></li>\n        <li><label><input type="radio" name="sortby" value="brand" {{#compare defaultSort "brand"}}checked{{/compare}} /><span>Brand</span></label></li>\n        <li><label><input type="radio" name="sortby" value="valueDesc" {{#compare defaultSort "valueDesc"}}checked{{/compare}} /><span>Value</span></label></li>\n      </ol>\n    </aside>\n\n    <aside id="menu-dropdown-profile" class="menu-dropdown profile">\n      <div class="tip"></div>\n\n      <header>\n        <div class="affix-wrapper">\n          <span class="title">My Account</span>\n        </div>\n      </header>\n\n      <ol class="dropdown-items">\n        <li><a href="#account/savings">My Savings<span class="fa fa-angle-right"></span></a></li>\n        <li><a href="#wallet">Coupon Check List<span class="fa fa-angle-right"></span></a></li>\n      </ol>\n    </aside>\n\n  </div>\n\n</div>\n<div id="to-top"><i class="fa fa-angle-up"></i> Back to Top</div>\n'}),define("components/menu",["marionette","components/search","components/categories-dropdown","views/mobile/menu-dropdown-categories","components/account-nav","models/auth","controls/vent","txt!templates/components/menu.html","txt!templates/mobile/menu.html","jquery"],function(t,e,i,n,s,r,o,a,l,c){"use strict";var h=0,u=!1,d=function(){var t=c(window).height();c("#inWrap #inMenu").hasClass("affix-top")&&(t-=c("#inWrap #inmContent")[0].getBoundingClientRect().top),t-=c("#inWrap .mobile-menu > nav").height(),c("#inWrap .menu-dropdown-wrapper > .menu-dropdown.open").css("height",t.toString().concat("px")),c("#debug").css("height",t.toString().concat("px")),h=c("body").scrollTop()},p=function(){d()},f=_.debounce(p,300),g=function(){u=!0,d(),c(window).bind("resize",f),c(screen).bind("orientationchange",p),c("html").addClass("stop-scroll"),h=c("body").scrollTop()},m=function(){c(window).unbind("resize",f),c(screen).unbind("orientationchange",p),c("html").removeClass("stop-scroll"),h=c("body").scrollTop(),u=!1};return t.Layout.extend({id:"inMenu",className:"clearfix",template:a,ui:{menu:".menu",search:"#search",sort:"#sort-by-dropdown",wallet:"#wallet-button",categories:"#categories-dropdown",accountNav:"#account-nav",cardCount:"#inmar-clipped-coupon-count",clippedValue:"#inm-clipped-value",menuDropdownWrapper:".menu-dropdown-wrapper"},modelEvents:{"change:clippedCount":"onClippedCountChange"},events:{"click #wallet-button":"onWalletClick","click #toast .close-icon":"removeToast","click #to-top":"backToTop","click .mobile-menu li > button":"onMenuDropdownClick","click .inm-button-apply":"onButtonApplyClick","change #menu-dropdown-sorting .dropdown-items input":"onSortChange","change #sort-by-dropdown .sorts input":"onSortChange","click #menu-dropdown-profile a.logout":"mobileOnLogoutClick","click .menu-dropdown a":"onMenuDropdownNavigate"},onMenuDropdownClick:function(t){var e=c(t.target).closest("button");e.toggleClass("active").parent().siblings().find("button").removeClass("active"),c("#".concat(e.attr("id").replace("button","dropdown"))).toggleClass("open").siblings().removeClass("open"),e.parent().find(".active").length>0?g():m()},onButtonApplyClick:function(t){o.trigger(Config.Events.REFRESH);var e=c(t.target).closest(".menu-dropdown");e.removeClass("open"),c("#".concat(e.attr("id").replace("dropdown","button"))).removeClass("active"),m()},onMenuDropdownNavigate:function(){u&&m()},initialize:function(){this.isMobile=Config.isMobileCSS(),this.model.set({defaultSort:Config.DEFAULT_SORT}),this.model.set({enableRelevant:Config.ENABLE_RELEVANT}),this.isMobile===!0?(this.template=l,this.categoriesView=new n({model:this.model,collection:this.model.categories})):(this.searchView=new e({collection:this.model.keywords}),this.categoriesView=new i({model:this.model,collection:this.model.categories}),this.accountNavView=new s)},onRender:function(){this.isMobile?(this.categoriesView.$el=c("#menu-dropdown-categories > .dropdown-items"),this.categoriesView.render()):(this.searchView.$el=this.ui.search,this.searchView.render(),this.categoriesView.$el=this.ui.categories,this.categoriesView.render(),this.accountNavView.$el=this.ui.accountNav,this.accountNavView.render(),this.ui.sort.find(".dropdown-toggle").inDropdown(),this.ui.sort.find(".sort-label").text(this.ui.sort.find("input:checked + span").text()))},onShow:function(){var t=this,e=this.$el.offset();this.$el.css("width",c("#inWrap").css("width"));var i=this.$el.affix({offset:{top:e.top}});i.on("affix.bs.affix",function(){c(this).css("width",c("#inWrap").css("width"))}),i.on("affixed-top.bs.affix",function(){c(this).css("width","inherit")}),c(window).on("resize",function(){t.$el.css("width",c("#inWrap").css("width"))})},onClose:function(){c(this.$el).off(".affix").removeData("bs.affix")},onSortChange:function(t){this.model.sorts.get(t.target.value).select(),this.isMobile||(this.ui.sort.find(".sort-label").text(this.ui.sort.find("input:checked + span").text()),o.trigger(Config.Events.REFRESH))},mobileOnLogoutClick:function(t){r.reset(),o.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN)},onClippedCountChange:function(t,e){var i=t.wallet.clippedValue,n=t.wallet.clippedCount,s=this.ui.clippedValue.find("span").clone();i=Config.callHandleBarsHelper("formatCurrency",i),this.ui.clippedValue.html("$"+i).append(s),this.ui.cardCount.text(n),n>9?this.ui.cardCount.addClass("double"):this.ui.cardCount.removeClass("double")},onWalletClick:function(){o.trigger(Config.Events.NAVIGATE,Config.Paths.WALLET)},removeToast:function(){this.$("#toast").remove()},backToTop:function(){c("html, body").animate({scrollTop:0},800)},setLoading:function(t){this.$el.html().length&&(this.ui.menu.find(".background-loader").remove(),t&&this.ui.menu.append(c(Config.LOADER)))}})}),define("txt!templates/mobile/modal.html",[],function(){return'<header>\n  <h1>Coupon Details</h1>\n  <button type="button" data-dismiss="modal"><span class="inmico inm-ico_x"></span></button>\n</header>\n\n<p class="description">{{description}}</p>\n<small class="terms">{{terms}}</small>\n'}),define("views/mobile/modal",["marionette","controls/vent","txt!templates/mobile/modal.html"],function(t,e,i){"use strict";return t.ItemView.extend({tagName:"aside",id:"inm-modal-default",template:i,initialize:function(t){this.model=new Backbone.Model({description:t.description,terms:t.terms})}})}),define("txt!templates/components/offer.html",[],function(){return'<div class="content">\n\n  <div class="bdg {{badge}}">\n    <div class="tip"></div>\n    {{#compare badge \'new\' operator=\'==\'}}<span>New</span>{{/compare}}\n    {{#compare badge \'expiring\' operator=\'==\'}}<span>Last Chance</span>{{/compare}}\n    {{#compare badge \'just-for-you\' operator=\'==\'}}<span>Just For You</span>{{/compare}}\n  </div>\n\n  <div class="summary">\n\n    <div class="wrapper thumb">\n\n      <img class="offer-image" src="{{imageUrl}}" />\n\n      <div class="offer-pane">\n        <div class="offer-title">\n          <h3 class="savings">{{formatOfferValueText valueText }}</h3>\n          <h4 class="brand">{{ brand }}</h4>\n        </div>\n        {{#if isMobile}}\n        <small class="inm-mobile-only">\n          {{#compare minPurchase 0 operator=\'>\'}}When you buy {{minPurchase}}.<br />{{/compare}}Expires {{ moment expirationDate format=\'MMM D[,] YYYY\' }}.\n        </small>\n        {{/if}}\n      </div>\n\n      {{#if isMobile}}\n      <div class="inm-info inm-mobile-only">\n        <i class="fa fa-info"></i>\n      </div>\n      {{/if}}\n\n    </div>\n\n\n    {{#if notMobile}}\n    <div class="footer inm-desktop-only">\n      <div>{{#compare minPurchase 0 operator=\'>\'}}When you buy {{minPurchase}}.{{/compare}} Expires {{ moment expirationDate format=\'MMM D[,] YYYY\' }}.</div>\n    </div>\n    {{/if}}\n\n  </div>\n\n\n  {{#if clipped}}\n  <div class="btn-clipped"><div><span>clipped</span></div></div>\n    {{#if isTouch}}\n    <div class="inm-info inm-touch">\n      <i class="fa fa-info"></i>\n    </div>\n    {{/if}}\n  {{else}}\n    {{#if notTouch}}\n    <div class="btn-clip"><div><span>clip it</span></div></div>\n    <i class="inmico inm-ico_clip"></i>\n    {{/if}}\n  {{/if}}\n\n  {{#if notTouch}}\n  <div class="details">\n\n    <div class="btn-flip"><div><span>coupon details</span></div></div>\n\n    <div class="wrapper thumb">\n      <h4 class="brand">{{toHTML shortDescription}}</h4>\n      <div class="description">\n        <p class="desc">{{toHTML description}}</p>\n        <p class="terms">{{toHTML terms}}</p>\n      </div>\n    </div>\n\n    <div class="header">\n      <span class="close"><i class="inmico inm-ico_x"></i></span>\n    </div>\n\n  </div>\n  {{/if}}\n\n</div>\n';
}),!function(t,e,i){"use strict";var n,s,r,o,a,l,c,h,u,d,p,f,g,m,v,y,b,x,w,_,k,C,S,T,E,M,A,P,O;k={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},y="scrollbar",v="scroll",h="mousedown",u="mousemove",p="mousewheel",d="mouseup",m="resize",a="drag",x="up",g="panedown",r="DOMMouseScroll",o="down",w="wheel",l="keydown",c="keyup",b="touchmove",n="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,s=null,E=e.requestAnimationFrame,_=e.cancelAnimationFrame,A=i.createElement("div").style,O=function(){var t,e,i,n,s,r;for(n=["t","webkitT","MozT","msT","OT"],t=s=0,r=n.length;r>s;t=++s)if(i=n[t],e=n[t]+"ransform",e in A)return n[t].substr(0,n[t].length-1);return!1}(),P=function(t){return O!==!1&&(""===O?t:O+t.charAt(0).toUpperCase()+t.substr(1))},M=P("transform"),S=M!==!1,C=function(){var t,e,n;return t=i.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=v,e.top="-9999px",i.body.appendChild(t),n=t.offsetWidth-t.clientWidth,i.body.removeChild(t),n},T=function(){var t,i,n;return i=e.navigator.userAgent,!!(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))&&(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),t&&+n>23)},f=function(){function l(n,r){this.el=n,this.options=r,s||(s=C()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.$content=this.$el.children("."+r.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return l.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===r)(e===o&&t.originalEvent.detail>0||e===x&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===p){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===o&&t.originalEvent.wheelDelta<0||e===x&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},l.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},l.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},l.prototype.setOnScrollStyles=function(){var t;S?(t={},t[M]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},E?this.scrollRAF||(this.scrollRAF=E(function(e){return function(){e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},l.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.pane.addClass("active"),t.doc.bind(u,t.events[a]).bind(d,t.events[x]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.offsetY,t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(u,t.events[a]).unbind(d,t.events[x]),!1}}(this),resize:function(t){return function(){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,o),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,x),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var i;if(null!=e)return i=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,i&&(t.sliderY+=-i/3),t.scroll(),!1}}(this)}},l.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(m,t[m]),this.iOSNativeScrolling||(this.slider.bind(h,t[o]),this.pane.bind(h,t[g]).bind(""+p+" "+r,t[w])),this.$content.bind(""+v+" "+p+" "+r+" "+b,t[v])},l.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(m,t[m]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+v+" "+p+" "+r+" "+b,t[v])},l.prototype.generate=function(){var t,i,n,r,o,a,l;return r=this.options,a=r.paneClass,l=r.sliderClass,t=r.contentClass,(o=this.$el.children("."+a)).length||o.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===s&&T()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/\D+/g,""),i={right:-14,paddingRight:+n+14}):s&&(i={right:-s},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},l.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},l.prototype.reset=function(){var t,e,i,r,o,a,l,c,h,u,d,p;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,r=t.style,o=r.overflowY,n&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+s,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>u?u:t.scrollHeight)),l=this.pane.outerHeight(!1),h=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+h+a,p=Math.round(c/e*c),p<this.options.sliderMinHeight?p=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&p>this.options.sliderMaxHeight&&(p=this.options.sliderMaxHeight),o===v&&r.overflowX!==v&&(p+=s),this.maxSliderTop=c-p,this.contentHeight=e,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=p,this.slider.height(p),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&o!==v?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&o===v?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),("static"===i||"relative"===i)&&(d=parseInt(this.$content.css("right"),10),d&&this.$content.css({right:"",marginRight:d})),this)},l.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop((this.paneHeight-this.contentHeight+s)*this.sliderY/this.maxSliderTop*-1),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},l.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(p),this.stop().restore(),this):void 0},l.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(p),this.stop().restore(),this):void 0},l.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},l.prototype.stop=function(){return _&&this.scrollRAF&&(_(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},l.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},l.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},l}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=t.extend({},k,e),this.nanoscroller=n=new f(this,i)),e&&"object"==typeof e){if(t.extend(n.options,e),null!=e.scrollBottom)return n.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return n.scrollTop(e.scrollTop);if(e.scrollTo)return n.scrollTo(e.scrollTo);if("bottom"===e.scroll)return n.scrollBottom(0);if("top"===e.scroll)return n.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return n.scrollTo(e.scroll);if(e.stop)return n.stop();if(e.destroy)return n.destroy();if(e.flash)return n.flash()}return n.reset()})},t.fn.nanoScroller.Constructor=f}(jQuery,window,document),define("nanoscroller",function(){}),define("components/offer",["marionette","models/auth","controls/vent","views/mobile/modal","txt!templates/components/offer.html","nanoscroller"],function(t,e,i,n,s){"use strict";return t.ItemView.extend({className:"offer col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0 col-md-4 col-lg-3",template:s,ui:{summary:".summary",details:".details",thumbnail:".summary .thumb"},modelEvents:{change:"onChange"},events:{"click .btn-clip":"clipOffer","click .btn-flip":"showDetails","click .close":"hideDetails","transitionend .btn-clip":"onMenuTransition"},initialize:function(){this.isMobile=Config.isMobileCSS(),this.useTouch=!1,this.templateHelpers={isMobile:!1,notMobile:!0,isTouch:!1,notTouch:!0},this.isMobile===!0?(this.$el.addClass("inm-mobile"),this.templateHelpers.isMobile=!0,this.templateHelpers.notMobile=!1):(this.templateHelpers.isMobile=!1,this.templateHelpers.notMobile=!0),Modernizr.touch?(this.useTouch=!0,this.templateHelpers.isTouch=!0,this.templateHelpers.notTouch=!1):(this.templateHelpers.isTouch=!1,this.templateHelpers.notTouch=!0),this.isMobile!==!0&&Modernizr.touch!==!0||(this.events.click="clipOffer",this.events["click .inm-info"]="onInfoClick")},onInfoClick:function(t){t.stopPropagation(),i.trigger(Config.Events.MODAL,new n({description:this.model.attributes.description,terms:this.model.attributes.terms}))},onRender:function(){this.model.get("clipped")?this.$el.addClass("clipped"):this.$el.removeClass("clipped"),this.$el.attr("id",this.model.get("mdid"))},isMenuVisible:!Modernizr.touch,onMenuTransition:function(){Modernizr.touch&&(this.isMenuVisible=!this.isMenuVisible)},showDetails:function(){this.isMenuVisible&&this.$el.addClass("info")},hideDetails:function(){this.$el.removeClass("info")},onChange:function(){if(this.model.hasChanged("mdid")){var t=this;this.$el.fadeTo("slow",0,function(){t.render().$el.removeClass("info").css("opacity",0).fadeTo("slow",1)})}else this.render()},clipOffer:function(t){if(!this.model.get("clipped")&&(this.isMobile===!0||this.useTouch===!0||this.isMenuVisible))return e.isAuthenticated()?void i.trigger(Config.Events.CLIP,this):($.jStorage.set("dest",window.location.hash),void i.trigger(Config.Events.NAVIGATE,Config.Paths.REGISTER))}})}),define("txt!templates/components/offers.html",[],function(){return'<div class="offers-container">\n\n</div>\n\n<div class="row">\n    <div class="col-sm-12 col-md-6 col-md-offset-3 load-container">\n        <button id="load-more" class="btn btn-lg btn-primary" style="display: none">Load More Digital Coupons</button>\n    </div>\n</div>\n'}),define("components/offers",["marionette","components/offer","controls/vent","txt!templates/components/offers.html","jquery"],function(t,e,i,n,s){"use strict";var r=t.ItemView.extend({id:"empty",className:"col-xs-12",template:'<h3 class="empty-text">No matching items found.</h3>',initialize:function(){Config.isMobileCSS()===!0&&this.$el.addClass("inm-mobile")}});return t.CompositeView.extend({id:"offers",className:"clearfix",template:n,itemViewContainer:".offers-container",itemView:e,emptyView:r,ui:{clippedcount:".clipped-count",loadMoreButton:"#load-more",savingsHeader:".savings"},events:{"click #load-more":"loadMore"},initialize:function(){this.loader=s(Config.LOADER),this.isMobile=Config.isMobileCSS(),Modernizr.touch&&this.$el.addClass("touch"),this.isMobile===!0&&this.$el.addClass("inm-mobile")},addChildView:function(){this.isBuffering||this.startBuffering(),t.CompositeView.prototype.addChildView.apply(this,arguments)},onShow:function(){this.listenTo(this.collection,"sync",this.onSync),_.bindAll(this,"onScroll")},onSync:function(){this.loader.remove(),this.isBuffering&&(s(this.elBuffer.children).hide().fadeIn(),this.endBuffering());var t=this.collection.hasMore;Config.SCROLL_PAGINATION&&t?(this.ui.loadMoreButton.hide(),s(window).on("scroll",this.onScroll),setTimeout(function(){s(window).trigger("scroll")},100)):this.ui.loadMoreButton.toggle(t)},onScroll:function(){var t=this.$el.height()+this.$el.offset().top;this.collection.hasMore?s(window).scrollTop()>t-s(window).height()-560&&(s(window).off("scroll",this.onScroll),this.loadMore()):s(window).off("scroll",this.onScroll)},onClose:function(){s(window).off("scroll",this.onScroll)},loadMore:function(){this.ui.loadMoreButton.hide().parent().append(this.loader),i.trigger(Config.Events.LOAD_MORE)}})}),define("models/offer",["backbone","moment"],function(t,e){"use strict";return t.Model.extend({idAttribute:"mdid",urlRoot:"/offers",defaults:{mdid:0,brand:"",description:"",shortDescription:"",terms:"",imageUrl:"",value:0,valueText:"",redeemedDate:null,expirationDate:null,clipStartDate:null,clipEndDate:null,minPurchase:0,offerSortValue:0,keywords:[],category:"",selected:!1},isNew:function(){return!0},parse:function(t){if(!t||!t.mdid)return null;var i=-((new Date).getTimezoneOffset()/60);i=i>0?Math.floor(i):Math.ceil(i);var n=i<0?"-":"+";if(i=Math.abs(i),n=n+(i>9?i:"0"+i)+"00",t.redeemedDate=t.redeemedDate&&t.redeemedDate.iso?Config.parseDate(t.redeemedDate.iso.substr(0,t.redeemedDate.iso.length-5)+n):null,t.expirationDate=t.expirationDate&&t.expirationDate.iso?Config.parseDate(t.expirationDate.iso.substr(0,t.expirationDate.iso.length-5)+n):null,t.activityDate=t.redeemedDate||t.expirationDate,t.clipStartDate=t.clipStartDate&&t.clipStartDate.iso?Config.parseDate(t.clipStartDate.iso.substr(0,t.clipStartDate.iso.length-5)+n):null,t.clipEndDate=t.clipEndDate&&t.clipEndDate.iso?Config.parseDate(t.clipEndDate.iso.substr(0,t.clipEndDate.iso.length-5)+n):null,t.clipped){t.badge="expiring"==t.badge?"":t.badge;var s=e(t.expirationDate);e().isBetween(e(s).subtract(Config.BADGE_EXPIRING_DAYS,"days"),s)&&(t.badge="expiring")}return t},clip:function(t){t=t||{clipped:!0};var e={url:"/offers/clip",data:{id:this.id}};return e.data=t.data?_.extend(e.data,t.data):e.data,this.save(t,e)},toggle:function(){return this.set("selected",!this.attributes.selected),this.get("selected")}})}),define("collections/offers",["backbone","models/offer"],function(t,e){"use strict";return t.Collection.extend({url:"/offers",model:e,currentPageClipCount:0,initialize:function(){this.page=0,this.hasMore=!0,this.listenTo(this,"change:clipped",function(t,e){e?this.currentPageClipCount=this.currentPageClipCount+1:this.currentPageClipCount=this.currentPageClipCount-1})},fetch:function(e){return this.hasMore=!1,e=e||{},e.data=e.data||{},e.cache=!1,e.data.skip=e.next?this.page*Config.PAGE_SIZE-this.currentPageClipCount:0,e.data.limit=e.data.limit||Config.PAGE_SIZE+1,e.reset=!e.next,this.currentPageClipCount=e.next?this.currentPageClipCount:0,e.remove=!1,t.Collection.prototype.fetch.call(this,e)},parse:function(t,e){var i=Config.getURLParam({search:e.data},"limit");return Config.DEBUG&&e.next&&t.splice(0,e.data.skip),this.page=e.reset?1:this.page+1,i&&parseInt(i)===Config.PAGE_SIZE+1&&(this.hasMore=t.length>Config.PAGE_SIZE,this.hasMore)?t.slice(0,-1):t}})}),define("models/category",["backbone","collections/offers"],function(t,e){"use strict";return t.Model.extend({idAttribute:"key",defaults:{key:"",name:"",value:0,selected:!1,count:0},parse:function(t){return t.count=t.count||t.active,t},initialize:function(){var t=this;this.offers=new e,this.offers.on("add",function(){t.set("count",this.length)}),this.get("objectId")&&(this.set("id",this.get("objectId")),this.unset("objectId"))},toggle:function(){return this.set("selected",!this.attributes.selected),this.get("selected")},toJSON:function(e){var i=t.Model.prototype.toJSON.call(this,e);return i.offers=this.offers.toJSON(),i}})}),define("collections/categories",["backbone","models/category"],function(t,e){"use strict";return t.Collection.extend({url:"/offers/categories",model:e,comparator:"name",fetch:function(e){return e=e||{},e.cache=!1,t.Collection.prototype.fetch.call(this,e)},parse:function(t){for(var e={name:"All Digital Coupons",key:"all",active:0,value:0,selected:!0},i=0;i<t.length;i++){var n=t[i];e.active+=n.active,e.value+=n.value}return[e].concat(t)},getSummationModel:function(){return this.at(0)},selectAll:function(t,e){t="undefined"==typeof t||!!t;for(var i=1;i<this.length;i++)this.at(i).set("selected",t,e)},addOffer:function(t,e){var i=this.add(t.get("category"),e);return i?i.offers.add(t):t}})}),define("models/keyword",["backbone"],function(t){"use strict";return t.Model.extend({idAttribute:"name",defaults:{name:"",selected:!1},parse:function(t){return{name:t.charAt(0).toUpperCase()+t.substring(1)}},toggle:function(){return this.set("selected",!this.attributes.selected),this.get("selected")}})}),define("collections/keywords",["backbone","models/keyword"],function(t,e){"use strict";return t.Collection.extend({url:"/offers/keywords",model:e,comparator:"name",fetch:function(e){return e=e||{},e.data=e.data||{},e.cache=!1,t.Collection.prototype.fetch.call(this,e)},selectAll:function(t,e){t="undefined"==typeof t||!!t,this.invoke("set","selected",t,e)}})}),define("models/sort",["backbone"],function(t){"use strict";return t.Model.extend({idAttribute:"id",defaults:{id:"",sort:"",selected:!1},select:function(){return this.get("selected")===!0||(this.set("selected",!0),this.get("selected"))}})}),define("collections/sorts",["backbone","models/sort"],function(t,e){"use strict";return t.Collection.extend({model:e,initialize:function(){this.listenTo(this,"change:selected",function(t,e){if(t.get("selected")){var i=this.filter(function(e){return t.id!==e.id&&e.get("selected")});void 0!==i&&_.each(i,function(t){t.set({selected:!1})})}}),Config.ENABLE_RELEVANT&&(Config.PERSONALIZED_SORT?this.add(Config.PERSONALIZED_SORT):this.add({id:"relevant",sort:"relevant,desc"})),this.add([{id:"desc",sort:"desc"},{id:"asc",sort:"asc"},{id:"popular",sort:"popular"},{id:"brand",sort:"brand"},{id:"brandDesc",sort:"-brand"},{id:"value",sort:"value"},{id:"valueDesc",sort:"-value"},{id:"mdid",sort:"mdid"},{id:"mdidDesc",sort:"-mdid"},{id:"type",sort:"type"},{id:"typeDesc",sort:"-type"},{id:"clipStartDate",sort:"clipStartDate"},{id:"clipStartDateDesc",sort:"-clipStartDate"},{id:"clipEndDate",sort:"clipEndDate"},{id:"clipEndDateDesc",sort:"-clipEndDate"},{id:"expiring",sort:"expirationDate"},{id:"expiringDesc",sort:"-expirationDate"}])}})}),define("models/menu",["backbone","collections/categories","collections/keywords","collections/sorts","models/auth","jquery","jstorage"],function(t,e,i,n,s,r){"use strict";return t.Model.extend({url:"/user/clipped/summary",defaults:{clippedCount:0,clippedValue:0,totalCount:0,totalValue:0,selectedCount:0,selectedValue:0,categoriesCount:0,profileComplete:!0},initialize:function(){this.isAuthenticated=s.isAuthenticated(),this.params={keywords:[],categories:[],contextTypes:[],groups:"",sort:"desc",url:""},this.wallet=r.jStorage.get("wallet",{}),this.set(this.wallet),this.listenTo(this,"change:clippedCount",function(){this.wallet.clippedCount=this.get("clippedCount"),this.wallet.clippedValue=this.get("clippedValue"),r.jStorage.set("wallet",this.wallet)}),this.listenTo(this,"change:totalCount",function(){this.wallet.totalCount=this.get("totalCount"),this.wallet.totalValue=this.get("totalValue"),r.jStorage.set("wallet",this.wallet)}),this.listenTo(this,"change:profileComplete",function(){this.wallet.profileComplete=this.get("profileComplete"),r.jStorage.set("wallet",this.wallet)}),this.categories=new e,this.listenTo(this.categories,"sync",function(){var t=this.categories.getSummationModel();this.set({totalCount:t.get("count"),totalValue:t.get("value")})}),this.listenTo(this.categories,"change:selected",function(t,e){var i=this.categories.getSummationModel(),n=!1;t.id===i.id?(e&&this.categories.selectAll(!1,{silent:!0}),n=!0):n=!e&&this.categories.where({selected:!0})<=1,i.set("selected",n,{silent:!0}),n||this.keywords.selectAll(!1),this.updateSelectedCategories()}),this.keywords=new i,this.listenTo(this.keywords,"change:selected",function(t,e){var i=t.id.toLowerCase(),n=this.params.keywords.indexOf(i);e&&n===-1?(this.params.keywords.push(i),this.categories.getSummationModel().set("selected",!0)):!e&&n>=0&&this.params.keywords.splice(n,1)}),this.sorts=new n,this.listenTo(this.sorts,"change:selected",function(t,e){e&&(this.params.sort=t.get("sort"),this.params.url=t.get("url"),this.params.contextTypes=t.get("contextTypes"))}),this.isAuthenticated&&this.sorts.get(Config.DEFAULT_SORT)?this.sorts.get(Config.DEFAULT_SORT).select():this.sorts.get("desc").select()},fetch:function(e){var i=this,n=t.Model.prototype.fetch.call(this,_.extend({},e,{cache:!1})),s=this.categories.fetch(e),o=this.keywords.fetch(e);return r.when(n,s,o).done(function(){i.updateSelectedCategories()})},updateSelectedCategories:function(){var t=this.categories.getSummationModel(),e={selectedCount:0,selectedValue:0,categoriesCount:0},i=[];return this.categories.getSummationModel().get("selected")?e.selectedValue=t.get("value"):this.categories.each(function(t){t.get("selected")&&(e.categoriesCount++,e.selectedCount+=t.get("count"),e.selectedValue+=t.get("value"),i.push(t.id))}),this.set(e),this.params.categories=i,this}})}),define("txt!templates/components/carousel.html",[],function(){return'<div id="carousel-featured-banner" class="carousel slide">\n  <ol class="carousel-indicators">\n  </ol>\n  <div class="carousel-inner"></div>\n  <a class="left carousel-control" href="#carousel-featured-banner" role="button" data-slide="prev">\n    <span class="fa fa-angle-left" aria-hidden="true"></span><span class="sr-only">Previous</span>\n  </a>\n  <a class="right carousel-control" href="#carousel-featured-banner" role="button" data-slide="next">\n    <span class="fa fa-angle-right" aria-hidden="true"></span><span class="sr-only">Next</span>\n  </a>\n</div>\n'}),define("components/carousel",["marionette","controls/vent","txt!templates/components/carousel.html","jquery"],function(t,e,i,n){"use strict";return t.CompositeView.extend({id:"carousel-featured-wrapper",template:i,ui:{carousel:"#carousel-featured-banner",indicators:".carousel-indicators",controls:".carousel-control"},initialize:function(){Config.featuredData().done(function(){Config.CAROUSEL_DATA&&Config.CAROUSEL_DATA.banners&&_.each(Config.CAROUSEL_DATA.banners,function(t){this.collection.model.prototype.parse(t)&&this.collection.add(t)}.bind(this)),this.params=_.extend({interval:7e3,pause:"none",wrap:!0},Config.CAROUSEL_DATA.config)}.bind(this))},startCarousel:function(t){this.collection.length>1&&this.ui.carousel.inCarousel(this.params)},onClose:function(){n(this.ui.carousel).inCarousel("pause").off(".carousel").removeData("bs.carousel")},appendHtml:function(t,e){t.$(".carousel-inner").append(e.el),this.startCarousel(e)}})}),define("txt!templates/components/banner.html",[],function(){return'<div class="banner {{type}}" style="background-image: url(\'{{src}}\');">\n  {{#compare type "link" operator="=="}}<a href="{{value}}" target="_blank">{{/compare}}\n    <div class="hgroup">\n      <h1>{{title}}</h1>\n    </div>\n    <div class="carousel-caption">\n      {{#if caption}}<div class=\'col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-lg-4 col-lg-offset-4\'>{{toHTML caption}}</div>{{/if}}\n      {{#if btnText}}<div class=\'col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-lg-4 col-lg-offset-4\'><br /><br /><div class="btn btn-secondary btn-lg">{{btnText}}</div></div>{{/if}}\n    </div>\n  {{#compare type "link" operator="=="}}</a>{{/compare}}\n</div>\n'}),define("components/banner",["marionette","controls/vent","models/auth","txt!templates/components/banner.html"],function(t,e,i,n){"use strict";return t.ItemView.extend({tagName:"div",className:function(){var t="item";return this.model.get("active")&&(t+=" active"),t},template:n,triggers:{"click .category":"banner:category"}})}),define("models/banner",["backbone","moment"],function(t,e){"use strict";return t.Model.extend({idAttribute:"id",defaults:{id:"",startDate:"",endDate:"",type:"none",value:"",src:"",srcMobile:"",alt:""},parse:function(t){return t?(t.startDate=t.startDate?e(t.startDate,"MM/DD/YYYY h:mm"):null,t.endDate=t.endDate?e(t.endDate,"MM/DD/YYYY h:mm"):null,e().isBetween(t.startDate,t.endDate,null,"[)")?t:null):null}})}),define("collections/banners",["backbone","models/banner"],function(t,e){"use strict";return t.Collection.extend({model:e,comparator:"id"})}),define("txt!templates/modals/error.html",[],function(){return'<div class="modal-header">\n    <h4 class="modal-title">\n        <i class="fa fa-warning"></i>&nbsp;&nbsp;Oops!\n    </h4>\n</div>\n\n<div class="modal-body">\n  {{{errorText}}}\n</div>\n\n<div class="modal-footer">\n    <button class="cancel btn btn-primary" data-dismiss="modal">\n        Cancel\n    </button>\n    <button class="retry btn btn-success" data-dismiss="modal">\n        <i class="fa fa-refresh"></i> Retry\n    </button>\n</div>\n'}),define("modals/error",["marionette","controls/vent","txt!templates/modals/error.html"],function(t,e,i){"use strict";return t.ItemView.extend({id:"error-modal",className:"modal-content",template:i,events:{"click .cancel":"onCancelClick","click .retry":"onRetryClick"},errorText:"An error occurred",initialize:function(){var t=this.options.status?this.options.status:null,e=this.options.url?this.options.url:null;this.errorText=Config.getErrorText(t,e,null)},onShow:function(){this.$(".modal-body").append(this.errorText)},onCancelClick:function(){e.trigger(Config.Events.NAVIGATE,Config.Events.HOME)},onRetryClick:function(){e.trigger(Config.Events.RELOAD)}})}),define("txt!templates/home.html",[],function(){return'<section class="inm-header menu-box"></section>\n\n<section class="content container-fluid"></section>\n'}),define("views/home",["marionette","components/unauthenticated","components/menu","components/offers","collections/offers","models/menu","components/carousel","components/banner","collections/banners","modals/error","models/auth","controls/vent","txt!templates/home.html","jquery"],function(t,e,i,n,s,r,o,a,l,c,h,u,d,p){"use strict";return t.Layout.extend({id:"home",template:d,regions:{header:"section.inm-header",content:"section.content",features:"section.features"},onShow:function(){if(this.isAuthenticated=h.isAuthenticated(),this.menu=new r,this.offers=new s,this.options.category&&this.menu.params.categories.push(this.options.category),this.contentView=new n({collection:this.offers}),this.headerView=this.isAuthenticated?new i({model:this.menu}):new e({model:this.menu}),Config.FEATURED_CAROUSEL_ENABLED){var t=this;this.banners=new l,this.carouselView=new o({collection:this.banners,itemView:a}),this.carouselView.on("itemview:banner:category",function(e){if(t.isAuthenticated){var i=e.model.get("value"),n=_.isArray(i)?i:[i];n&&(t.headerView.categoriesView.collection.selectAll(!1),_.forEach(n,function(e){t.headerView.categoriesView.collection.findWhere({key:e}).set({selected:!0})}),u.trigger(Config.Events.REFRESH))}else u.trigger(Config.Events.NAVIGATE,Config.Paths.REGISTER)})}this.listenTo(u,Config.Events.REFRESH,this.refreshOffers),this.listenTo(u,Config.Events.LOAD_MORE,this.loadMoreOffers),this.listenTo(u,Config.Events.CLIP,this.clipOffer),this.header.show(this.headerView),this.content.show(this.contentView),Config.FEATURED_CAROUSEL_ENABLED&&(this.header.$el.after(p("<section>").attr({id:"features"})),this.addRegions({features:"#features"}),this.features.show(this.carouselView)),this.loadData()},onClose:function(){this.hasActiveRequest()&&_.isFunction(this.currentRequest.abort)&&this.currentRequest.abort()},loadData:function(){this.hasActiveRequest()&&this.currentRequest.abort();var t=this;if((this.isAuthenticated?this.menu.fetch():this.menu.categories.fetch()).done(function(){if(t.options.category){var e=t.menu.categories.get(t.options.category);if(!e)return t.options.category=null,t.menu.params.categories=[],void t.loadData();e.set("selected",!0)}t.headerView.render()}),this.contentView.$el.html(p(Config.LOADER)),Config.TARGETED_OFFERS&&this.options.targeted&&this.isAuthenticated){var e=this.menu.params,i={data:e};e.hasOwnProperty("url")&&e.url&&(i.url=e.url),this.targetedOffers=new s;var n={limit:1e3,groups:"available,clipped"};_.isBoolean(this.options.targeted)||(n.matchRunId=this.options.targeted),this.currentRequest=p.when(this.offers.fetch(i),this.targetedOffers.fetch({url:"/offers/targeted",data:n}).fail(function(){u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)})).done(function(e,i){t.targetedOffers.length>0&&(t.targetedOffers.models.reverse(),t.targetedOffers.each(function(e){e.set({badge:"just-for-you"}),t.offers.remove(e,{silent:!0}),t.offers.unshift(e,{silent:!0})})),t.contentView.render().$el.hide().fadeIn(function(){t.isAuthenticated&&u.trigger(Config.Events.START_TOUR)})})}else{var e=this.menu.params,i={data:e};e.hasOwnProperty("url")&&e.url&&(i.url=e.url),this.currentRequest=this.offers.fetch(i).done(function(){t.contentView.render().$el.hide().fadeIn(function(){t.isAuthenticated&&u.trigger(Config.Events.START_TOUR)})})}},refreshOffers:function(){this.hasActiveRequest()&&this.currentRequest.abort();var t=this,e=this.menu.params,i={data:e};this.headerView.setLoading&&this.headerView.setLoading(!0),e.hasOwnProperty("url")&&e.url&&(i.url=e.url),this.currentRequest=this.offers.fetch(i).done(function(){t.headerView.setLoading&&t.headerView.setLoading(!1)})},loadMoreOffers:function(){if(!this.hasActiveRequest()){var t=this.menu.params,e={data:t,next:!0};t.hasOwnProperty("url")&&t.url&&(e.url=t.url),this.currentRequest=this.offers.fetch(e)}},clipOffer:function(t){var e=this.menu,i=(this.offers,t.model),n=e.get("clippedCount")+1,s=e.get("clippedValue")+i.get("value"),r=t.ui.thumbnail.find("img"),o=r.clone();o.css(_.extend({position:"fixed",zIndex:5e3,width:r.outerWidth(),height:r.outerHeight()},Config.scrollOffset(r))).appendTo(this.$el).animate(_.extend({width:0,height:0},Config.scrollOffset(this.$("#wallet-button"))),500,function(){o.remove(),e.set({clippedCount:n,clippedValue:s})}),e.set({clippedCount:n,clippedValue:s}),i.clip().done(function(t,s,r){if(t.clipped===!1){this.set("clipped",!1);var o={status:410,url:"/offers/clip"};u.trigger(Config.Events.MODAL,new c(o))}i.set("clipped",!0),n===e.get("clippedCount")&&e.set({clippedCount:t.clippedCount||0,clippedValue:t.clippedValue||0})})},hasActiveRequest:function(){return this.currentRequest&&"pending"===this.currentRequest.state()}})}),define("models/feature",["backbone","controls/config"],function(t,e){"use strict";return t.Model.extend({idAttribute:"featureId",urlRoot:"/feature",defaults:{hero:{}},initialize:function(){
this.attributes=e.FEATURE_DATA[this.get("featureId")],this.attributes.scrollPagination=e.SCROLL_PAGINATION},getTags:function(t){return t||this.get("tags")},getMediaProperty:function(t){return t||this.get("mpid")},getOfferIds:function(t){var t=t||this.get("offers");try{switch(typeof t){case"string":return t;case"object":if("undefined"!=typeof t.length)return t.join(",")}return!1}catch(e){throw e}}})}),define("txt!templates/feature.html",[],function(){return'<section class="feature content">\n\n    <div class="color-bar-one"></div>\n\n    <header>\n\n        {{#if featuresInHeader}}\n        <div id="featured-offers"></div>\n        {{/if}}\n\n        {{#if hero.url}}\n        <a href="{{hero.url}}" style="display: block; position: relative;">\n        {{/if}}\n\n            <div class="feature-banner" style="background-image: url({{hero.image}}); height: {{hero.height}}px; {{emMaxHeight hero.height}}"></div>\n\n        {{#if hero.url}}\n        </a>\n        {{/if}}\n\n    </header>\n\n    {{#if clipall}}\n    <button id="button-clip-all" type="button" class="btn btn-default">Clip All</button>\n    {{/if}}\n\n    <div class="content container-fluid clearfix">\n\n        <div id="home">\n\n            <div id="offers"class="row clearfix">\n\n                {{^featuresInHeader}}\n                <h2 id="savings-banner"></h2>\n                {{/featuresInHeader}}\n\n                <div class="feature-offers offers-container"></div>\n            </div>\n\n            <div class="row buttons clearfix" style="display: none;">\n                <div class="col-12">\n                    <button id="btn-more" class="btn btn-default bg-brand-lolite">{{buttons.more.text}}</button>\n                    <button id="btn-clipall" class="btn btn-default bg-brand-hilite">{{buttons.clipall.text}}</button>\n                </div>\n            </div>\n\n            <div class="row clearfix">\n                <div class="col-sm-12 col-md-6 col-md-offset-3 load-container">\n                    <button id="load-more" class="btn btn-lg btn-primary" style="display: none">Load More Digital Coupons</button>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n\n</section>\n'}),define("txt!templates/components/feature-offer.html",[],function(){return'<div class="content">\n\n  <div class="summary">\n\n    <div class="wrapper thumb">\n\n      <img class="offer-image" src="{{imageUrl}}" />\n\n      <div class="offer-pane">\n        <div class="offer-title">\n          <h3 class="savings">{{formatOfferValueText valueText }}</h3>\n          <h4 class="brand">{{ brand }}</h4>\n        </div>\n        {{#if isMobile}}\n        <small class="inm-mobile-only">\n          {{#compare minPurchase 0 operator=\'>\'}}When you buy {{minPurchase}}.<br />{{/compare}}Expires {{ moment expirationDate format=\'MMM D[,] YYYY\' }}.\n        </small>\n        {{/if}}\n      </div>\n\n      {{#if isMobile}}\n      <div class="inm-info inm-mobile-only">\n        <i class="fa fa-info"></i>\n      </div>\n      {{/if}}\n\n    </div>\n\n\n    {{#if notMobile}}\n    <div class="footer inm-desktop-only">\n      <div>{{#compare minPurchase 0 operator=\'>\'}}When you buy {{minPurchase}}.{{/compare}} Expires {{ moment expirationDate format=\'MMM D[,] YYYY\' }}.</div>\n    </div>\n    {{/if}}\n\n  </div>\n\n\n  {{#if clipped}}\n  <div class="btn-clipped"><div><span>clipped</span></div></div>\n    {{#if isTouch}}\n    <div class="inm-info inm-touch">\n      <i class="fa fa-info"></i>\n    </div>\n    {{/if}}\n  {{else}}\n    {{#if notTouch}}\n    <div class="btn-clip"><div><span>clip it</span></div></div>\n    <i class="inmico inm-ico_clip"></i>\n    {{/if}}\n  {{/if}}\n\n  {{#if notTouch}}\n  <div class="details">\n\n    <div class="btn-flip"><div><span>coupon details</span></div></div>\n\n    <div class="wrapper thumb">\n      <h4 class="brand">{{toHTML shortDescription}}</h4>\n      <div class="description">\n        <p class="desc">{{toHTML description}}</p>\n        <p class="terms">{{toHTML terms}}</p>\n      </div>\n    </div>\n\n    <div class="header">\n      <span class="close"><i class="inmico inm-ico_x"></i></span>\n    </div>\n\n  </div>\n  {{/if}}\n\n</div>\n'}),define("views/feature",["marionette","controls/config","models/feature","collections/offers","components/offer","components/offers","models/auth","controls/vent","txt!templates/feature.html","txt!templates/components/feature-offer.html","jquery"],function(t,e,i,n,s,r,o,a,l,c,h){"use strict";var u=s.extend({tagName:"li",className:"feature offer",template:c}),d=t.CollectionView.extend({tagName:"ul",itemViewContainer:"#featured-offers",itemView:u}),p=t.ItemView.extend({id:"empty",className:"col-xs-12",template:'<h3 class="empty-text">These offers are not currently available.</h3>'});return r.extend({id:"",template:l,emptyView:p,ui:_.extend({btnMore:"#btn-more",btnClipall:"#btn-clipall",wallet:"#wallet-button",cardCount:"#inmar-clipped-coupon-count",clippedValue:"#inm-clipped-value"},r.prototype.ui),templateHelpers:_.extend({featuresInHeader:e.ENABLE_FEATURES_IN_HEADER,emMaxHeight:function(t){return"max-height: ".concat(t/16).concat("em;")}},r.prototype.templateHelpers),events:_.extend({"click #wallet-button":"onWalletClick","click #btn-more":"onBtnMoreClick","click #btn-clipall":"onBtnClipallClick"},r.prototype.events),initialize:function(){this.loader=h(e.LOADER),this.isMobile=e.isMobileCSS(),this.model=new i({featureId:this.options.featureId,urlRoot:"/feature/"+this.options.featureId}),this.templateHelpers={isAuthenticated:o.isAuthenticated()},this.data=this.data||{},this.data.ids=this.model.getOfferIds(),this.data.mediaPropertyId=this.model.getMediaProperty(),this.data.tags=this.model.getTags(),null!=e.queryStringParameters.tags&&(this.data.tags=e.queryStringParameters.tags),this.data.sort="desc",this.data.limit=1e3,this.collection=new n({data:this.data}),e.ENABLE_FEATURES_IN_HEADER===!0&&(this.featuredOffers=new n),this.itemView.prototype.className=["offer","col-xs-10","col-xs-offset-1","col-sm-6","col-sm-offset-0","col-md-3","col-lg-3"].join(" ")},onShow:function(){Modernizr.touch&&this.$el.find("#offers").addClass("touch"),this.isMobile===!0&&this.$el.find("#offers").addClass("inm-mobile"),h("#savings-banner").removeClass("loaded").html(this.model.attributes.hero.title),h(this.itemViewContainer).html(this.loader),this.loadData(),this.listenTo(a,e.Events.CLIP,this.clipOffer),r.prototype.onShow.call(this);var t=h("#feature-banner");h("html,body").animate({scrollTop:t.offset().top},"slow")},onBtnMoreClick:function(){a.trigger(e.Events.NAVIGATE,e.Paths.HOME)},onWalletClick:function(){a.trigger(e.Events.NAVIGATE,e.Paths.WALLET)},clipAll:function(){for(var t=[],e=4,i=0,n=0;n<this.collection.length;n++){var s,r=this.collection.at(n);if(r.get("clipped")!==!0&&(s=r.clip()),t.length===e){console.log("too many failures! aborting for the good of the people.",t);break}s.then(function(t,e,n){t.clipped===!0&&(i+=1,r.set("clipped",!0))}),s.fail=function(e,i,n){n&&"BAD_FEATURE_OFFERS_CLIP"===n.internalErrorCode&&(t.push(r),r.set("clipped",!1))}}},onBtnClipallClick:function(){this.clipAll()},updateTotalValue:function(){if(this.collection.length>0){var t="$",e=this.collection.chain().map(function(t){return parseInt(t.attributes.value,10)}).reduce(function(t,e){return t+e}).value()/100;e>0?(e!==parseInt(e,10)&&(e=e.toFixed(2)),h("#savings-banner .savings").text(t.concat(e)).parent().addClass("loaded")):h("#savings-banner").hide()}},loadData:function(){return this.hasActiveRequest()&&this.currentRequest.abort(),this.data.ids===!1&&this.data.mediaPropertyId===!1?(this.$el.find("header").hide(),void h(this.itemViewContainer).hide().html(this.emptyView.render().el).fadeIn()):void(this.currentRequest=this.collection.fetch({data:this.data}).done(function(t){"undefined"!=typeof this.model.attributes.hero.offers&&e.ENABLE_FEATURES_IN_HEADER===!0&&(this.collection.each(function(t){this.model.attributes.hero.offers.indexOf(t.id.toString())!==-1&&(this.featuredOffers.add(this.collection.get(t.id)),this.collection.remove(t.id))},this),this.featuredView=new d({collection:this.featuredOffers}),h("#featured-offers").hide().html(this.featuredView.render().el).fadeIn()),this.updateTotalValue(),h(".row.buttons").fadeIn()}.bind(this)))},hasActiveRequest:function(){return this.currentRequest&&"pending"===this.currentRequest.state()},clipOffer:function(t){var e=this.model.getMediaProperty()?{clipped:!0,data:{mediaPropertyId:this.model.getMediaProperty()}}:null;t.model.clip(e).done(function(e){t.model.set("clipped",e.clipped)})}})}),!function(t,e){if("function"==typeof define&&define.amd)define("serialize-object",["jquery","exports"],function(i,n){e(t,n,i)});else if("undefined"!=typeof exports){var i=require("jquery");e(t,exports,i)}else t.FormSerializer=e(t,{},t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i){var n=e.FormSerializer=function s(t){function e(t,e,i){return t[e]=i,t}function i(t,i){for(var r,o=t.match(s.patterns.key);void 0!==(r=o.pop());)if(s.patterns.push.test(r)){var a=n(t.replace(/\[\]$/,""));i=e([],a,i)}else s.patterns.fixed.test(r)?i=e([],r,i):s.patterns.named.test(r)&&(i=e({},r,i));return i}function n(t){return void 0===h[t]&&(h[t]=0),h[t]++}function r(e){if(!s.patterns.validate.test(e.name))return this;var n=i(e.name,e.value);return c=t.extend(!0,c,n),this}function o(e){if(!t.isArray(e))throw new Error("formSerializer.addPairs expects an Array");for(var i=0,n=e.length;n>i;i++)this.addPair(e[i]);return this}function a(){return c}function l(){return JSON.stringify(a())}var c={},h={};this.addPair=r,this.addPairs=o,this.serialize=a,this.serializeJSON=l};return n.patterns={validate:/^[a-z][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i},n.serializeObject=function(){return this.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):new n(i).addPairs(this.serializeArray()).serialize()},n.serializeJSON=function(){return this.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):new n(i).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof i.fn&&(i.fn.serializeObject=n.serializeObject,i.fn.serializeJSON=n.serializeJSON),n}),define("views/form",["marionette","models/auth","jquery","serialize-object","json2"],function(t,e,i){"use strict";return t.ItemView.extend({ui:{inputs:".form-control",successText:"#result-labels > .success-text",errorText:"#result-labels > .error-text",submitButton:"#submit"},events:{"keydown .form-control":"onInputKeyDown","focusout .form-control":"onInputFocusOut","click .radio, touch .radio":"onInputChange","change select":"onInputChange","submit form":"onFormSubmit"},modelFunction:"save",error:function(t,e,i){var n=this.model&&this.model.url&&!_.isFunction(this.model.url)?this.model.url:this.modelFunction,s=i&&_.isArray(i)?i[0]:i;return Config.getErrorText(t,n,s)||e},success:"Success",initialize:function(){this.model=this.model||e},onRender:function(){i.each(this.ui.inputs,function(t,e){if(!i(e).val())return i(e).focus(),!1}),this.ui.successText.length||(this.ui.successText=this.$(".success-text").first()),this.ui.errorText.length||(this.ui.errorText=this.$(".error-text").first())},onShow:function(){this.delegateEvents()},onInputKeyDown:function(t){this.ui.submitButton.prop("disabled",!1),i(t.currentTarget).parent().removeClass("has-error")},onInputFocusOut:function(t){var e=i(t.currentTarget);e.val()&&this.validateInput(e)},onInputChange:function(t){this.ui.submitButton.prop("disabled",!1)},onFormSubmit:function(t){if(t.preventDefault(),t.stopPropagation(),this.validateForm()){var e=this,n=i(Config.LOADER),s=this.ui.submitButton,r=i(t.currentTarget).serializeObject();s.width(s.width()).height(s.height()).prop("disabled",!0).html(n),this.model[this.modelFunction](r).done(function(t){e.onSuccess(t)}).fail(function(t){var i=t.responseJSON?t.responseJSON:JSON.parse(t.responseText);e.onFail(t.status,i&&i.message?i.message:null,i&&i.fields?i.fields:null)})}},onSuccess:function(t){this.render(),_.isFunction(this.success)?this.success():this.displaySuccess(this.ui.successText,this.success)},onFail:function(t,e,i){this.render();var n=_.isFunction(this.error)?this.error(t,e,i):this.error,s=i&&this.ui.inputs.filter("[name="+i[0]+"]")?this.ui.inputs.filter("[name="+i[0]+"]"):null;this.displayError(s?s:this.ui.errorText,n)},validateInput:function(t){var e=t.val(),i=t.attr("type"),n=t.attr("name"),s=t.siblings(".error-text");if(!e)return!t.prop("required")||(this.displayError(s,"Field is required"),!1);if("username"===n||"confirmUsername"===n){var r=this.$("#"+t.attr("data-match"));if(r.length&&r.val()!==e)return this.displayError(s,"Does not match"),!1;var o=Config.IS_LOYALTY_TYPE_PHONE?Config.validatePhone(t.val()):Config.validateLoyaltyCardId(t.val());if(!o){var a=Config.IS_LOYALTY_TYPE_PHONE?"Invalid Phone":"Invalid Loyalty ID";return t.val().indexOf("@")>0?(a="Invalid Email",this.displayError(s,a),!1):(this.displayError(s,a),!1)}}if("zip"===n&&!Config.validateZipCode(e))return this.displayError(s,"Invalid Zip"),!1;if("email"===n||"email"===i){var r=this.$("#"+t.attr("data-match"));if(r.length&&r.val()!==e)return this.displayError(s,"Email does not match"),!1;if(!Config.validateEmail(e))return this.displayError(s,"Invalid Email"),!1}else{if(!("tel"!==n&&"tel"!==i||Config.validatePhone(e)))return this.displayError(s,"Invalid Phone"),!1;if("password"===n||"password"===i){var l=Config.MIN_PASSWORD_LENGTH,r=this.$("#"+t.attr("data-match"));if(r.length&&r.val()!==e)return this.displayError(s,"Passwords do not match"),!1;var c=this.$("#"+t.attr("data-differ"));if(c.length&&c.val()===e)return this.displayError(s,"New password is the same"),!1;if(e.length<l)return this.displayError(s,"Must be at least "+l+" characters"),!1}else if("altId"===n&&!Config.validateAlternateID(e))return this.displayError(s,"Invalid ID"),!1}return!0},validateForm:function(){var t=!0,e=this;return this.$(".has-success").removeClass("has-success"),this.$(".has-error").removeClass("has-error"),i.each(this.ui.inputs,function(n,s){return(t=e.validateInput(i(s)))||s.select(),t}),t},displaySuccess:function(t,e){t.show().delay(2e3).fadeOut("slow"),t.find("span").text(e),window.scrollTo(0,Math.min(t.offset().top-100,0))},displayError:function(t,e){if(t.length>0){var i=t.parent();e=e?e:"An error occurred.",0===i[0].offsetHeight&&(i=this.ui.errorText.parent()),i.addClass("has-error"),i.find(".error-text span").text(e.indexOf("<%")>=0?_.template(e)({label:i.find("label").text().replace("*","")}):e),window.scrollTo(0,Math.min(t.offset().top-100,0)),t.focus()}}})}),define("txt!templates/modals/reset.html",[],function(){return'<div class="modal-header">\n    <h4 class="modal-title">\n        <i class="fa fa-warning"></i>&nbsp;&nbsp;Password Reset Required\n    </h4>\n</div>\n\n<div class="modal-body">\n    <p>In an effort to help our shoppers save even more money, we are making some improvements to the Brookshire Brothers digital coupons program. As a part of these improvements,\n    <strong>you will need to verify your account and update your password.</strong></p>\n    <p>To do this, an email has been sent to the email address associated with your account. Please open the email, check in your bulk/spam mail folder just in case, and follow the instructions.</p>\n    <p>Thank you!<br>Brookshire Brothers team</p>\n</div>\n\n<div class="modal-footer">\n    <button class="retry btn btn-primary" data-dismiss="modal">\n        Ok\n    </button>\n</div>\n'}),define("modals/reset",["marionette","txt!templates/modals/reset.html"],function(t,e){"use strict";return t.ItemView.extend({id:"reset-modal",className:"modal-content",template:e})}),define("txt!templates/login.html",[],function(){return'<section class="header menu-box">\n  <div id="inMenu"></div>\n</section>\n<section class="content container-fluid">\n  <div class="row">\n    <div class="header col-xs-12">\n      <h4>Sign In</h4>\n    </div>\n  </div>\n\n  <form id="loginForm" role="form" method="post" class="row" action="#" novalidate>\n    <div class="inputs col-xs-12 col-sm-6 col-md-5 col-lg-4">\n      <fieldset>\n        <div id="result-labels">\n            <div class="error-text">\n                <i class="fa fa-warning"></i>\n                <span></span>\n            </div>\n            <div class="success-text">\n                <i class="fa fa-check-circle"></i>\n                <span></span>\n            </div>\n        </div>\n        <div class="form-group loyalty-card">\n          <label class="control-label" for="loyaltyCard">Email / Loyalty Id</label>\n          <input class="form-control" autocorrect="off" autocapitalize="off" spellcheck="false" type="text" id="loyaltyCard" name="username" value="{{username}}" required />\n          <div class="error-text">\n            <i class="fa fa-warning"></i>\n            <span></span>\n          </div>\n        </div>\n        <div class="form-group password">\n          <label class="control-label" for="password">Password</label>\n          <input class="form-control" type="password" id="password" name="password" required />\n          <div class="error-text">\n            <i class="fa fa-warning"></i>\n            <span></span>\n          </div>\n        </div>\n      </fieldset>\n    </div>\n\n    <div class="form-actions col-xs-12">\n      <button class="btn btn-primary btn-lg" id="submit" type="submit">Submit</button>\n      <div>\n        <span class="sign-in">Not a Member? <a id="inmar-register-link" href="#register">Register for Digital Coupons</a></span>\n        <br/>\n        <span class="forgot-password">Forgot Password? <a id="inmar-reset-password-link" href="#forgot-password">Reset now</a></span>\n      </div>\n    </div>\n  </form>\n</section>\n'}),define("views/login",["views/form","modals/reset","controls/vent","txt!templates/login.html","jquery"],function(t,e,i,n,s){"use strict";return t.extend({id:"login",template:n,modelFunction:"login",onShow:function(){return this.model.isAuthenticated()&&i.trigger(Config.Events.NAVIGATE,Config.Paths.HOME),t.prototype.onShow},onSuccess:function(){i.trigger(Config.Events.NAVIGATE,s.jStorage.get("dest",Config.Paths.HOME))},validateInput:function(e){var i=e.val(),n=(e.attr("type"),e.attr("name")),s=e.siblings(".error-text");if("username"===n){var r=Config.IS_LOYALTY_TYPE_PHONE?Config.validatePhone(i):Config.validateLoyaltyCardId(i);if(r||Config.validateEmail(i))return!0}return"password"===n?!!i||(this.displayError(s,"Field is required"),!1):t.prototype.validateInput.call(this,e)}})}),define("txt!templates/register.html",[],function(){return'<section class="header menu-box">\n  <div id="inMenu"></div>\n</section>\n<section class="content container-fluid">\n  <div class="row">\n    <div class="header col-xs-12">\n      <h4>Digital Coupon Registration</h4>\n      <div class="error-label"></div>\n    </div>\n  </div>\n\n  <form id="registrationForm" method="post" role="form" action="#" novalidate>\n    <div class="row">\n      <div class="inputs col-xs-12 col-sm-6 col-md-5">\n        <fieldset>\n          <span class="required-text">*All fields are required</span>\n          <div class="form-group email">\n            <label class="control-label" for="email">Email</label>\n            <input class="form-control" type="email" id="email" name="email" value="{{email}}" required/>\n            <div class="error-text">\n              <i class="fa fa-warning"></i>\n              <span></span>\n            </div>\n          </div>\n          <div class="form-group password">\n            <label class="control-label" for="password">Password</label>\n            <input class="form-control" type="password" id="password" name="password" placeholder="Minimum 8 characters" autocomplete="off" required/>\n            <div class="error-text">\n              <i class="fa fa-warning"></i>\n              <span></span>\n            </div>\n          </div>\n          <div class="form-group confirm-password">\n            <label class="control-label" for="confirmPassword">Confirm Password</label>\n            <input class="form-control" type="password" id="confirmPassword" data-match="password" autocomplete="off" required/>\n            <div class="error-text">\n              <i class="fa fa-warning"></i>\n              <span></span>\n            </div>\n          </div>\n          <div class="form-group loyalty-card">\n            <label class="control-label" for="loyaltyCard">Loyalty ID</label>\n            <input class="form-control" type="text" id="loyaltyCard" name="username" value="{{username}}" required/>\n            <div class="error-text">\n              <i class="fa fa-warning"></i>\n              <span></span>\n            </div>\n          </div>\n        </fieldset>\n      </div>\n      <div class="col-sm-6 col-md-7 hidden-xs help-card">\n      </div>\n    </div>\n\n    <div class="form-actions">\n      <button class="btn btn-primary btn-lg" id="submit" type="submit" disabled>Register</button>\n      <span class="sign-in">Already have a Digital Coupons account?</span>\n      <a href="#login" class="cta">Sign In</a>\n    </div>\n\n    <p class="terms">\n      By clicking on the &#8220;Register&#8221; button, I agree to the <a href="#" target="_blank" class="cta">Terms of Use</a> and <a href="#" target="_blank" class="cta">Privacy Policy</a> for Digital Coupons\n    </p>\n\n  </form>\n</section>\n'}),define("views/register",["views/form","controls/vent","txt!templates/register.html","jquery"],function(t,e,i,n){"use strict";return t.extend({id:"register",template:i,modelFunction:"register",ui:_.extend(t.prototype.ui,{requiredText:".required-text"}),initialize:function(){t.prototype.initialize(),Config.SSO_ENABLE||t.prototype.model.set("States",Config.States)},onSuccess:function(){e.trigger(Config.Events.NAVIGATE,n.jStorage.get("dest",Config.Paths.HOME))},displayError:function(e,i){e.parent().hasClass("email")&&this.ui.requiredText.hide(),t.prototype.displayError.call(this,e,i)}})}),define("txt!templates/forgot-password.html",[],function(){return'<section class="header menu-box">\n  <div id="inMenu"></div>\n</section>\n<section class="content container-fluid">\n  <div class="row">\n      <div class="header col-sm-12">\n          <h4>Forgot Password</h4>\n          <p> Enter the email address that is linked to your Digital Coupons account.<br/>An email will then be sent to this address with further instructions on how to reset your password.</p>\n      </div>\n  </div>\n  <div class="row">\n    <form id="forgotPasswordForm" role="form" action="#" novalidate>\n        <div class="inputs col-sm-5">\n            <fieldset>\n                 <div class="form-group loyalty-card">\n                    <label class="control-label" for="email">Email</label>\n                    <input class="form-control" type="email" id="email" name="email" required />\n                    <div class="error-text">\n                        <i class="fa fa-warning"></i>\n                        <span></span>\n                    </div>\n                     <div class="success-text">\n                         <i class="fa fa-check-circle"></i>\n                         <span></span>\n                     </div>\n                </div>\n            </fieldset>\n        </div>\n\n        <div class="form-actions col-xs-12">\n            <button class="btn btn-primary btn-lg" id="submit" type="submit">Submit</button>\n        </div>\n\n    </form>\n  </div>\n  <div class="row">\n    <p class="col-xs-12">If you continue to have problems accessing your account, please contact us at <a href="mailto:celebrate@brookshirebros.com">celebrate@brookshirebros.com</a>.</p>\n  </div>\n</section>\n'}),define("views/forgot-password",["views/form","txt!templates/forgot-password.html"],function(t,e){"use strict";return t.extend({id:"forgot-password",template:e,modelFunction:"forgotPassword",success:"Email Sent!"})}),define("txt!templates/reset-password.html",[],function(){return'<section class="header menu-box">\n  <div id="inMenu"></div>\n</section>\n<section class="content container-fluid">\n  <div class="row">\n    <div class="header col-xs-12">\n      <h4>Reset Password</h4>\n    </div>\n  </div>\n\n  <form id="resetPasswordForm" role="form" method="post" class="row" action="#" autocomplete="off" novalidate>\n    <div class="inputs col-xs-12 col-sm-6 col-md-5">\n      <fieldset>\n\n        <input class="form-control" type="hidden" id="resetToken" name="resetToken" value="{{resetToken}}" />\n\n        <div class="form-group">\n          <label class="control-label" for="newPassword">New Password</label>\n          <input class="form-control" type="password" id="newPassword" name="updated" placeholder="Minimum 8 characters" required/>\n          <div class="error-text">\n            <i class="fa fa-warning"></i>\n            <span></span>\n          </div>\n        </div>\n        <div class="form-group">\n          <label class="control-label" for="confirmPassword">Confirm New Password</label>\n          <input class="form-control" type="password" id="confirmPassword" data-match="newPassword" required/>\n          <div class="error-text">\n            <i class="fa fa-warning"></i>\n            <span></span>\n          </div>\n        </div>\n      </fieldset>\n    </div>\n\n    <div class="form-actions col-xs-12">\n      <button class="btn btn-primary btn-lg" id="submit" type="submit" disabled><i class="fa fa-refresh"></i> Reset</button>\n    </div>\n\n\n  </form>\n</section>\n'}),define("views/reset-password",["views/form","controls/vent","txt!templates/reset-password.html","jquery"],function(t,e,i,n){"use strict";return t.extend({id:"reset-password",template:i,modelFunction:"resetPassword",initialize:function(e){t.prototype.initialize.call(this,e),this.model.set("resetToken",e.token)},onSuccess:function(){e.trigger(Config.Events.NAVIGATE,n.jStorage.get("dest",Config.Paths.HOME))}})}),define("models/wallet",["backbone","collections/sorts","collections/categories","models/offer","jquery","jstorage"],function(t,e,i,n,s){"use strict";return t.Model.extend({url:"/user/clipped",defaults:{total:0,offerCount:0},ui:{accountNav:".account-nav",sortNav:"#wallet-sort"},initialize:function(){this.categories=new i,this.selectedOffers=s.jStorage.get("selectedOffers",[]),this.sorts=new e,"category"===Config.DEFAULT_WALLET_SORT?(this.groupBy="category",this.sorts.get("desc").select()):this.sorts.get(Config.DEFAULT_WALLET_SORT).select()},fetch:function(e){return this.stopListening(),e=e||{},e.data=e.data||{},e.data.limit=1e3,e.data.sort=this.sorts.findWhere({selected:!0}).get("sort"),e.cache=!1,Config.DEBUG&&(e.url="/clippedoffers"),t.Model.prototype.fetch.call(this,e)},parse:function(t){this.categories.reset();for(var e=0,i=0;i<t.length;i++){var n=this.addOfferModel(t[i]);e+=n.get("value")}return{total:e,offerCount:t.length}},toJSON:function(e){var i=t.Model.prototype.toJSON.call(this,e);return i.categories=this.categories.toJSON(),i},addOfferModel:function(t){t=n.prototype.parse.call(this,t);var e=new n(t),i=this.selectedOffers;return e.set("selected",i.indexOf(e.id)>=0),this.listenTo(e,"change:selected",function(t,e){var n=i.indexOf(t.id);e&&n==-1?i.push(t.id):!e&&n>=0&&i.splice(n,1),s.jStorage.set("selectedOffers",i)}),"category"===this.groupBy?this.categories.addOffer(e):this.categories.add(e),e}})}),define("txt!templates/components/clipped-offer.html",[],function(){return'<div class="offer-icon"><i class="inmico inm-ico_check"></i></div>\n<div class="clipped-offer-row {{#if badge}} has-badge{{/if}}">\n  {{#compare badge \'\' operator="!="}}\n  <div class="bdg {{badge}}">\n    <div class="tip"></div>\n    {{#compare badge \'new\' operator=\'===\'}}<span>New</span>{{/compare}}\n    {{#compare badge \'expiring\' operator=\'===\'}}<span>Last Chance</span>{{/compare}}\n    {{#compare badge \'just-for-you\' operator=\'===\'}}<span>Just For You</span>{{/compare}}\n  </div>\n  {{/compare}}\n  <div class="col-xs-8 col-sm-7 col-md-8 col-lg-9 offer-col">\n      <img class="offer-image" src="{{ imageUrl }}" />\n      <div class="summary">\n          <p class="offer-title">{{brand}}</p>\n          <p class="description">{{toHTML description}}</p>\n      </div>\n  </div>\n  <div class="col-xs-offset-1 col-xs-3 col-sm-4 col-md-3 col-lg-2 details-col">\n    <div class="inm-info">\n      <i class="fa fa-info"></i>\n    </div>\n      <div class="details">\n          <h4 class="offer-value">{{formatOfferValueText valueText}}</h4>\n          {{#compare minPurchase 0 operator=\'>\'}}<p class="offer-min-purchase">When you buy {{minPurchase}}.</p>{{/compare}}\n          <p class="offer-expires">Expires {{ moment expirationDate format=\'MMM D[,] YYYY\' }}</p>\n      </div>\n  </div>\n</div>\n'}),define("txt!templates/mobile/clipped-offer.html",[],function(){return'<div class="offer-icon"><i class="inmico inm-ico_check"></i></div>\n<div class="clipped-offer-row{{#if badge}} has-badge{{/if}}">\n  {{#compare badge \'\' operator="!="}}\n  <div class="bdg {{badge}}">\n    <div class="tip"></div>\n    {{#compare badge \'new\' operator=\'===\'}}<span>New</span>{{/compare}}\n    {{#compare badge \'expiring\' operator=\'===\'}}<span>Last Chance</span>{{/compare}}\n    {{#compare badge \'just-for-you\' operator=\'===\'}}<span>Just For You</span>{{/compare}}\n  </div>\n  {{/compare}}\n  <div class="offer-col">\n    <article class="wallet-offer">\n\n      <header>\n        <h1><span class="value">{{formatOfferValueText valueText}}</span><span class="brand">{{brand}}</span></h1>\n        <p class="description">{{toHTML description}}</p>\n        {{#compare minPurchase 0 operator=\'>\'}}<small>When you buy {{minPurchase}}.</small>{{/compare}}\n        <small>Expires {{ moment expirationDate format=\'MMM D[,] YYYY\' }}</small>\n      </header>\n\n      <img class="offer-image" src="{{ imageUrl }}" />\n\n      <div class="inm-info">\n        <i class="fa fa-info"></i>\n      </div>\n\n    </article>\n  </div>\n</div>\n'}),define("components/clipped-offer",["marionette","controls/vent","components/offer","views/mobile/modal","txt!templates/components/clipped-offer.html","txt!templates/mobile/clipped-offer.html"],function(t,e,i,n,s,r){"use strict";return i.extend({className:"clipped-offer clearfix",template:s,events:{click:"onOfferIconClick","click .inm-info":"onInfoClick"},initialize:function(){Config.isMobileCSS()===!0&&(this.template=r)},onRender:function(){this.model.get("selected")?this.$el.addClass("selected"):this.$el.removeClass("selected")},onOfferIconClick:function(){this.model.toggle()},onInfoClick:function(t){t.stopPropagation(),e.trigger(Config.Events.MODAL,new n({description:this.model.attributes.description,terms:this.model.attributes.terms}))}})}),define("txt!templates/components/clipped-category.html",[],function(){return'<article>\n  <header class="category-title">\n    <i class="category-icon {{key}}"></i>\n    <h4 class="category-name">{{name}}</h4>\n    <h4 class="offers-count">({{count}})</h4>\n  </header>\n\n  <div class="clipped-offers"></div>\n\n  <i class="category-arrow fa fa-angle-up"></i>\n</article>\n'}),define("txt!templates/mobile/clipped-category.html",[],function(){return'<article>\n  <header class="category-title">\n    <i class="category-icon {{key}}"></i>\n    <h4 class="category-name">{{name}}</h4>\n    <h4 class="offers-count">({{count}})</h4>\n  </header>\n\n  <div class="clipped-offers"></div>\n\n  <i class="category-arrow fa fa-angle-up"></i>\n</article>\n'}),define("components/clipped-category",["marionette","components/clipped-offer","views/mobile/modal","controls/vent","txt!templates/components/clipped-category.html","txt!templates/mobile/clipped-category.html","jquery"],function(t,e,i,n,s,r,o){"use strict";function a(t,e,i){var n=o(t),s=n.data("originalHeight"),r=n.is(":visible");s||(s=n.show().outerHeight(),n.data("originalHeight",s),r||n.hide().css({height:0})),
r?n.animate({height:0},{duration:e,complete:function(){n.hide(),i&&i.call(this)}}):n.show().animate({height:s},{duration:e,complete:function(){n.css("overflow","visible"),i&&i.call(this)}})}return t.CompositeView.extend({className:"clipped-category clearfix",template:s,ui:{offersCount:".offers-count",arrow:".category-arrow",categoryTitle:".category-title"},itemViewContainer:".clipped-offers",itemView:e,events:{"click .category-title":"onArrowClick","click .category-arrow":"onArrowClick"},modelEvents:{"change count":"onCountChange"},initialize:function(){Config.isMobileCSS()===!0&&(this.template=r)},onArrowClick:function(){this.$itemViewContainer.is(":animated")||(this.$itemViewContainer.is(":visible")?this.ui.arrow.removeClass("fa-angle-up").addClass("fa-angle-down"):this.ui.arrow.removeClass("fa-angle-down").addClass("fa-angle-up"),a(this.$itemViewContainer,"slow"))},onCountChange:function(){this.$(".offers-count").text("("+this.model.get("count")+")")}})}),define("txt!templates/modals/mail.html",[],function(){return'<div class="modal-header">\n\n    <h4 class="modal-title">\n        <i class="fa fa-envelope"></i>&nbsp;&nbsp;Sending Digital Coupons\n    </h4>\n</div>\n\n<div class="modal-body">\n    <div class="background-loader"></div>\n</div>\n\n<div class="modal-footer">\n    <button class="close-btn btn btn-primary" data-dismiss="modal" style="display: none" >Ok</button>\n</div>\n'}),define("modals/mail",["marionette","controls/vent","txt!templates/modals/mail.html","jquery"],function(t,e,i,n){"use strict";var s=Backbone.Model.extend({url:"/user/clipped/email"});return t.ItemView.extend({id:"error-modal",model:new s,className:"modal-content",template:i,onShow:function(){var t=this.$(".background-loader"),e=this.$(".close-btn");this.model.save({},{ignoreFail:!0}).done(function(e){t.replaceWith('<i class="fa fa-check-circle"></i>&nbsp;&nbsp;Your list of digital coupons has been sent!')}).fail(function(){t.replaceWith('<i class="fa fa-warning"></i>&nbsp;&nbsp;Error sending digital coupons.')}).always(function(){e.show()})}})}),define("txt!templates/wallet.html",[],function(){return'<section class="header menu-box">\n  <div id="inMenu">\n    <div class="container-fluid">\n      <div class="menu col-xs-12">\n        <div class="wrapper">\n          <button id="view-coupons" class="btn btn-success">\n            <div class="header">\n              <i class="fa fa-angle-left"></i> Browse\n              <span class="hidden-xs"> Digital Coupons</span>\n            </div>\n          </button>\n          <div id="sort-by-dropdown" class="btn-group dropdown">\n            <div class="dropdown-toggle inm-header" data-toggle="dropdown">\n                <i class="inmico inm-ico_sort-desc"></i>\n                <span class="sort-label">Category</span>\n                <div class="tip"></div>\n            </div>\n            <ul class="sorts dropdown-menu keep-open">\n              <li class="sort"><label><input type="radio" name="sortgroup" value="category" {{#compare walletSort "category"}}checked{{/compare}} ><span>Category</span></label></li>\n              <li class="sort"><label><input type="radio" name="sortgroup" value="desc" {{#compare walletSort "desc"}}checked{{/compare}} ><span>Newest</span></label></li>\n              <li class="sort"><label><input type="radio" name="sortgroup" value="expiring" {{#compare walletSort "expiring"}}checked{{/compare}} ><span>Expiration Date</span></label></li>\n              <li class="sort"><label><input type="radio" name="sortgroup" value="brand" {{#compare walletSort "brand"}}checked{{/compare}} ><span>Brand</span></label></li>\n              <li class="sort"><label><input type="radio" name="sortgroup" value="valueDesc" {{#compare walletSort "valueDesc"}}checked{{/compare}} ><span>Value</span></label></li>\n            </ul>\n          </div>\n          <div class="pull-right">\n            <div id="account-nav" class="btn-group dropdown"></div>\n          </div>\n        </div>\n        <div id="to-top"><i class="fa fa-angle-up"></i> Back to Top</div>\n      </div>\n    </div>\n  </div>\n</section>\n\n<section class="container-fluid content">\n  {{#if offerCount}}\n  <div class="col-xs-2 check-list-col">\n    <div class="check-list">\n      <h4 class="check-list-title">\n        <span class="hidden-xs"><i class="inmico inm-ico_checklist"></i><br /></span>\n        <span class="hidden-xs hidden-sm">Coupon<br/></span>\n        Checklist</h4>\n      </h4>\n    </div>\n  </div>\n  <div class="col-xs-10 categories-col">\n    {{#compare total 0 operator=">"}}\n    <div class="row">\n      <h3 class="col-xs-9 title">\n        <span class="save">Save <span class="total">${{formatCurrency total}}</span></span> on your next shopping trip.\n      </h3>\n      <div class="col-xs-3 tools">\n        <div id="mail" class="btn-group">\n          <div class="header">\n            <i class="fa fa-envelope"></i>\n            <span class="hidden-xs">Mail </span>\n            <span class="hidden-xs hidden-sm">List</span>\n          </div>\n        </div>\n        <div id="print" class="btn-group">\n          <div class="header">\n            <i class="fa fa-print"></i>\n            <span class="hidden-xs">Print </span>\n            <span class="hidden-xs hidden-sm">List</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    {{/compare}}\n  </div>\n  <div class="clipped-categories col-xs-offset-1 col-xs-11"></div>\n  {{else}}\n  <div class="col-xs-9 col-xs-offset-3 col-sm-10 col-sm-offset-2 categories-col">\n    <h3 class="empty-text">You don\'t have any digital coupons on your card.</h3>\n    <div class="clipped-categories row"></div>\n  </div>\n  {{/if}}\n</section>\n'}),define("txt!templates/mobile/wallet.html",[],function(){return'<section class="header menu-box">\n  <div id="inMenu">\n    <div class="mobile-menu profile">\n\n      <nav>\n        <ol>\n          <li><button id="menu-button-browse" type="button">\n            <span class="fa fa-angle-left"></span>\n            <span class="text">Browse</span></button>\n          </li>\n          <li><button id="menu-button-sorting" type="button"><span class="inmico inm-ico_sort-desc"></span></button></li>\n          <li><button id="menu-button-profile" type="button"><span class="inmico inm-ico_profile"></span></button></li>\n        </ol>\n      </nav>\n\n      <div class="menu-dropdown-wrapper">\n\n        <aside id="menu-dropdown-profile" class="menu-dropdown profile">\n          <div class="tip"></div>\n\n          <header>\n            <span class="title">My Account</span>\n          </header>\n\n          <ol class="dropdown-items">\n            <li><a href="#account/savings">My Savings<span class="fa fa-angle-right"></span></a></li>\n            <li><a href="#wallet">Coupon Check List<span class="fa fa-angle-right"></span></a></li>\n          </ol>\n        </aside>\n        <aside id="menu-dropdown-sorting" class="menu-dropdown sorting">\n          <div class="tip"></div>\n\n          <header>\n            <div class="affix-wrapper">\n              <span class="title">Sort by:</span>\n              <button class="btn inm-button-apply">Apply</button>\n            </div>\n          </header>\n\n          <ol class="dropdown-items">\n            <li><label><input type="radio" name="sortby" value="category" {{#compare walletSort "category"}}checked{{/compare}} /><span>Category</span><label></li>\n            <li><label><input type="radio" name="sortby" value="desc" {{#compare walletSort "desc"}}checked{{/compare}} /><span>Newest</span></label></li>\n            <li><label><input type="radio" name="sortby" value="expiring" {{#compare walletSort "expiring"}}checked{{/compare}} /><span>Expiration Date</span></label></li>\n            <li><label><input type="radio" name="sortby" value="brand" {{#compare walletSort "brand"}}checked{{/compare}} /><span>Brand</span></label></li>\n            <li><label><input type="radio" name="sortby" value="valueDesc" {{#compare walletSort "valueDesc"}}checked{{/compare}} /><span>Value</span></label></li>\n          </ol>\n        </aside>\n      </div>\n\n    </div>\n    <div id="to-top"><i class="fa fa-angle-up"></i> Back to Top</div>\n  </div>\n</section>\n\n<section class="container content">\n\n  <header>\n    <h1>Coupon Check List</h1>\n    <ol>\n      <li><a id="mail"><i class="fa fa-envelope"></i></a></li>\n      <li><a id="print"><i class="fa fa-print"></i></a></li>\n    </ol>\n  </header>\n\n  {{#if offerCount}}\n\n    <div class="checklist-header">\n\n      <div>\n        <span class="checklist-icon"><i class="inmico inm-ico_checklist"></i></span>\n      </div>\n\n      {{#compare total 0 operator=">"}}\n      <div class="inm-checklist-offset">\n        <h3 class="title">\n          <span class="save">Save <span class="total">${{formatCurrency total}}</span></span> on your next shopping trip.\n        </h3>\n      </div>\n      {{/compare}}\n\n    </div>\n\n\n    <div class="clipped-categories"></div>\n\n  {{else}}\n    <div class="col-xs-9 col-xs-offset-3 col-sm-10 col-sm-offset-2 categories-col">\n      <h3 class="empty-text">You don\'t have any digital coupons on your card.</h3>\n      <div class="clipped-categories row"></div>\n    </div>\n  {{/if}}\n\n</section>\n'}),define("views/wallet",["marionette","components/menu","models/wallet","components/clipped-category","components/clipped-offer","components/account-nav","modals/mail","controls/vent","txt!templates/wallet.html","txt!templates/mobile/wallet.html","jquery","jstorage"],function(t,e,i,n,s,r,o,a,l,c,h){"use strict";var u=0,d=!1,p=function(){var t=h(window).height();h("#inWrap #inMenu").hasClass("affix-top")&&(t-=h("#inWrap #inmContent")[0].getBoundingClientRect().top),t-=h("#inWrap .mobile-menu > nav").height(),h("#inWrap .menu-dropdown-wrapper > .menu-dropdown.open").css("height",t.toString().concat("px")),h("#debug").css("height",t.toString().concat("px")),u=h("body").scrollTop()},f=function(){p()},g=_.debounce(f,300),m=function(){d=!0,p(),h(window).bind("resize",g),h(screen).bind("orientationchange",f),h("html").addClass("stop-scroll"),u=h("body").scrollTop()},v=function(){h(window).unbind("resize",g),h(screen).unbind("orientationchange",f),h("html").removeClass("stop-scroll"),u=h("body").scrollTop(),d=!1};return t.CompositeView.extend({id:"wallet",template:l,itemViewContainer:".clipped-categories",ui:{menu:"#inMenu",accountNav:"#account-nav",sort:"#sort-by-dropdown",content:".content",total:".title .total",backToTop:"#to-top"},events:{"click .menu #view-coupons":"onViewCouponsClick","click #to-top":"backToTop","click #mail":"onMailClick","click #print":"onPrintClick","click .mobile-menu li > button":"onDropdownClick","click .inm-button-apply":"onApplyClick","click #menu-button-browse":"onViewCouponsClick","click #menu-dropdown-profile a.logout":"mobileOnLogoutClick","change #menu-dropdown-sorting .dropdown-items input":"onSortChange","change #sort-by-dropdown .sorts input":"onSortChange","click .menu-dropdown a":"onDropdownNavigate"},onDropdownClick:function(t){var e=h(t.target).closest("button");e.toggleClass("active").parent().siblings().find("button").removeClass("active"),h("#".concat(e.attr("id").replace("button","dropdown"))).toggleClass("open").siblings().removeClass("open"),e.parent().find(".active").length>0?m():v()},onApplyClick:function(t){a.trigger(Config.Events.REFRESH);var e=h(t.target).closest(".menu-dropdown");e.removeClass("open"),h("#".concat(e.attr("id").replace("dropdown","button"))).removeClass("active"),v()},onDropdownNavigate:function(){d&&v()},initialize:function(){this.isMobile=Config.isMobileCSS(),this.isMobile===!0&&(this.template=c),this.model=new i,this.collection=this.model.categories,this.model.set({walletSort:Config.DEFAULT_WALLET_SORT}),this.accountNavView=new r},buildItemView:function(t,e,i){return"category"===this.model.groupBy?new n({model:t,collection:t.offers}):new s({model:t})},onMenuDropdownClick:function(t){var e=h(t.target).closest("button");e.toggleClass("active").parent().siblings().find("button").removeClass("active"),h("#".concat(e.attr("id").replace("button","dropdown"))).toggleClass("open").siblings().removeClass("open")},mobileOnLogoutClick:function(t){auth.reset(),a.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN)},onRender:function(){this.accountNavView.$el=this.ui.accountNav,this.accountNavView.render();var t=this,e=this.ui.menu.offset(),i=this.ui.menu.affix({offset:{top:e.top}});i.css("width",h("#inWrap").css("width")),i.on("affix.bs.affix",function(){h(this).css("width",h("#inWrap").css("width"))}),i.on("affixed-top.bs.affix",function(){h(this).css("width","inherit")}),h(window).on("resize",function(){t.$el.css("width",h("#inWrap").css("width"))}),this.ui.sort.find(".dropdown-toggle").inDropdown(),this.ui.sort.find(".sort-label").text(this.ui.sort.find("input:checked + span").text())},onShow:function(){this.listenTo(a,Config.Events.REFRESH,this.refreshWallet),this.refreshWallet()},onSortChange:function(t){var e=t.target.value;"category"===e?(e="desc",this.model.groupBy="category"):this.model.groupBy=null,this.model.sorts.get(e).select(),this.model.set({walletSort:t.target.value}),this.isMobile||(this.ui.sort.find(".sort-label").text(this.ui.sort.find("input:checked + span").text()),a.trigger(Config.Events.REFRESH))},refreshWallet:function(){this.ui.content.html(h(Config.LOADER));var t=this;this.model.fetch().done(function(){t.render(),t.ui.content.hide().fadeIn(function(){})})},onViewCouponsClick:function(){v(),a.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)},onMailClick:function(){a.trigger(Config.Events.MODAL,new o)},onPrintClick:function(){window.print()},backToTop:function(){h("body,html").animate({scrollTop:0},800)}})}),define("models/basket",["backbone","models/basket","moment"],function(t,e,i){"use strict";return t.Model.extend({idAttribute:"basketId",urlRoot:"/receipts/link?basketId=",url:function(){return this.urlRoot+this.id},parse:function(t){return t.date=i(t.date).toDate(),t.amount=parseFloat(t.amount)||0,t.amount=t.amount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),t}})}),define("collections/baskets",["backbone","models/basket","moment"],function(t,e,i){"use strict";var n=function(t){return function(e){return function(i,n){return t=!!t,i.get(e)>n.get(e)?t?1:-1:i.get(e)<n.get(e)?t?-1:1:0}}};return t.Collection.extend({url:"/receipts",activeSort:"dateDescending",sortMethods:{amountAscending:n(!0)("amount"),amountDescending:n(!1)("amount"),dateAscending:n(!0)("date"),dateDescending:n(!1)("date")},model:e,initialize:function(){this.comparator=this.sortMethods[this.activeSort]},changeSort:function(t){this.sortMethods.hasOwnProperty(t)&&(this.activeSort=t,this.comparator=this.sortMethods[t],this.sort())}})}),define("txt!templates/modals/receipt.html",[],function(){return""}),define("modals/receipt",["marionette","controls/vent","txt!templates/modals/receipt.html","jquery"],function(t,e,i,n){"use strict";return t.ItemView.extend({id:"receipt-modal",className:"modal-content",template:i,ui:{content:".receipt-content"},updateContent:function(t){this.ui.content.html(t)}})}),define("txt!templates/basket-history.html",[],function(){return""}),define("txt!templates/mobile/basket-history.html",[],function(){return""}),define("txt!templates/components/basket-row.html",[],function(){return""}),define("views/basket-history",["marionette","components/account-nav","collections/baskets","controls/vent","modals/receipt","modals/error","txt!templates/basket-history.html","txt!templates/mobile/basket-history.html","txt!templates/components/basket-row.html","jquery","moment"],function(t,e,i,n,s,r,o,a,l,c,h){"use strict";function u(t,e,i){var n=c(t),s=n.data("originalHeight"),r=n.is(":visible");s||(s=n.show().outerHeight(),n.data("originalHeight",s),r||n.hide().css({height:0})),r?n.addClass("js-animating").animate({height:0},{duration:e,complete:function(){n.removeClass("js-animating").hide(),i&&i.call(this)}}):n.show().addClass("js-animating").animate({height:s},{duration:e,complete:function(){n.removeClass("js-animating").css("overflow","visible"),i&&i.call(this)}})}var d=t.ItemView.extend({className:"row",template:l,events:{click:"onClick"},initialize:function(){this.el.id=this.model.id},onClick:function(t){t.stopPropagation(),this.$el.animate({opacity:".5"},{duration:300,complete:function(){this.$el.append(Config.LOADER)}.bind(this)});var e=this.model.fetch({success:function(t,e,i){if(e.html){var r=new s;n.trigger(Config.Events.MODAL,r),r.updateContent(e.html)}this.$el.css({opacity:"1"}).find(".background-loader")[0].remove()}.bind(this)});e.fail=function(t,e,i){i&&"BAD_RECEIPT_LINK"===i.internalErrorCode&&(this.$el.css({opacity:"1"}).find(".background-loader")[0].remove(),n.trigger(Config.Events.MODAL,new r({status:t.status,url:"/receipts/link"})))}.bind(this)}}),p=t.ItemView.extend({template:"<h2>You do not have any recorded shopper history</h2>"});return t.CompositeView.extend({id:"basket",template:o,itemViewContainer:".history-container",itemView:d,emptyView:p,ui:{menu:"#inMenu",accountNav:"#account-nav",content:".content",backToTop:"#to-top",sortDate:".btn-date-sort",sortAmount:".btn-amt-sort"},events:{"click .menu #view-coupons":"onViewCouponsClick","click #to-top":"backToTop","click .mobile-menu li > button":"onMenuDropdownClick","click #menu-button-browse":"onViewCouponsClick","click #menu-dropdown-profile a.logout":"mobileOnLogoutClick","click .btn-date-sort":"toggleSort","click .btn-amt-sort":"toggleSort","click .date-group":"toggleDateGroup"},initialize:function(){this.isMobile=Config.isMobileCSS(),this.isMobile===!0&&(this.template=a),this.accountNavView=new e,this.collection=new i},onRender:function(){this.accountNavView.$el=this.ui.accountNav,this.accountNavView.render(),this.ui.sortAmount.find(".fa").hide(),this.ui.sortDate.find(".fa").hide();var t=this,e=this.ui.menu.offset(),i=this.ui.menu.affix({offset:{top:e.top}});i.css("width",c("#inWrap").css("width")),i.on("affix.bs.affix",function(){c(this).css("width",c("#inWrap").css("width"))}),i.on("affixed-top.bs.affix",function(){c(this).css("width","inherit")}),c(window).on("resize",function(){t.$el.css("width",c("#inWrap").css("width"))});var n=this.collection.activeSort.indexOf("Ascending")>-1;this.collection.activeSort.indexOf("amount")>-1?this.ui.sortAmount.find(".fa").show().toggleClass("fa-angle-down",!n).toggleClass("fa-angle-up",n):this.ui.sortDate.find(".fa").show().toggleClass("fa-angle-down",!n).toggleClass("fa-angle-up",n)},onShow:function(){this.ui.content.html(c(Config.LOADER)),this.collection.fetch().done(function(){this.render(),this.ui.content.hide().fadeIn()}.bind(this))},onMenuDropdownClick:function(t){var e=c(t.target).closest("button");e.toggleClass("active").parent().siblings().find("button").removeClass("active"),c("#".concat(e.attr("id").replace("button","dropdown"))).toggleClass("open").siblings().removeClass("open")},mobileOnLogoutClick:function(t){auth.reset(),n.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN)},onViewCouponsClick:function(){n.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)},backToTop:function(){c("body,html").animate({scrollTop:0},800)},toggleSort:function(t){var e=c(t.currentTarget),i=e.attr("data-toggle"),n=i.split(","),s=n.indexOf(this.collection.activeSort);this.collection.changeSort(1===Math.abs(s)?n[0]:n[1]),this.prevDateGroup=null,this.render()},toggleDateGroup:function(t){var e=t.currentTarget;c(e).find(".fa").toggleClass("fa-angle-down").toggleClass("fa-angle-up");var i=c("."+e.id);i.each(function(t,e){u(e,"slow")})},appendHtml:function(e,i,n){if(this.collection.activeSort.indexOf("date")>-1){var s=i.model.get("date"),r=!!this.prevDateGroup&&h(s).isSame(this.prevDateGroup,"month");if(i.$el.addClass(h(s).format("YYMM")),s&&(!this.prevDateGroup||!r)){var o=c('<header id="'+h(s).format("YYMM")+'" class="row date-group"><h2 class="col-xs-12">'+h(s).format("MMMM")+'<i class="fa fa-angle-down"></i></h2></header>')[0];e.isBuffering?(e.elBuffer.appendChild(o),e._bufferedChildren.push(o)):e.$itemViewContainer.append(o),this.prevDateGroup=s}}t.CompositeView.prototype.appendHtml.call(this,e,i,n)},appendBuffer:function(){t.CompositeView.prototype.appendBuffer.apply(this,arguments)},initRenderBuffer:function(){this.prevDateGroup=null,t.CompositeView.prototype.initRenderBuffer.apply(this,arguments)}})}),define("txt!templates/profile.html",[],function(){return'<form id="userForm" role="form" method="post" action="#" class="col-xs-12" novalidate>\n    <fieldset>\n        <legend>Contact Information</legend>\n\n        <span class="required-text">*Required<span class="hidden-xs"> Fields</span></span>\n\n        <div id="result-labels">\n            <div class="error-text">\n                <i class="fa fa-warning"></i>\n                <span></span>\n            </div>\n            <div class="success-text">\n                <i class="fa fa-check-circle"></i>\n                <span></span>\n            </div>\n        </div>\n        <div class="row">\n            <div class="form-group col-xs-12 col-sm-6 col-md-4">\n                <label class="control-label" for="firstName">First Name*</label>\n                <input class="form-control" type="text" id="firstName" name="firstName" value="{{firstName}}" required/>\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n            <div class="form-group col-xs-12 col-sm-6 col-md-4">\n                <label class="control-label" for="lastName">Last Name*</label>\n                <input class="form-control" type="text" id="lastName" name="lastName" value="{{lastName}}" required/>\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n          </div>\n          <div class="row">\n            <div class="form-group col-xs-12 col-sm-6 col-md-4">\n                <label class="control-label" for="email">Email*</label>\n                <input class="form-control" type="email" id="email" name="email" value="{{email}}" required/>\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n\n            <div class="form-group col-xs-12 col-sm-6 col-md-4">\n                <label class="control-label" for="phone">Phone</label>\n                <input class="form-control" type="tel" id="phone" name="phone" value="{{phone}}" placeholder="xxx-xxx-xxxx" />\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n\n            <div class="form-group loyalty-card col-xs-12 col-md-4" data-toggle="tooltip" data-placement="bottom" title="You will be automatically logged out of your account upon saving a change to your Loyalty ID. You will need to login again to clip digital coupons. Your Digital Coupons will be transferred to your new number.">\n                <label class="control-label" for="loyaltyCard">Loyalty ID*</label>\n                <input class="form-control" type="text" id="loyaltyCard" name="loyaltyId" value="{{loyaltyId}}" required/>\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n        </div>\n    </fieldset>\n    <fieldset>\n        <legend>Mailing Information</legend>\n        <div class="row">\n            <div class="form-group col-xs-12 col-sm-8 col-lg-4">\n                <label class="control-label" for="address1">Address</label>\n                <input class="form-control" type="text" id="address1" name="address1" value="{{address1}}" />\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n            <div class="form-group col-xs-12 col-sm-4 col-lg-2">\n                <label class="control-label" for="address2">Apt/Suite</label>\n                <input class="form-control" type="text" id="address2" name="address2" value="{{address2}}" />\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n            <div class="form-group col-xs-12 col-sm-4 col-lg-2">\n                <label class="control-label" for="city">City</label>\n                <input class="form-control" type="city" id="city" name="city" value="{{city}}" />\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n            <div class="form-group col-xs-12 col-sm-4 col-lg-2">\n                <label class="control-label" for="state">State</label>\n                <select id="state" name="state" class="form-control">\n                    {{#unless state}}\n                        <option value="" disabled selected>Select State</option>\n                    {{/unless}}\n                    {{#each States}}\n                        <option value="{{value}}" {{#compare value ../state}}selected{{/compare}}>{{label}}</option>\n                    {{/each}}\n                </select>\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n            <div class="form-group col-xs-12 col-sm-4 col-lg-2">\n                <label class="control-label" for="zip">Zip Code</label>\n                <input class="form-control" type="text" id="zip" name="zip" value="{{zip}}"/>\n                <div class="error-text">\n                    <i class="fa fa-warning"></i>\n                    <span></span>\n                </div>\n            </div>\n        </div>\n    </fieldset>\n    <fieldset>\n        <legend>Email Preferences</legend>\n        <div class="row">\n            <div class="form-group col-xs-12 col-md-6">\n                <div class="radio">\n                    <label>\n                        <input type="radio" name="emailoptin" value="specific" {{#compare metadata.emailoptin "specific"}}checked{{/compare}}> Yes! Send me all Brookshire Brothers email communications\n                    </label>\n                </div>\n                <div class="radio">\n                    <label>\n                        <input type="radio" name="emailoptin" value="none" {{#compare metadata.emailoptin "none"}}checked{{/compare}}> No Thanks. I would rather not receive Brookshire Brothers emails at this time.\n                    </label>\n                </div>\n\n                <p class="help-block">Note: Please expect to receive account-related emails even if you don&#8217;t select any email preferences, as well as a Welcome email upon signing up!</p>\n            </div>\n        </div>\n    </fieldset>\n    <div class="row">\n        <div class="form-actions col-sm-12 col-md-12 col-lg-12">\n          <div>\n            <button class="btn btn-primary btn-lg" id="submit" type="submit" disabled>\n                <span>Save Changes</span>\n            </button>\n          </div>\n        </div>\n    </div>\n</form>\n'}),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),r="object"==typeof e&&e;(s||"destroy"!=e)&&(s||n.data("bs.tooltip",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.1.1",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),r=s.length;r--;){var o=s[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var i=this,n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,o=r.test(s);o&&(s=s.replace(r,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(s),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var a=this.getPosition(),l=n[0].offsetWidth,c=n[0].offsetHeight;if(o){var h=s,u=this.$element.parent(),d=this.getPosition(u);s="bottom"==s&&a.top+a.height+c-d.scroll>d.height?"top":"top"==s&&a.top-d.scroll-c<0?"bottom":"right"==s&&a.right+l>d.width?"left":"left"==s&&a.left-l<d.left?"right":s,n.removeClass(h).addClass(s)}var p=this.getCalculatedOffset(s,a,l,c);this.applyPlacement(p,s),this.hoverState=null;var f=function(){i.$element.trigger("shown.bs."+i.type)};t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,f).emulateTransitionEnd(150):f()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,r=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top=e.top+o,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=r&&(e.top=e.top+r-c);var h=this.getViewportAdjustedDelta(i,e,l,c);h.left?e.left+=h.left:e.top+=h.top;var u=h.left?2*h.left-s+l:2*h.top-r+c,d=h.left?"left":"top",p=h.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][p],d)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();
t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),s=t.Event("hide.bs."+this.type);if(this.$element.trigger(s),!s.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.hoverState=null,this},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName;return t.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?t(window).width():e.outerWidth(),height:n?t(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var r=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-o.scroll,l=e.top+r-o.scroll+n;a<o.top?s.top=o.top-a:l>o.top+o.height&&(s.top=o.top+o.height-l)}else{var c=e.left-r,h=e.left+r+i;c<o.left?s.left=o.left-c:h>o.width&&(s.left=o.left+o.width-h)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),define("bootstrap/tooltip",["jquery"],function(){}),define("views/profile",["views/form","txt!templates/profile.html","bootstrap/tooltip"],function(t,e){"use strict";return t.extend({id:"profile",className:"row",template:e,ui:_.extend(t.prototype.ui,{requiredText:".required-text",tooltips:'[data-toggle="tooltip"]'}),onShow:function(){return this.ui.tooltips.inTooltip({trigger:"focus",title:"",container:this.el}),t.prototype.onShow},onSuccess:function(){this.render(),this.ui.requiredText.hide(),this.displaySuccess(this.ui.successText,"Profile Saved")}})}),function(t){var e,i,n="0.3.4",s="hasOwnProperty",r=/[\.\/]/,o="*",a=function(){},l=function(t,e){return t-e},c={n:{}},h=function(t,n){var s,r=i,o=Array.prototype.slice.call(arguments,2),a=h.listeners(t),c=0,u=[],d={},p=[],f=e;e=t,i=0;for(var g=0,m=a.length;g<m;g++)"zIndex"in a[g]&&(u.push(a[g].zIndex),a[g].zIndex<0&&(d[a[g].zIndex]=a[g]));for(u.sort(l);u[c]<0;)if(s=d[u[c++]],p.push(s.apply(n,o)),i)return i=r,p;for(g=0;g<m;g++)if(s=a[g],"zIndex"in s)if(s.zIndex==u[c]){if(p.push(s.apply(n,o)),i)break;do if(c++,s=d[u[c]],s&&p.push(s.apply(n,o)),i)break;while(s)}else d[s.zIndex]=s;else if(p.push(s.apply(n,o)),i)break;return i=r,e=f,p.length?p:null};h.listeners=function(t){var e,i,n,s,a,l,h,u,d=t.split(r),p=c,f=[p],g=[];for(s=0,a=d.length;s<a;s++){for(u=[],l=0,h=f.length;l<h;l++)for(p=f[l].n,i=[p[d[s]],p[o]],n=2;n--;)e=i[n],e&&(u.push(e),g=g.concat(e.f||[]));f=u}return g},h.on=function(t,e){for(var i=t.split(r),n=c,s=0,o=i.length;s<o;s++)n=n.n,!n[i[s]]&&(n[i[s]]={n:{}}),n=n[i[s]];for(n.f=n.f||[],s=0,o=n.f.length;s<o;s++)if(n.f[s]==e)return a;return n.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},h.stop=function(){i=1},h.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},h.unbind=function(t,e){var i,n,a,l,h,u,d,p=t.split(r),f=[c];for(l=0,h=p.length;l<h;l++)for(u=0;u<f.length;u+=a.length-2){if(a=[u,1],i=f[u].n,p[l]!=o)i[p[l]]&&a.push(i[p[l]]);else for(n in i)i[s](n)&&a.push(i[n]);f.splice.apply(f,a)}for(l=0,h=f.length;l<h;l++)for(i=f[l];i.n;){if(e){if(i.f){for(u=0,d=i.f.length;u<d;u++)if(i.f[u]==e){i.f.splice(u,1);break}!i.f.length&&delete i.f}for(n in i.n)if(i.n[s](n)&&i.n[n].f){var g=i.n[n].f;for(u=0,d=g.length;u<d;u++)if(g[u]==e){g.splice(u,1);break}!g.length&&delete i.n[n].f}}else{delete i.f;for(n in i.n)i.n[s](n)&&i.n[n].f&&delete i.n[n].f}i=i.n}},h.once=function(t,e){var i=function(){var n=e.apply(this,arguments);return h.unbind(t,i),n};return h.on(t,i)},h.version=n,h.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=h:"undefined"!=typeof define?define("eve",[],function(){return h}):t.eve=h}(this),define("raphael-core",["eve"],function(t){function e(i){if(e.is(i,"function"))return b?i():t.on("raphael.DOMload",i);if(e.is(i,G))return e._engine.create[M](e,i.splice(0,3+e.is(i[0],Y))).add(i);var n=Array.prototype.slice.call(arguments,0);if(e.is(n[n.length-1],"function")){var s=n.pop();return b?s.call(e._engine.create[M](e,n)):t.on("raphael.DOMload",function(){s.call(e._engine.create[M](e,n))})}return e._engine.create[M](e,arguments)}function i(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[C](n)&&(e[n]=i(t[n]));return e}function n(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}function s(t,e,i){function s(){var r=Array.prototype.slice.call(arguments,0),o=r.join("␀"),a=s.cache=s.cache||{},l=s.count=s.count||[];return a[C](o)?(n(l,o),i?i(a[o]):a[o]):(l.length>=1e3&&delete a[l.shift()],l.push(o),a[o]=t[M](e,r),i?i(a[o]):a[o])}return s}function r(){return this.hex}function o(t,e){for(var i=[],n=0,s=t.length;s-2*!e>n;n+=2){var r=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?s-4==n?r[3]={x:+t[0],y:+t[1]}:s-2==n&&(r[2]={x:+t[0],y:+t[1]},r[3]={x:+t[2],y:+t[3]}):r[0]={x:+t[s-2],y:+t[s-1]}:s-4==n?r[3]=r[2]:n||(r[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return i}function a(t,e,i,n,s){var r=-3*e+9*i-9*n+3*s,o=t*r+6*e-12*i+6*n;return t*o-3*e+3*i}function l(t,e,i,n,s,r,o,l,c){null==c&&(c=1),c=c>1?1:c<0?0:c;for(var h=c/2,u=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,g=0;g<u;g++){var m=h*d[g]+h,v=a(m,t,i,s,o),y=a(m,e,n,r,l),b=v*v+y*y;f+=p[g]*H.sqrt(b)}return h*f}function c(t,e,i,n,s,r,o,a,c){if(!(c<0||l(t,e,i,n,s,r,o,a)<c)){var h,u=1,d=u/2,p=u-d,f=.01;for(h=l(t,e,i,n,s,r,o,a,p);F(h-c)>f;)d/=2,p+=(h<c?1:-1)*d,h=l(t,e,i,n,s,r,o,a,p);return p}}function h(t,e,i,n,s,r,o,a){if(!(j(t,i)<V(s,o)||V(t,i)>j(s,o)||j(e,n)<V(r,a)||V(e,n)>j(r,a))){var l=(t*n-e*i)*(s-o)-(t-i)*(s*a-r*o),c=(t*n-e*i)*(r-a)-(e-n)*(s*a-r*o),h=(t-i)*(r-a)-(e-n)*(s-o);if(h){var u=l/h,d=c/h,p=+u.toFixed(2),f=+d.toFixed(2);if(!(p<+V(t,i).toFixed(2)||p>+j(t,i).toFixed(2)||p<+V(s,o).toFixed(2)||p>+j(s,o).toFixed(2)||f<+V(e,n).toFixed(2)||f>+j(e,n).toFixed(2)||f<+V(r,a).toFixed(2)||f>+j(r,a).toFixed(2)))return{x:u,y:d}}}}function u(t,i,n){var s=e.bezierBBox(t),r=e.bezierBBox(i);if(!e.isBBoxIntersect(s,r))return n?0:[];for(var o=l.apply(0,t),a=l.apply(0,i),c=~~(o/5),u=~~(a/5),d=[],p=[],f={},g=n?0:[],m=0;m<c+1;m++){var v=e.findDotsAtSegment.apply(e,t.concat(m/c));d.push({x:v.x,y:v.y,t:m/c})}for(m=0;m<u+1;m++)v=e.findDotsAtSegment.apply(e,i.concat(m/u)),p.push({x:v.x,y:v.y,t:m/u});for(m=0;m<c;m++)for(var y=0;y<u;y++){var b=d[m],x=d[m+1],w=p[y],_=p[y+1],k=F(x.x-b.x)<.001?"y":"x",C=F(_.x-w.x)<.001?"y":"x",S=h(b.x,b.y,x.x,x.y,w.x,w.y,_.x,_.y);if(S){if(f[S.x.toFixed(4)]==S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var T=b.t+F((S[k]-b[k])/(x[k]-b[k]))*(x.t-b.t),E=w.t+F((S[C]-w[C])/(_[C]-w[C]))*(_.t-w.t);T>=0&&T<=1&&E>=0&&E<=1&&(n?g++:g.push({x:S.x,y:S.y,t1:T,t2:E}))}}return g}function d(t,i,n){t=e._path2curve(t),i=e._path2curve(i);for(var s,r,o,a,l,c,h,d,p,f,g=n?0:[],m=0,v=t.length;m<v;m++){var y=t[m];if("M"==y[0])s=l=y[1],r=c=y[2];else{"C"==y[0]?(p=[s,r].concat(y.slice(1)),s=p[6],r=p[7]):(p=[s,r,s,r,l,c,l,c],s=l,r=c);for(var b=0,x=i.length;b<x;b++){var w=i[b];if("M"==w[0])o=h=w[1],a=d=w[2];else{"C"==w[0]?(f=[o,a].concat(w.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,h,d,h,d],o=h,a=d);var _=u(p,f,n);if(n)g+=_;else{for(var k=0,C=_.length;k<C;k++)_[k].segment1=m,_[k].segment2=b,_[k].bez1=p,_[k].bez2=f;g=g.concat(_)}}}}}return g}function p(t,e,i,n,s,r){null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+n,this.e=+s,this.f=+r):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function f(){return this.x+D+this.y+D+this.width+" × "+this.height}function g(t,e,i,n,s,r){function o(t){return((u*t+h)*t+c)*t}function a(t,e){var i=l(t,e);return((f*i+p)*i+d)*i}function l(t,e){var i,n,s,r,a,l;for(s=t,l=0;l<8;l++){if(r=o(s)-t,F(r)<e)return s;if(a=(3*u*s+2*h)*s+c,F(a)<1e-6)break;s-=r/a}if(i=0,n=1,s=t,s<i)return i;if(s>n)return n;for(;i<n;){if(r=o(s),F(r-t)<e)return s;t>r?i=s:n=s,s=(n-i)/2+i}return s}var c=3*e,h=3*(n-e)-c,u=1-c-h,d=3*i,p=3*(s-i)-d,f=1-d-p;return a(t,1/(200*r))}function m(t,e){var i=[],n={};if(this.ms=e,this.times=1,t){for(var s in t)t[C](s)&&(n[K(s)]=t[s],i.push(K(s)));i.sort(ht)}this.anim=n,this.top=i[i.length-1],this.percents=i}function v(i,n,s,r,o,a){s=K(s);var l,c,h,u,d,f,m=i.ms,v={},y={},b={};if(r)for(_=0,k=oe.length;_<k;_++){var x=oe[_];if(x.el.id==n.id&&x.anim==i){x.percent!=s?(oe.splice(_,1),h=1):c=x,n.attr(x.totalOrigin);break}}else r=+y;for(var _=0,k=i.percents.length;_<k;_++){if(i.percents[_]==s||i.percents[_]>r*i.top){s=i.percents[_],d=i.percents[_-1]||0,m=m/i.top*(s-d),u=i.percents[_+1],l=i.anim[s];break}r&&n.attr(i.anim[i.percents[_]])}if(l){if(c)c.initstatus=r,c.start=new Date-c.ms*r;else{for(var S in l)if(l[C](S)&&(it[C](S)||n.paper.customAttributes[C](S)))switch(v[S]=n.attr(S),null==v[S]&&(v[S]=et[S]),y[S]=l[S],it[S]){case Y:b[S]=(y[S]-v[S])/m;break;case"colour":v[S]=e.getRGB(v[S]);var T=e.getRGB(y[S]);b[S]={r:(T.r-v[S].r)/m,g:(T.g-v[S].g)/m,b:(T.b-v[S].b)/m};break;case"path":var E=Rt(v[S],y[S]),M=E[1];for(v[S]=E[0],b[S]=[],_=0,k=v[S].length;_<k;_++){b[S][_]=[0];for(var P=1,O=v[S][_].length;P<O;P++)b[S][_][P]=(M[_][P]-v[S][_][P])/m}break;case"transform":var D=n._,R=Vt(D[S],y[S]);if(R)for(v[S]=R.from,y[S]=R.to,b[S]=[],b[S].real=!0,_=0,k=v[S].length;_<k;_++)for(b[S][_]=[v[S][_][0]],P=1,O=v[S][_].length;P<O;P++)b[S][_][P]=(y[S][_][P]-v[S][_][P])/m;else{var N=n.matrix||new p,B={_:{transform:D.transform},getBBox:function(){return n.getBBox(1)}};v[S]=[N.a,N.b,N.c,N.d,N.e,N.f],Ht(B,y[S]),y[S]=B._.transform,b[S]=[(B.matrix.a-N.a)/m,(B.matrix.b-N.b)/m,(B.matrix.c-N.c)/m,(B.matrix.d-N.d)/m,(B.matrix.e-N.e)/m,(B.matrix.f-N.f)/m]}break;case"csv":var H=L(l[S])[I](w),j=L(v[S])[I](w);if("clip-rect"==S)for(v[S]=j,b[S]=[],_=j.length;_--;)b[S][_]=(H[_]-v[S][_])/m;y[S]=H;break;default:for(H=[][A](l[S]),j=[][A](v[S]),b[S]=[],_=n.paper.customAttributes[S].length;_--;)b[S][_]=((H[_]||0)-(j[_]||0))/m}var V=l.easing,F=e.easing_formulas[V];if(!F)if(F=L(V).match(J),F&&5==F.length){var $=F;F=function(t){return g(t,+$[1],+$[2],+$[3],+$[4],m)}}else F=dt;if(f=l.start||i.start||+new Date,x={anim:i,percent:s,timestamp:f,start:f+(i.del||0),status:0,initstatus:r||0,stop:!1,ms:m,easing:F,from:v,diff:b,to:y,el:n,callback:l.callback,prev:d,next:u,repeat:a||i.times,origin:n.attr(),totalOrigin:o},oe.push(x),r&&!c&&!h&&(x.stop=!0,x.start=new Date-m*r,1==oe.length))return le();h&&(x.start=new Date-x.ms*r),1==oe.length&&ae(le)}t("raphael.anim.start."+n.id,n,i)}}function y(t){for(var e=0;e<oe.length;e++)oe[e].el.paper==t&&oe.splice(e--,1)}e.version="2.1.0",e.eve=t;var b,x,w=/[, ]+/,_={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},k=/\{(\d+)\}/g,C="hasOwnProperty",S={doc:document,win:window},T={was:Object.prototype[C].call(S.win,"Raphael"),is:S.win.Raphael},E=function(){this.ca=this.customAttributes={}},M="apply",A="concat",P="createTouch"in S.doc,O="",D=" ",L=String,I="split",R="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[I](D),N={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},B=L.prototype.toLowerCase,H=Math,j=H.max,V=H.min,F=H.abs,$=H.pow,z=H.PI,Y="number",W="string",G="array",U=Object.prototype.toString,q=(e._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),X={NaN:1,Infinity:1,"-Infinity":1},J=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=H.round,K=parseFloat,Q=parseInt,tt=L.prototype.toUpperCase,et=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},it=e._availableAnimAttrs={blur:Y,"clip-rect":"csv",cx:Y,cy:Y,fill:"colour","fill-opacity":Y,"font-size":Y,height:Y,opacity:Y,path:"path",r:Y,rx:Y,ry:Y,stroke:"colour","stroke-opacity":Y,"stroke-width":Y,transform:"transform",width:Y,x:Y,y:Y},nt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,st={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,ot=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,at=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,lt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ct=(e._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ht=function(t,e){return K(t)-K(e)},ut=function(){},dt=function(t){return t},pt=e._rectPath=function(t,e,i,n,s){return s?[["M",t+s,e],["l",i-2*s,0],["a",s,s,0,0,1,s,s],["l",0,n-2*s],["a",s,s,0,0,1,-s,s],["l",2*s-i,0],["a",s,s,0,0,1,-s,-s],["l",0,2*s-n],["a",s,s,0,0,1,s,-s],["z"]]:[["M",t,e],["l",i,0],["l",0,n],["l",-i,0],["z"]]},ft=function(t,e,i,n){return null==n&&(n=i),[["M",t,e],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},gt=e._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return ft(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return ft(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return pt(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return pt(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return pt(e.x,e.y,e.width,e.height)}},mt=e.mapPath=function(t,e){if(!e)return t;var i,n,s,r,o,a,l;for(t=Rt(t),s=0,o=t.length;s<o;s++)for(l=t[s],r=1,a=l.length;r<a;r+=2)i=e.x(l[r],l[r+1]),n=e.y(l[r],l[r+1]),l[r]=i,l[r+1]=n;return t};if(e._g=S,e.type=S.win.SVGAngle||S.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var vt,yt=S.doc.createElement("div");if(yt.innerHTML='<v:shape adj="1"/>',vt=yt.firstChild,vt.style.behavior="url(#default#VML)",!vt||"object"!=typeof vt.adj)return e.type=O;yt=null}e.svg=!(e.vml="VML"==e.type),e._Paper=E,e.fn=x=E.prototype=e.prototype,e._id=0,e._oid=0,e.is=function(t,e){return e=B.call(e),"finite"==e?!X[C](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||U.call(t).slice(8,-1).toLowerCase()==e},e.angle=function(t,i,n,s,r,o){if(null==r){var a=t-n,l=i-s;return a||l?(180+180*H.atan2(-l,-a)/z+360)%360:0}return e.angle(t,i,r,o)-e.angle(n,s,r,o)},e.rad=function(t){return t%360*z/180},e.deg=function(t){return 180*t/z%360},e.snapTo=function(t,i,n){if(n=e.is(n,"finite")?n:10,e.is(t,G)){for(var s=t.length;s--;)if(F(t[s]-i)<=n)return t[s]}else{t=+t;var r=i%t;if(r<n)return i-r;if(r>t-n)return i-r+t}return i};e.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*H.random()|0,i="x"==t?e:3&e|8;return i.toString(16)});e.setWindow=function(i){t("raphael.setWindow",e,S.win,i),S.win=i,S.doc=S.win.document,e._engine.initWin&&e._engine.initWin(S.win)};var bt=function(t){if(e.vml){var i,n=/^\s+|\s+$/g;try{var r=new ActiveXObject("htmlfile");r.write("<body>"),r.close(),i=r.body}catch(o){i=createPopup().document.body}var a=i.createTextRange();bt=s(function(t){try{i.style.color=L(t).replace(n,O);var e=a.queryCommandValue("ForeColor");return e=(255&e)<<16|65280&e|(16711680&e)>>>16,"#"+("000000"+e.toString(16)).slice(-6)}catch(s){return"none"}})}else{var l=S.doc.createElement("i");l.title="Raphaël Colour Picker",l.style.display="none",S.doc.body.appendChild(l),bt=s(function(t){return l.style.color=t,S.doc.defaultView.getComputedStyle(l,O).getPropertyValue("color")})}return bt(t)},xt=function(){return"hsb("+[this.h,this.s,this.b]+")"},wt=function(){return"hsl("+[this.h,this.s,this.l]+")"},_t=function(){return this.hex},kt=function(t,i,n){if(null==i&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,i=t.g,t=t.r),null==i&&e.is(t,W)){var s=e.getRGB(t);t=s.r,i=s.g,n=s.b}return(t>1||i>1||n>1)&&(t/=255,i/=255,n/=255),[t,i,n]},Ct=function(t,i,n,s){t*=255,i*=255,n*=255;var r={r:t,g:i,b:n,hex:e.rgb(t,i,n),toString:_t};return e.is(s,"finite")&&(r.opacity=s),r};e.color=function(t){var i;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(i=e.hsb2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(i=e.hsl2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(i=e.rgb2hsl(t),t.h=i.h,t.s=i.s,t.l=i.l,i=e.rgb2hsb(t),t.v=i.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=_t,t},e.hsb2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,t=t.h,n=t.o),t*=360;var s,r,o,a,l;return t=t%360/60,l=i*e,a=l*(1-F(t%2-1)),s=r=o=i-l,t=~~t,s+=[l,a,0,0,a,l][t],r+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t],Ct(s,r,o,n)},e.hsl2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h),(t>1||e>1||i>1)&&(t/=360,e/=100,i/=100),t*=360;var s,r,o,a,l;return t=t%360/60,l=2*e*(i<.5?i:1-i),a=l*(1-F(t%2-1)),s=r=o=i-l/2,t=~~t,s+=[l,a,0,0,a,l][t],r+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t],Ct(s,r,o,n)},e.rgb2hsb=function(t,e,i){i=kt(t,e,i),t=i[0],e=i[1],i=i[2];var n,s,r,o;return r=j(t,e,i),o=r-V(t,e,i),n=0==o?null:r==t?(e-i)/o:r==e?(i-t)/o+2:(t-e)/o+4,n=(n+360)%6*60/360,s=0==o?0:o/r,{h:n,s:s,b:r,toString:xt}},e.rgb2hsl=function(t,e,i){i=kt(t,e,i),t=i[0],e=i[1],i=i[2];var n,s,r,o,a,l;return o=j(t,e,i),a=V(t,e,i),l=o-a,n=0==l?null:o==t?(e-i)/l:o==e?(i-t)/l+2:(t-e)/l+4,n=(n+360)%6*60/360,r=(o+a)/2,s=0==l?0:r<.5?l/(2*r):l/(2-2*r),{h:n,s:s,l:r,toString:wt}},e._path2string=function(){return this.join(",").replace(rt,"$1")};e._preload=function(t,e){var i=S.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,S.doc.body.removeChild(this)},i.onerror=function(){S.doc.body.removeChild(this)},S.doc.body.appendChild(i),i.src=t};e.getRGB=s(function(t){if(!t||(t=L(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:r};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:r};!(st[C](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=bt(t));var i,n,s,o,a,l,c=t.match(q);return c?(c[2]&&(s=Q(c[2].substring(5),16),n=Q(c[2].substring(3,5),16),i=Q(c[2].substring(1,3),16)),c[3]&&(s=Q((a=c[3].charAt(3))+a,16),n=Q((a=c[3].charAt(2))+a,16),i=Q((a=c[3].charAt(1))+a,16)),c[4]&&(l=c[4][I](nt),i=K(l[0]),"%"==l[0].slice(-1)&&(i*=2.55),n=K(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),s=K(l[2]),"%"==l[2].slice(-1)&&(s*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(o=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100)),c[5]?(l=c[5][I](nt),i=K(l[0]),"%"==l[0].slice(-1)&&(i*=2.55),n=K(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),s=K(l[2]),"%"==l[2].slice(-1)&&(s*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(i/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(o=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),e.hsb2rgb(i,n,s,o)):c[6]?(l=c[6][I](nt),i=K(l[0]),"%"==l[0].slice(-1)&&(i*=2.55),n=K(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),s=K(l[2]),"%"==l[2].slice(-1)&&(s*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(i/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(o=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),e.hsl2rgb(i,n,s,o)):(c={r:i,g:n,b:s,toString:r},c.hex="#"+(16777216|s|n<<8|i<<16).toString(16).slice(1),e.is(o,"finite")&&(c.opacity=o),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:r}},e),e.hsb=s(function(t,i,n){return e.hsb2rgb(t,i,n).hex}),e.hsl=s(function(t,i,n){return e.hsl2rgb(t,i,n).hex}),e.rgb=s(function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)}),e.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=function(t){if(!t)return null;var i=St(t);if(i.arr)return Et(i.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},s=[];return e.is(t,G)&&e.is(t[0],G)&&(s=Et(t)),s.length||L(t).replace(ot,function(t,e,i){var r=[],o=e.toLowerCase();if(i.replace(lt,function(t,e){e&&r.push(+e)}),"m"==o&&r.length>2&&(s.push([e][A](r.splice(0,2))),o="l",e="m"==e?"l":"L"),"r"==o)s.push([e][A](r));else for(;r.length>=n[o]&&(s.push([e][A](r.splice(0,n[o]))),n[o]););}),s.toString=e._path2string,i.arr=Et(s),s},e.parseTransformString=s(function(t){if(!t)return null;var i=[];return e.is(t,G)&&e.is(t[0],G)&&(i=Et(t)),i.length||L(t).replace(at,function(t,e,n){var s=[];B.call(e);n.replace(lt,function(t,e){e&&s.push(+e)}),i.push([e][A](s))}),i.toString=e._path2string,i});var St=function(t){var e=St.ps=St.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var i in e)e[C](i)&&i!=t&&(e[i].sleep--,!e[i].sleep&&delete e[i])}),e[t]};e.findDotsAtSegment=function(t,e,i,n,s,r,o,a,l){var c=1-l,h=$(c,3),u=$(c,2),d=l*l,p=d*l,f=h*t+3*u*l*i+3*c*l*l*s+p*o,g=h*e+3*u*l*n+3*c*l*l*r+p*a,m=t+2*l*(i-t)+d*(s-2*i+t),v=e+2*l*(n-e)+d*(r-2*n+e),y=i+2*l*(s-i)+d*(o-2*s+i),b=n+2*l*(r-n)+d*(a-2*r+n),x=c*t+l*i,w=c*e+l*n,_=c*s+l*o,k=c*r+l*a,C=90-180*H.atan2(m-y,v-b)/z;return(m>y||v<b)&&(C+=180),{x:f,y:g,m:{x:m,y:v},n:{x:y,y:b},start:{x:x,y:w},end:{x:_,y:k},alpha:C}},e.bezierBBox=function(t,i,n,s,r,o,a,l){e.is(t,"array")||(t=[t,i,n,s,r,o,a,l]);var c=It.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},e.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},e.isBBoxIntersect=function(t,i){var n=e.isPointInsideBBox;return n(i,t.x,t.y)||n(i,t.x2,t.y)||n(i,t.x,t.y2)||n(i,t.x2,t.y2)||n(t,i.x,i.y)||n(t,i.x2,i.y)||n(t,i.x,i.y2)||n(t,i.x2,i.y2)||(t.x<i.x2&&t.x>i.x||i.x<t.x2&&i.x>t.x)&&(t.y<i.y2&&t.y>i.y||i.y<t.y2&&i.y>t.y)},e.pathIntersection=function(t,e){return d(t,e)},e.pathIntersectionNumber=function(t,e){return d(t,e,1)},e.isPointInsidePath=function(t,i,n){var s=e.pathBBox(t);return e.isPointInsideBBox(s,i,n)&&d(t,[["M",i,n],["H",s.x2+10]],1)%2==1},e._removedFactory=function(e){return function(){t("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Tt=e.pathBBox=function(t){var e=St(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Rt(t);for(var n,s=0,r=0,o=[],a=[],l=0,c=t.length;l<c;l++)if(n=t[l],"M"==n[0])s=n[1],r=n[2],o.push(s),a.push(r);else{var h=It(s,r,n[1],n[2],n[3],n[4],n[5],n[6]);o=o[A](h.min.x,h.max.x),a=a[A](h.min.y,h.max.y),s=n[5],r=n[6]}var u=V[M](0,o),d=V[M](0,a),p=j[M](0,o),f=j[M](0,a),g={x:u,y:d,x2:p,y2:f,width:p-u,height:f-d};return e.bbox=i(g),g},Et=function(t){var n=i(t);return n.toString=e._path2string,n},Mt=e._pathToRelative=function(t){var i=St(t);if(i.rel)return Et(i.rel);e.is(t,G)&&e.is(t&&t[0],G)||(t=e.parsePathString(t));var n=[],s=0,r=0,o=0,a=0,l=0;"M"==t[0][0]&&(s=t[0][1],r=t[0][2],o=s,a=r,l++,n.push(["M",s,r]));for(var c=l,h=t.length;c<h;c++){var u=n[c]=[],d=t[c];if(d[0]!=B.call(d[0]))switch(u[0]=B.call(d[0]),u[0]){case"a":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+(d[6]-s).toFixed(3),u[7]=+(d[7]-r).toFixed(3);break;case"v":u[1]=+(d[1]-r).toFixed(3);break;case"m":o=d[1],a=d[2];default:for(var p=1,f=d.length;p<f;p++)u[p]=+(d[p]-(p%2?s:r)).toFixed(3)}else{u=n[c]=[],"m"==d[0]&&(o=d[1]+s,a=d[2]+r);for(var g=0,m=d.length;g<m;g++)n[c][g]=d[g]}var v=n[c].length;switch(n[c][0]){case"z":s=o,r=a;break;case"h":s+=+n[c][v-1];break;case"v":r+=+n[c][v-1];break;default:s+=+n[c][v-2],r+=+n[c][v-1]}}return n.toString=e._path2string,i.rel=Et(n),n},At=e._pathToAbsolute=function(t){var i=St(t);if(i.abs)return Et(i.abs);if(e.is(t,G)&&e.is(t&&t[0],G)||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],s=0,r=0,a=0,l=0,c=0;"M"==t[0][0]&&(s=+t[0][1],r=+t[0][2],a=s,l=r,c++,n[0]=["M",s,r]);for(var h,u,d=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=c,f=t.length;p<f;p++){if(n.push(h=[]),u=t[p],u[0]!=tt.call(u[0]))switch(h[0]=tt.call(u[0]),h[0]){case"A":h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=+(u[6]+s),h[7]=+(u[7]+r);break;case"V":h[1]=+u[1]+r;break;case"H":h[1]=+u[1]+s;break;case"R":for(var g=[s,r][A](u.slice(1)),m=2,v=g.length;m<v;m++)g[m]=+g[m]+s,g[++m]=+g[m]+r;n.pop(),n=n[A](o(g,d));break;case"M":a=+u[1]+s,l=+u[2]+r;default:for(m=1,v=u.length;m<v;m++)h[m]=+u[m]+(m%2?s:r)}else if("R"==u[0])g=[s,r][A](u.slice(1)),n.pop(),n=n[A](o(g,d)),h=["R"][A](u.slice(-2));else for(var y=0,b=u.length;y<b;y++)h[y]=u[y];switch(h[0]){case"Z":s=a,r=l;break;case"H":s=h[1];break;case"V":r=h[1];break;case"M":a=h[h.length-2],l=h[h.length-1];default:s=h[h.length-2],r=h[h.length-1]}}return n.toString=e._path2string,i.abs=Et(n),n},Pt=function(t,e,i,n){return[t,e,i,n,i,n]},Ot=function(t,e,i,n,s,r){var o=1/3,a=2/3;return[o*t+a*i,o*e+a*n,o*s+a*i,o*r+a*n,s,r]},Dt=function(t,e,i,n,r,o,a,l,c,h){var u,d=120*z/180,p=z/180*(+r||0),f=[],g=s(function(t,e,i){var n=t*H.cos(i)-e*H.sin(i),s=t*H.sin(i)+e*H.cos(i);return{x:n,y:s}});if(h)C=h[0],S=h[1],_=h[2],k=h[3];else{u=g(t,e,-p),t=u.x,e=u.y,u=g(l,c,-p),l=u.x,c=u.y;var m=(H.cos(z/180*r),H.sin(z/180*r),(t-l)/2),v=(e-c)/2,y=m*m/(i*i)+v*v/(n*n);y>1&&(y=H.sqrt(y),i=y*i,n=y*n);var b=i*i,x=n*n,w=(o==a?-1:1)*H.sqrt(F((b*x-b*v*v-x*m*m)/(b*v*v+x*m*m))),_=w*i*v/n+(t+l)/2,k=w*-n*m/i+(e+c)/2,C=H.asin(((e-k)/n).toFixed(9)),S=H.asin(((c-k)/n).toFixed(9));C=t<_?z-C:C,S=l<_?z-S:S,C<0&&(C=2*z+C),S<0&&(S=2*z+S),a&&C>S&&(C-=2*z),!a&&S>C&&(S-=2*z)}var T=S-C;if(F(T)>d){var E=S,M=l,P=c;S=C+d*(a&&S>C?1:-1),l=_+i*H.cos(S),c=k+n*H.sin(S),f=Dt(l,c,i,n,r,0,a,M,P,[S,E,_,k])}T=S-C;var O=H.cos(C),D=H.sin(C),L=H.cos(S),R=H.sin(S),N=H.tan(T/4),B=4/3*i*N,j=4/3*n*N,V=[t,e],$=[t+B*D,e-j*O],Y=[l+B*R,c-j*L],W=[l,c];if($[0]=2*V[0]-$[0],$[1]=2*V[1]-$[1],h)return[$,Y,W][A](f);f=[$,Y,W][A](f).join()[I](",");for(var G=[],U=0,q=f.length;U<q;U++)G[U]=U%2?g(f[U-1],f[U],p).y:g(f[U],f[U+1],p).x;return G},Lt=function(t,e,i,n,s,r,o,a,l){var c=1-l;return{x:$(c,3)*t+3*$(c,2)*l*i+3*c*l*l*s+$(l,3)*o,y:$(c,3)*e+3*$(c,2)*l*n+3*c*l*l*r+$(l,3)*a}},It=s(function(t,e,i,n,s,r,o,a){var l,c=s-2*i+t-(o-2*s+i),h=2*(i-t)-2*(s-i),u=t-i,d=(-h+H.sqrt(h*h-4*c*u))/2/c,p=(-h-H.sqrt(h*h-4*c*u))/2/c,f=[e,a],g=[t,o];return F(d)>"1e12"&&(d=.5),F(p)>"1e12"&&(p=.5),d>0&&d<1&&(l=Lt(t,e,i,n,s,r,o,a,d),g.push(l.x),f.push(l.y)),p>0&&p<1&&(l=Lt(t,e,i,n,s,r,o,a,p),g.push(l.x),f.push(l.y)),c=r-2*n+e-(a-2*r+n),h=2*(n-e)-2*(r-n),u=e-n,d=(-h+H.sqrt(h*h-4*c*u))/2/c,p=(-h-H.sqrt(h*h-4*c*u))/2/c,F(d)>"1e12"&&(d=.5),F(p)>"1e12"&&(p=.5),d>0&&d<1&&(l=Lt(t,e,i,n,s,r,o,a,d),g.push(l.x),f.push(l.y)),p>0&&p<1&&(l=Lt(t,e,i,n,s,r,o,a,p),g.push(l.x),f.push(l.y)),{min:{x:V[M](0,g),y:V[M](0,f)},max:{x:j[M](0,g),y:j[M](0,f)}}}),Rt=e._path2curve=s(function(t,e){var i=!e&&St(t);if(!e&&i.curve)return Et(i.curve);for(var n=At(t),s=e&&At(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=(function(t,e){var i,n;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][A](Dt[M](0,[e.x,e.y][A](t.slice(1))));break;case"S":i=e.x+(e.x-(e.bx||e.x)),n=e.y+(e.y-(e.by||e.y)),t=["C",i,n][A](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][A](Ot(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][A](Ot(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][A](Pt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][A](Pt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][A](Pt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][A](Pt(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)t.splice(e++,0,["C"][A](i.splice(0,6)));t.splice(e,1),u=j(n.length,s&&s.length||0)}},c=function(t,e,i,r,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",r.x,r.y]),i.bx=0,i.by=0,i.x=t[o][1],i.y=t[o][2],u=j(n.length,s&&s.length||0))},h=0,u=j(n.length,s&&s.length||0);h<u;h++){n[h]=a(n[h],r),l(n,h),s&&(s[h]=a(s[h],o)),s&&l(s,h),c(n,s,r,o,h),c(s,n,o,r,h);var d=n[h],p=s&&s[h],f=d.length,g=s&&p.length;r.x=d[f-2],r.y=d[f-1],r.bx=K(d[f-4])||r.x,r.by=K(d[f-3])||r.y,o.bx=s&&(K(p[g-4])||o.x),o.by=s&&(K(p[g-3])||o.y),
o.x=s&&p[g-2],o.y=s&&p[g-1]}return s||(i.curve=Et(n)),s?[n,s]:n},null,Et),Nt=(e._parseDots=s(function(t){for(var i=[],n=0,s=t.length;n<s;n++){var r={},o=t[n].match(/^([^:]*):?([\d\.]*)/);if(r.color=e.getRGB(o[1]),r.color.error)return null;r.color=r.color.hex,o[2]&&(r.offset=o[2]+"%"),i.push(r)}for(n=1,s=i.length-1;n<s;n++)if(!i[n].offset){for(var a=K(i[n-1].offset||0),l=0,c=n+1;c<s;c++)if(i[c].offset){l=i[c].offset;break}l||(l=100,c=s),l=K(l);for(var h=(l-a)/(c-n+1);n<c;n++)a+=h,i[n].offset=a+"%"}return i}),e._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Bt=(e._tofront=function(t,e){e.top!==t&&(Nt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},e._toback=function(t,e){e.bottom!==t&&(Nt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},e._insertafter=function(t,e,i){Nt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},e._insertbefore=function(t,e,i){Nt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},e.toMatrix=function(t,e){var i=Tt(t),n={_:{transform:O},getBBox:function(){return i}};return Ht(n,e),n.matrix}),Ht=(e.transformPath=function(t,e){return mt(t,Bt(t,e))},e._extractTransform=function(t,i){if(null==i)return t._.transform;i=L(i).replace(/\.{3}|\u2026/g,t._.transform||O);var n=e.parseTransformString(i),s=0,r=0,o=0,a=1,l=1,c=t._,h=new p;if(c.transform=n||[],n)for(var u=0,d=n.length;u<d;u++){var f,g,m,v,y,b=n[u],x=b.length,w=L(b[0]).toLowerCase(),_=b[0]!=w,k=_?h.invert():0;"t"==w&&3==x?_?(f=k.x(0,0),g=k.y(0,0),m=k.x(b[1],b[2]),v=k.y(b[1],b[2]),h.translate(m-f,v-g)):h.translate(b[1],b[2]):"r"==w?2==x?(y=y||t.getBBox(1),h.rotate(b[1],y.x+y.width/2,y.y+y.height/2),s+=b[1]):4==x&&(_?(m=k.x(b[2],b[3]),v=k.y(b[2],b[3]),h.rotate(b[1],m,v)):h.rotate(b[1],b[2],b[3]),s+=b[1]):"s"==w?2==x||3==x?(y=y||t.getBBox(1),h.scale(b[1],b[x-1],y.x+y.width/2,y.y+y.height/2),a*=b[1],l*=b[x-1]):5==x&&(_?(m=k.x(b[3],b[4]),v=k.y(b[3],b[4]),h.scale(b[1],b[2],m,v)):h.scale(b[1],b[2],b[3],b[4]),a*=b[1],l*=b[2]):"m"==w&&7==x&&h.add(b[1],b[2],b[3],b[4],b[5],b[6]),c.dirtyT=1,t.matrix=h}t.matrix=h,c.sx=a,c.sy=l,c.deg=s,c.dx=r=h.e,c.dy=o=h.f,1==a&&1==l&&!s&&c.bbox?(c.bbox.x+=+r,c.bbox.y+=+o):c.dirtyT=1}),jt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Vt=e._equaliseTransform=function(t,i){i=L(i).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],i=e.parseTransformString(i)||[];for(var n,s,r,o,a=j(t.length,i.length),l=[],c=[],h=0;h<a;h++){if(r=t[h]||jt(i[h]),o=i[h]||jt(r),r[0]!=o[0]||"r"==r[0].toLowerCase()&&(r[2]!=o[2]||r[3]!=o[3])||"s"==r[0].toLowerCase()&&(r[3]!=o[3]||r[4]!=o[4]))return;for(l[h]=[],c[h]=[],n=0,s=j(r.length,o.length);n<s;n++)n in r&&(l[h][n]=r[n]),n in o&&(c[h][n]=o[n])}return{from:l,to:c}};e._getContainer=function(t,i,n,s){var r;if(r=null!=s||e.is(t,"object")?t:S.doc.getElementById(t),null!=r)return r.tagName?null==i?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:i,height:n}:{container:1,x:t,y:i,width:n,height:s}},e.pathToRelative=Mt,e._engine={},e.path2curve=Rt,e.matrix=function(t,e,i,n,s,r){return new p(t,e,i,n,s,r)},function(t){function i(t){return t[0]*t[0]+t[1]*t[1]}function n(t){var e=H.sqrt(i(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}t.add=function(t,e,i,n,s,r){var o,a,l,c,h=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],d=[[t,i,s],[e,n,r],[0,0,1]];for(t&&t instanceof p&&(d=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;o<3;o++)for(a=0;a<3;a++){for(c=0,l=0;l<3;l++)c+=u[o][l]*d[l][a];h[o][a]=c}this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new p(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,n){null==e&&(e=t),(i||n)&&this.add(1,0,0,1,i,n),this.add(t,0,0,e,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},t.rotate=function(t,i,n){t=e.rad(t),i=i||0,n=n||0;var s=+H.cos(t).toFixed(9),r=+H.sin(t).toFixed(9);this.add(s,r,-r,s,i,n),this.add(1,0,0,1,-i,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[L.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var s=[[this.a,this.c],[this.b,this.d]];t.scalex=H.sqrt(i(s[0])),n(s[0]),t.shear=s[0][0]*s[1][0]+s[0][1]*s[1][1],s[1]=[s[1][0]-s[0][0]*t.shear,s[1][1]-s[0][1]*t.shear],t.scaley=H.sqrt(i(s[1])),n(s[1]),t.shear/=t.scaley;var r=-s[0][1],o=s[1][1];return o<0?(t.rotate=e.deg(H.acos(o)),r<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(H.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[I]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:O)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:O)+(e.rotate?"r"+[e.rotate,0,0]:O)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);var Ft=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Ft&&Ft[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ft&&Ft[1]<8?x.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:x.safari=ut;for(var $t=function(){this.returnValue=!1},zt=function(){return this.originalEvent.preventDefault()},Yt=function(){this.cancelBubble=!0},Wt=function(){return this.originalEvent.stopPropagation()},Gt=function(){return S.doc.addEventListener?function(t,e,i,n){var s=P&&N[e]?N[e]:e,r=function(s){var r=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,o=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,a=s.clientX+o,l=s.clientY+r;if(P&&N[C](e))for(var c=0,h=s.targetTouches&&s.targetTouches.length;c<h;c++)if(s.targetTouches[c].target==t){var u=s;s=s.targetTouches[c],s.originalEvent=u,s.preventDefault=zt,s.stopPropagation=Wt;break}return i.call(n,s,a,l)};return t.addEventListener(s,r,!1),function(){return t.removeEventListener(s,r,!1),!0}}:S.doc.attachEvent?function(t,e,i,n){var s=function(t){t=t||S.win.event;var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,s=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,r=t.clientX+s,o=t.clientY+e;return t.preventDefault=t.preventDefault||$t,t.stopPropagation=t.stopPropagation||Yt,i.call(n,t,r,o)};t.attachEvent("on"+e,s);var r=function(){return t.detachEvent("on"+e,s),!0};return r}:void 0}(),Ut=[],qt=function(e){for(var i,n=e.clientX,s=e.clientY,r=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,o=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,a=Ut.length;a--;){if(i=Ut[a],P){for(var l,c=e.touches.length;c--;)if(l=e.touches[c],l.identifier==i.el._drag.id){n=l.clientX,s=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var h,u=i.el.node,d=u.nextSibling,p=u.parentNode,f=u.style.display;S.win.opera&&p.removeChild(u),u.style.display="none",h=i.el.paper.getElementByPoint(n,s),u.style.display=f,S.win.opera&&(d?p.insertBefore(u,d):p.appendChild(u)),h&&t("raphael.drag.over."+i.el.id,i.el,h),n+=o,s+=r,t("raphael.drag.move."+i.el.id,i.move_scope||i.el,n-i.el._drag.x,s-i.el._drag.y,n,s,e)}},Xt=function(i){e.unmousemove(qt).unmouseup(Xt);for(var n,s=Ut.length;s--;)n=Ut[s],n.el._drag={},t("raphael.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,i);Ut=[]},Jt=e.el={},Zt=R.length;Zt--;)!function(t){e[t]=Jt[t]=function(i,n){return e.is(i,"function")&&(this.events=this.events||[],this.events.push({name:t,f:i,unbind:Gt(this.shape||this.node||S.doc,t,i,n||this)})),this},e["un"+t]=Jt["un"+t]=function(e){for(var i=this.events||[],n=i.length;n--;)if(i[n].name==t&&i[n].f==e)return i[n].unbind(),i.splice(n,1),!i.length&&delete this.events,this;return this}}(R[Zt]);Jt.data=function(i,n){var s=ct[this.id]=ct[this.id]||{};if(1==arguments.length){if(e.is(i,"object")){for(var r in i)i[C](r)&&this.data(r,i[r]);return this}return t("raphael.data.get."+this.id,this,s[i],i),s[i]}return s[i]=n,t("raphael.data.set."+this.id,this,n,i),this},Jt.removeData=function(t){return null==t?ct[this.id]={}:ct[this.id]&&delete ct[this.id][t],this},Jt.hover=function(t,e,i,n){return this.mouseover(t,i).mouseout(e,n||i)},Jt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Kt=[];Jt.drag=function(i,n,s,r,o,a){function l(l){(l.originalEvent||l).preventDefault();var c=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,h=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;this._drag.x=l.clientX+h,this._drag.y=l.clientY+c,this._drag.id=l.identifier,!Ut.length&&e.mousemove(qt).mouseup(Xt),Ut.push({el:this,move_scope:r,start_scope:o,end_scope:a}),n&&t.on("raphael.drag.start."+this.id,n),i&&t.on("raphael.drag.move."+this.id,i),s&&t.on("raphael.drag.end."+this.id,s),t("raphael.drag.start."+this.id,o||r||this,l.clientX+h,l.clientY+c,l)}return this._drag={},Kt.push({el:this,start:l}),this.mousedown(l),this},Jt.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},Jt.undrag=function(){for(var i=Kt.length;i--;)Kt[i].el==this&&(this.unmousedown(Kt[i].start),Kt.splice(i,1),t.unbind("raphael.drag.*."+this.id));!Kt.length&&e.unmousemove(qt).unmouseup(Xt)},x.circle=function(t,i,n){var s=e._engine.circle(this,t||0,i||0,n||0);return this.__set__&&this.__set__.push(s),s},x.rect=function(t,i,n,s,r){var o=e._engine.rect(this,t||0,i||0,n||0,s||0,r||0);return this.__set__&&this.__set__.push(o),o},x.ellipse=function(t,i,n,s){var r=e._engine.ellipse(this,t||0,i||0,n||0,s||0);return this.__set__&&this.__set__.push(r),r},x.path=function(t){t&&!e.is(t,W)&&!e.is(t[0],G)&&(t+=O);var i=e._engine.path(e.format[M](e,arguments),this);return this.__set__&&this.__set__.push(i),i},x.image=function(t,i,n,s,r){var o=e._engine.image(this,t||"about:blank",i||0,n||0,s||0,r||0);return this.__set__&&this.__set__.push(o),o},x.text=function(t,i,n){var s=e._engine.text(this,t||0,i||0,L(n));return this.__set__&&this.__set__.push(s),s},x.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var i=new he(t);return this.__set__&&this.__set__.push(i),i},x.setStart=function(t){this.__set__=t||this.set()},x.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},x.setSize=function(t,i){return e._engine.setSize.call(this,t,i)},x.setViewBox=function(t,i,n,s,r){return e._engine.setViewBox.call(this,t,i,n,s,r)},x.top=x.bottom=null,x.raphael=e;var Qt=function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.body,s=i.documentElement,r=s.clientTop||n.clientTop||0,o=s.clientLeft||n.clientLeft||0,a=e.top+(S.win.pageYOffset||s.scrollTop||n.scrollTop)-r,l=e.left+(S.win.pageXOffset||s.scrollLeft||n.scrollLeft)-o;return{y:a,x:l}};x.getElementByPoint=function(t,e){var i=this,n=i.canvas,s=S.doc.elementFromPoint(t,e);if(S.win.opera&&"svg"==s.tagName){var r=Qt(n),o=n.createSVGRect();o.x=t-r.x,o.y=e-r.y,o.width=o.height=1;var a=n.getIntersectionList(o,null);a.length&&(s=a[a.length-1])}if(!s)return null;for(;s.parentNode&&s!=n.parentNode&&!s.raphael;)s=s.parentNode;return s==i.canvas.parentNode&&(s=n),s=s&&s.raphael?i.getById(s.raphaelid):null},x.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},x.forEach=function(t,e){for(var i=this.bottom;i;){if(t.call(e,i)===!1)return this;i=i.next}return this},x.getElementsByPoint=function(t,e){var i=this.set();return this.forEach(function(n){n.isPointInside(t,e)&&i.push(n)}),i},Jt.isPointInside=function(t,i){var n=this.realPath=this.realPath||gt[this.type](this);return e.isPointInsidePath(n,t,i)},Jt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=gt[this.type](this),e.bboxwt=Tt(this.realPath),e.bboxwt.toString=f,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=gt[this.type](this)),e.bbox=Tt(mt(this.realPath,this.matrix)),e.bbox.toString=f,e.dirty=e.dirtyT=0),e.bbox)},Jt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Jt.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,n=this.paper,s=n.set(),r=this.realPath||gt[this.type](this);r=this.matrix?mt(r,this.matrix):r;for(var o=1;o<i+1;o++)s.push(n.path(r).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*o).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return s.insertBefore(this).translate(e.offsetx,e.offsety)};var te=function(t,i,n,s,r,o,a,h,u){return null==u?l(t,i,n,s,r,o,a,h):e.findDotsAtSegment(t,i,n,s,r,o,a,h,c(t,i,n,s,r,o,a,h,u))},ee=function(t,i){return function(n,s,r){n=Rt(n);for(var o,a,l,c,h,u="",d={},p=0,f=0,g=n.length;f<g;f++){if(l=n[f],"M"==l[0])o=+l[1],a=+l[2];else{if(c=te(o,a,l[1],l[2],l[3],l[4],l[5],l[6]),p+c>s){if(i&&!d.start){if(h=te(o,a,l[1],l[2],l[3],l[4],l[5],l[6],s-p),u+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y],r)return u;d.start=u,u=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,l[5],l[6]].join(),p+=c,o=+l[5],a=+l[6];continue}if(!t&&!i)return h=te(o,a,l[1],l[2],l[3],l[4],l[5],l[6],s-p),{x:h.x,y:h.y,alpha:h.alpha}}p+=c,o=+l[5],a=+l[6]}u+=l.shift()+l}return d.end=u,h=t?p:i?d:e.findDotsAtSegment(o,a,l[0],l[1],l[2],l[3],l[4],l[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},ie=ee(1),ne=ee(),se=ee(0,1);e.getTotalLength=ie,e.getPointAtLength=ne,e.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return se(t,e).end;var n=se(t,i,1);return e?se(n,e).end:n},e.getPointPath=function(t){var e=[];t=Rt(t);for(var i,n,s,r,o,a="",l=0,c=0,h=t.length;c<h;c++){if(s=t[c],"M"==s[0])i=+s[1],n=+s[2];else{r=te(i,n,s[1],s[2],s[3],s[4],s[5],s[6]);for(var u=0,d=r;u<d;u++)o=te(i,n,s[1],s[2],s[3],s[4],s[5],s[6],u),e.push(o);l+=r,i=+s[5],n=+s[6]}a+=s.shift()+s}return{length:l,path:e}},Jt.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():ie(this.attrs.path)},Jt.getPointAtLength=function(t){if("path"==this.type)return ne(this.attrs.path,t)},Jt.getSubpath=function(t,i){if("path"==this.type)return e.getSubpath(this.attrs.path,t,i)};var re=e.easing_formulas={linear:function(t){return t},"<":function(t){return $(t,1.7)},">":function(t){return $(t,.48)},"<>":function(t){var e=.48-t/1.04,i=H.sqrt(.1734+e*e),n=i-e,s=$(F(n),1/3)*(n<0?-1:1),r=-i-e,o=$(F(r),1/3)*(r<0?-1:1),a=s+o+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:$(2,-10*t)*H.sin((t-.075)*(2*z)/.3)+1},bounce:function(t){var e,i=7.5625,n=2.75;return t<1/n?e=i*t*t:t<2/n?(t-=1.5/n,e=i*t*t+.75):t<2.5/n?(t-=2.25/n,e=i*t*t+.9375):(t-=2.625/n,e=i*t*t+.984375),e}};re.easeIn=re["ease-in"]=re["<"],re.easeOut=re["ease-out"]=re[">"],re.easeInOut=re["ease-in-out"]=re["<>"],re["back-in"]=re.backIn,re["back-out"]=re.backOut;var oe=[],ae=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},le=function(){for(var i=+new Date,n=0;n<oe.length;n++){var s=oe[n];if(!s.el.removed&&!s.paused){var r,o,a=i-s.start,l=s.ms,c=s.easing,h=s.from,u=s.diff,d=s.to,p=(s.t,s.el),f={},g={};if(s.initstatus?(a=(s.initstatus*s.anim.top-s.prev)/(s.percent-s.prev)*l,s.status=s.initstatus,delete s.initstatus,s.stop&&oe.splice(n--,1)):s.status=(s.prev+(s.percent-s.prev)*(a/l))/s.anim.top,!(a<0))if(a<l){var m=c(a/l);for(var y in h)if(h[C](y)){switch(it[y]){case Y:r=+h[y]+m*l*u[y];break;case"colour":r="rgb("+[ce(Z(h[y].r+m*l*u[y].r)),ce(Z(h[y].g+m*l*u[y].g)),ce(Z(h[y].b+m*l*u[y].b))].join(",")+")";break;case"path":r=[];for(var b=0,x=h[y].length;b<x;b++){r[b]=[h[y][b][0]];for(var w=1,_=h[y][b].length;w<_;w++)r[b][w]=+h[y][b][w]+m*l*u[y][b][w];r[b]=r[b].join(D)}r=r.join(D);break;case"transform":if(u[y].real)for(r=[],b=0,x=h[y].length;b<x;b++)for(r[b]=[h[y][b][0]],w=1,_=h[y][b].length;w<_;w++)r[b][w]=h[y][b][w]+m*l*u[y][b][w];else{var k=function(t){return+h[y][t]+m*l*u[y][t]};r=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==y)for(r=[],b=4;b--;)r[b]=+h[y][b]+m*l*u[y][b];break;default:var S=[][A](h[y]);for(r=[],b=p.paper.customAttributes[y].length;b--;)r[b]=+S[b]+m*l*u[y][b]}f[y]=r}p.attr(f),function(e,i,n){setTimeout(function(){t("raphael.anim.frame."+e,i,n)})}(p.id,p,s.anim)}else{if(function(i,n,s){setTimeout(function(){t("raphael.anim.frame."+n.id,n,s),t("raphael.anim.finish."+n.id,n,s),e.is(i,"function")&&i.call(n)})}(s.callback,p,s.anim),p.attr(d),oe.splice(n--,1),s.repeat>1&&!s.next){for(o in d)d[C](o)&&(g[o]=s.totalOrigin[o]);s.el.attr(g),v(s.anim,s.el,s.anim.percents[0],null,s.totalOrigin,s.repeat-1)}s.next&&!s.stop&&v(s.anim,s.el,s.next,null,s.totalOrigin,s.repeat)}}}e.svg&&p&&p.paper&&p.paper.safari(),oe.length&&ae(le)},ce=function(t){return t>255?255:t<0?0:t};Jt.animateWith=function(t,i,n,s,r,o){var a=this;if(a.removed)return o&&o.call(a),a;var l=n instanceof m?n:e.animation(n,s,r,o);v(l,a,l.percents[0],null,a.attr());for(var c=0,h=oe.length;c<h;c++)if(oe[c].anim==i&&oe[c].el==t){oe[h-1].start=oe[c].start;break}return a},Jt.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},m.prototype.delay=function(t){var e=new m(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},m.prototype.repeat=function(t){var e=new m(this.anim,this.ms);return e.del=this.del,e.times=H.floor(j(t,0))||1,e},e.animation=function(t,i,n,s){if(t instanceof m)return t;!e.is(n,"function")&&n||(s=s||n||null,n=null),t=Object(t),i=+i||0;var r,o,a={};for(o in t)t[C](o)&&K(o)!=o&&K(o)+"%"!=o&&(r=!0,a[o]=t[o]);return r?(n&&(a.easing=n),s&&(a.callback=s),new m({100:a},i)):new m(t,i)},Jt.animate=function(t,i,n,s){var r=this;if(r.removed)return s&&s.call(r),r;var o=t instanceof m?t:e.animation(t,i,n,s);return v(o,r,o.percents[0],null,r.attr()),r},Jt.setTime=function(t,e){return t&&null!=e&&this.status(t,V(e,t.ms)/t.ms),this},Jt.status=function(t,e){var i,n,s=[],r=0;if(null!=e)return v(t,this,-1,V(e,1)),this;for(i=oe.length;r<i;r++)if(n=oe[r],n.el.id==this.id&&(!t||n.anim==t)){if(t)return n.status;s.push({anim:n.anim,status:n.status})}return t?0:s},Jt.pause=function(e){for(var i=0;i<oe.length;i++)oe[i].el.id!=this.id||e&&oe[i].anim!=e||t("raphael.anim.pause."+this.id,this,oe[i].anim)!==!1&&(oe[i].paused=!0);return this},Jt.resume=function(e){for(var i=0;i<oe.length;i++)if(oe[i].el.id==this.id&&(!e||oe[i].anim==e)){var n=oe[i];t("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},Jt.stop=function(e){for(var i=0;i<oe.length;i++)oe[i].el.id!=this.id||e&&oe[i].anim!=e||t("raphael.anim.stop."+this.id,this,oe[i].anim)!==!1&&oe.splice(i--,1);return this},t.on("raphael.remove",y),t.on("raphael.clear",y),Jt.toString=function(){return"Raphaël’s object"};var he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,i=t.length;e<i;e++)!t[e]||t[e].constructor!=Jt.constructor&&t[e].constructor!=he||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},ue=he.prototype;ue.push=function(){for(var t,e,i=0,n=arguments.length;i<n;i++)t=arguments[i],!t||t.constructor!=Jt.constructor&&t.constructor!=he||(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},ue.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ue.forEach=function(t,e){for(var i=0,n=this.items.length;i<n;i++)if(t.call(e,this.items[i],i)===!1)return this;return this};for(var de in Jt)Jt[C](de)&&(ue[de]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t][M](i,e)})}}(de));return ue.attr=function(t,i){if(t&&e.is(t,G)&&e.is(t[0],"object"))for(var n=0,s=t.length;n<s;n++)this.items[n].attr(t[n]);else for(var r=0,o=this.items.length;r<o;r++)this.items[r].attr(t,i);return this},ue.clear=function(){for(;this.length;)this.pop()},ue.splice=function(t,e,i){t=t<0?j(this.length+t,0):t,e=j(0,V(this.length-t,e));var n,s=[],r=[],o=[];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<e;n++)r.push(this[t+n]);for(;n<this.length-t;n++)s.push(this[t+n]);var a=o.length;for(n=0;n<a+s.length;n++)this.items[t+n]=this[t+n]=n<a?o[n]:s[n-a];for(n=this.items.length=this.length-=e-a;this[n];)delete this[n++];return new he(r)},ue.exclude=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]==t)return this.splice(e,1),!0},ue.animate=function(t,i,n,s){(e.is(n,"function")||!n)&&(s=n||null);var r,o,a=this.items.length,l=a,c=this;if(!a)return this;s&&(o=function(){!--a&&s.call(c)}),n=e.is(n,W)?n:o;var h=e.animation(t,i,n,o);for(r=this.items[--l].animate(h);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(r,h,h);return this},ue.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ue.getBBox=function(){for(var t=[],e=[],i=[],n=[],s=this.items.length;s--;)if(!this.items[s].removed){var r=this.items[s].getBBox();t.push(r.x),e.push(r.y),i.push(r.x+r.width),n.push(r.y+r.height)}return t=V[M](0,t),e=V[M](0,e),i=j[M](0,i),n=j[M](0,n),{x:t,y:e,x2:i,y2:n,width:i-t,height:n-e}},ue.clone=function(t){t=new he;for(var e=0,i=this.items.length;e<i;e++)t.push(this.items[e].clone());return t},ue.toString=function(){return"Raphaël‘s set"},e.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var n in t.face)t.face[C](n)&&(e.face[n]=t.face[n]);if(this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e],!t.svg){e.face["units-per-em"]=Q(t.face["units-per-em"],10);for(var s in t.glyphs)if(t.glyphs[C](s)){var r=t.glyphs[s];if(e.glyphs[s]={w:r.w,k:{},d:r.d&&"M"+r.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},r.k)for(var o in r.k)r[C](o)&&(e.glyphs[s].k[o]=r.k[o])}}return t},x.getFont=function(t,i,n,s){if(s=s||"normal",n=n||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,e.fonts){var r=e.fonts[t];if(!r){var o=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,O)+"(\\s|$)","i");for(var a in e.fonts)if(e.fonts[C](a)&&o.test(a)){r=e.fonts[a];break}}var l;if(r)for(var c=0,h=r.length;c<h&&(l=r[c],l.face["font-weight"]!=i||l.face["font-style"]!=n&&l.face["font-style"]||l.face["font-stretch"]!=s);c++);return l}},x.print=function(t,i,n,s,r,o,a){o=o||"middle",a=j(V(a||0,1),-1);var l,c=L(n)[I](O),h=0,u=0,d=O;if(e.is(s,n)&&(s=this.getFont(s)),s){l=(r||16)/s.face["units-per-em"];for(var p=s.face.bbox[I](w),f=+p[0],g=p[3]-p[1],m=0,v=+p[1]+("baseline"==o?g+ +s.face.descent:g/2),y=0,b=c.length;y<b;y++){if("\n"==c[y])h=0,_=0,u=0,m+=g;else{var x=u&&s.glyphs[c[y-1]]||{},_=s.glyphs[c[y]];h+=u?(x.w||s.w)+(x.k&&x.k[c[y]]||0)+s.w*a:0,u=1}_&&_.d&&(d+=e.transformPath(_.d,["t",h*l,m*l,"s",l,l,f,v,"t",(t-f)/l,(i-v)/l]))}}return this.path(d).attr({fill:"#000",stroke:"none"})},x.add=function(t){if(e.is(t,"array"))for(var i,n=this.set(),s=0,r=t.length;s<r;s++)i=t[s]||{},_[C](i.type)&&n.push(this[i.type]().attr(i));return n},e.format=function(t,i){var n=e.is(i,G)?[0][A](i):arguments;return t&&e.is(t,W)&&n.length-1&&(t=t.replace(k,function(t,e){return null==n[++e]?O:n[e]})),t||O},e.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(t,i,n){var s=n;return i.replace(e,function(t,e,i,n,r){e=e||n,s&&(e in s&&(s=s[e]),"function"==typeof s&&r&&(s=s()))}),s=(null==s||s==n?t:s)+""};return function(e,n){return String(e).replace(t,function(t,e){return i(t,e,n)})}}(),e.ninja=function(){return T.was?S.win.Raphael=T.is:delete Raphael,e},e.st=ue,function(t,i,n){function s(){/in/.test(t.readyState)?setTimeout(s,9):e.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(i,n=function(){t.removeEventListener(i,n,!1),t.readyState="complete"},!1),t.readyState="loading"),s()}(document,"DOMContentLoaded"),T.was?S.win.Raphael=e:Raphael=e,t.on("raphael.DOMload",function(){b=!0}),e}),define("raphael-svg",["raphael-core"],function(t){if(t.svg){var e="hasOwnProperty",i=String,n=parseFloat,s=parseInt,r=Math,o=r.max,a=r.abs,l=r.pow,c=/[, ]+/,h=t.eve,u="",d=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(n,s){if(s){"string"==typeof n&&(n=m(n));for(var r in s)s[e](r)&&("xlink:"==r.substring(0,6)?n.setAttributeNS(p,r.substring(6),i(s[r])):n.setAttribute(r,i(s[r])))}else n=t._g.doc.createElementNS("http://www.w3.org/2000/svg",n),n.style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},v=function(e,s){var c="linear",h=e.id+s,d=.5,p=.5,f=e.node,g=e.paper,v=f.style,y=t._g.doc.getElementById(h);if(!y){if(s=i(s).replace(t._radial_gradient,function(t,e,i){if(c="radial",e&&i){d=n(e),p=n(i);var s=2*(p>.5)-1;l(d-.5,2)+l(p-.5,2)>.25&&(p=r.sqrt(.25-l(d-.5,2))*s+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*s)}return u}),s=s.split(/\s*\-\s*/),"linear"==c){var b=s.shift();if(b=-n(b),isNaN(b))return null;var x=[0,0,r.cos(t.rad(b)),r.sin(t.rad(b))],w=1/(o(a(x[2]),a(x[3]))||1);x[2]*=w,x[3]*=w,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var _=t._parseDots(s);if(!_)return null;if(h=h.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&h!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){y=m(c+"Gradient",{id:h}),e.gradient=y,m(y,"radial"==c?{fx:d,fy:p}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(y);for(var k=0,C=_.length;k<C;k++)y.appendChild(m("stop",{offset:_[k].offset?_[k].offset:k?"100%":"0%","stop-color":_[k].color||"#fff"}))}}return m(f,{fill:"url(#"+h+")",opacity:1,"fill-opacity":1}),v.fill=u,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(n,s,r){if("path"==n.type){for(var o,a,l,c,h,d=i(s).toLowerCase().split("-"),p=n.paper,v=r?"end":"start",y=n.node,b=n.attrs,x=b["stroke-width"],w=d.length,_="classic",k=3,C=3,S=5;w--;)switch(d[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=d[w];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==_?(k+=2,C+=2,S+=2,l=1,c=r?4:1,h={fill:"none",stroke:b.stroke}):(c=l=k/2,h={fill:b.stroke,stroke:"none"}),n._.arrows?r?(n._.arrows.endPath&&g[n._.arrows.endPath]--,n._.arrows.endMarker&&g[n._.arrows.endMarker]--):(n._.arrows.startPath&&g[n._.arrows.startPath]--,n._.arrows.startMarker&&g[n._.arrows.startMarker]--):n._.arrows={},"none"!=_){var T="raphael-marker-"+_,E="raphael-marker-"+v+_+k+C;t._g.doc.getElementById(T)?g[T]++:(p.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:f[_],id:T})),g[T]=1);var M,A=t._g.doc.getElementById(E);A?(g[E]++,M=A.getElementsByTagName("use")[0]):(A=m(m("marker"),{id:E,markerHeight:C,markerWidth:k,orient:"auto",refX:c,refY:C/2}),M=m(m("use"),{"xlink:href":"#"+T,transform:(r?"rotate(180 "+k/2+" "+C/2+") ":u)+"scale("+k/S+","+C/S+")","stroke-width":(1/((k/S+C/S)/2)).toFixed(4)}),A.appendChild(M),p.defs.appendChild(A),g[E]=1),m(M,h);var P=l*("diamond"!=_&&"oval"!=_);r?(o=n._.arrows.startdx*x||0,a=t.getTotalLength(b.path)-P*x):(o=P*x,a=t.getTotalLength(b.path)-(n._.arrows.enddx*x||0)),h={},h["marker-"+v]="url(#"+E+")",(a||o)&&(h.d=Raphael.getSubpath(b.path,o,a)),m(y,h),n._.arrows[v+"Path"]=T,n._.arrows[v+"Marker"]=E,n._.arrows[v+"dx"]=P,n._.arrows[v+"Type"]=_,n._.arrows[v+"String"]=s}else r?(o=n._.arrows.startdx*x||0,a=t.getTotalLength(b.path)-o):(o=0,a=t.getTotalLength(b.path)-(n._.arrows.enddx*x||0)),n._.arrows[v+"Path"]&&m(y,{d:Raphael.getSubpath(b.path,o,a)}),delete n._.arrows[v+"Path"],delete n._.arrows[v+"Marker"],delete n._.arrows[v+"dx"],delete n._.arrows[v+"Type"],delete n._.arrows[v+"String"];for(h in g)if(g[e](h)&&!g[h]){var O=t._g.doc.getElementById(h);O&&O.parentNode.removeChild(O)}}},x={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,e,n){if(e=x[i(e).toLowerCase()]){for(var s=t.attrs["stroke-width"]||"1",r={round:s,square:s,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,o=[],a=e.length;a--;)o[a]=e[a]*s+(a%2?1:-1)*r;m(t.node,{"stroke-dasharray":o.join(",")})}},_=function(n,r){var l=n.node,h=n.attrs,d=l.style.visibility;l.style.visibility="hidden";for(var f in r)if(r[e](f)){if(!t._availableAttrs[e](f))continue;var g=r[f];switch(h[f]=g,f){case"blur":n.blur(g);break;case"href":case"title":case"target":var x=l.parentNode;if("a"!=x.tagName.toLowerCase()){var _=m("a");x.insertBefore(_,l),_.appendChild(l),x=_}"target"==f?x.setAttributeNS(p,"show","blank"==g?"new":g):x.setAttributeNS(p,f,g);break;case"cursor":l.style.cursor=g;break;case"transform":n.transform(g);break;case"arrow-start":b(n,g);break;case"arrow-end":b(n,g,1);break;case"clip-rect":var k=i(g).split(c);if(4==k.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var S=m("clipPath"),T=m("rect");S.id=t.createUUID(),m(T,{x:k[0],y:k[1],width:k[2],height:k[3]}),S.appendChild(T),n.paper.defs.appendChild(S),m(l,{"clip-path":"url(#"+S.id+")"}),n.clip=T}if(!g){var E=l.getAttribute("clip-path");if(E){var M=t._g.doc.getElementById(E.replace(/(^url\(#|\)$)/g,u));M&&M.parentNode.removeChild(M),m(l,{"clip-path":u}),delete n.clip}}break;case"path":"path"==n.type&&(m(l,{d:g?h.path=t._pathToAbsolute(g):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(f,g),n._.dirty=1,!h.fx)break;f="x",g=h.x;case"x":h.fx&&(g=-h.x-(h.width||0));case"rx":if("rx"==f&&"rect"==n.type)break;case"cx":l.setAttribute(f,g),n.pattern&&y(n),n._.dirty=1;break;case"height":if(l.setAttribute(f,g),n._.dirty=1,!h.fy)break;f="y",g=h.y;case"y":h.fy&&(g=-h.y-(h.height||0));case"ry":if("ry"==f&&"rect"==n.type)break;case"cy":l.setAttribute(f,g),n.pattern&&y(n),n._.dirty=1;break;case"r":"rect"==n.type?m(l,{rx:g,ry:g}):l.setAttribute(f,g),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(p,"href",g);break;case"stroke-width":1==n._.sx&&1==n._.sy||(g/=o(a(n._.sx),a(n._.sy))||1),n.paper._vbSize&&(g*=n.paper._vbSize),l.setAttribute(f,g),h["stroke-dasharray"]&&w(n,h["stroke-dasharray"],r),n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));
break;case"stroke-dasharray":w(n,g,r);break;case"fill":var A=i(g).match(t._ISURL);if(A){S=m("pattern");var P=m("image");S.id=t.createUUID(),m(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(P,{x:0,y:0,"xlink:href":A[1]}),S.appendChild(P),function(e){t._preload(A[1],function(){var t=this.offsetWidth,i=this.offsetHeight;m(e,{width:t,height:i}),m(P,{width:t,height:i}),n.paper.safari()})}(S),n.paper.defs.appendChild(S),m(l,{fill:"url(#"+S.id+")"}),n.pattern=S,n.pattern&&y(n);break}var O=t.getRGB(g);if(O.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g)){if("opacity"in h||"fill-opacity"in h){var D=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u));if(D){var L=D.getElementsByTagName("stop");m(L[L.length-1],{"stop-opacity":("opacity"in h?h.opacity:1)*("fill-opacity"in h?h["fill-opacity"]:1)})}}h.gradient=g,h.fill="none";break}}else delete r.gradient,delete h.gradient,!t.is(h.opacity,"undefined")&&t.is(r.opacity,"undefined")&&m(l,{opacity:h.opacity}),!t.is(h["fill-opacity"],"undefined")&&t.is(r["fill-opacity"],"undefined")&&m(l,{"fill-opacity":h["fill-opacity"]});O[e]("opacity")&&m(l,{"fill-opacity":O.opacity>1?O.opacity/100:O.opacity});case"stroke":O=t.getRGB(g),l.setAttribute(f,O.hex),"stroke"==f&&O[e]("opacity")&&m(l,{"stroke-opacity":O.opacity>1?O.opacity/100:O.opacity}),"stroke"==f&&n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g);break;case"opacity":h.gradient&&!h[e]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(h.gradient){D=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u)),D&&(L=D.getElementsByTagName("stop"),m(L[L.length-1],{"stop-opacity":g}));break}default:"font-size"==f&&(g=s(g,10)+"px");var I=f.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[I]=g,n._.dirty=1,l.setAttribute(f,g)}}C(n,r),l.style.visibility=d},k=1.2,C=function(n,r){if("text"==n.type&&(r[e]("text")||r[e]("font")||r[e]("font-size")||r[e]("x")||r[e]("y"))){var o=n.attrs,a=n.node,l=a.firstChild?s(t._g.doc.defaultView.getComputedStyle(a.firstChild,u).getPropertyValue("font-size"),10):10;if(r[e]("text")){for(o.text=r.text;a.firstChild;)a.removeChild(a.firstChild);for(var c,h=i(r.text).split("\n"),d=[],p=0,f=h.length;p<f;p++)c=m("tspan"),p&&m(c,{dy:l*k,x:o.x}),c.appendChild(t._g.doc.createTextNode(h[p])),a.appendChild(c),d[p]=c}else for(d=a.getElementsByTagName("tspan"),p=0,f=d.length;p<f;p++)p?m(d[p],{dy:l*k,x:o.x}):m(d[0],{dy:0});m(a,{x:o.x,y:o.y}),n._.dirty=1;var g=n._getBBox(),v=o.y-(g.y+g.height/2);v&&t.is(v,"finite")&&m(d[0],{dy:v})}},S=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=i,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},T=t.el;S.prototype=T,T.constructor=S,t._engine.path=function(t,e){var i=m("path");e.canvas&&e.canvas.appendChild(i);var n=new S(i,e);return n.type="path",_(n,{fill:"none",stroke:"#000",path:t}),n},T.rotate=function(t,e,s){if(this.removed)return this;if(t=i(t).split(c),t.length-1&&(e=n(t[1]),s=n(t[2])),t=n(t[0]),null==s&&(e=s),null==e||null==s){var r=this.getBBox(1);e=r.x+r.width/2,s=r.y+r.height/2}return this.transform(this._.transform.concat([["r",t,e,s]])),this},T.scale=function(t,e,s,r){if(this.removed)return this;if(t=i(t).split(c),t.length-1&&(e=n(t[1]),s=n(t[2]),r=n(t[3])),t=n(t[0]),null==e&&(e=t),null==r&&(s=r),null==s||null==r)var o=this.getBBox(1);return s=null==s?o.x+o.width/2:s,r=null==r?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",t,e,s,r]])),this},T.translate=function(t,e){return this.removed?this:(t=i(t).split(c),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},T.transform=function(i){var n=this._;if(null==i)return n.transform;if(t._extractTransform(this,i),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var s=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":s})}return this},T.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},T.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},T.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),h.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var i in this)this[i]="function"==typeof this[i]?t._removedFactory(i):null;this.removed=!0}},T._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(i){}finally{e=e||{}}return t&&this.hide(),e},T.attr=function(i,n){if(this.removed)return this;if(null==i){var s={};for(var r in this.attrs)this.attrs[e](r)&&(s[r]=this.attrs[r]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==n&&t.is(i,"string")){if("fill"==i&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==i)return this._.transform;for(var o=i.split(c),a={},l=0,u=o.length;l<u;l++)i=o[l],i in this.attrs?a[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?a[i]=this.paper.customAttributes[i].def:a[i]=t._availableAttrs[i];return u-1?a:a[o[0]]}if(null==n&&t.is(i,"array")){for(a={},l=0,u=i.length;l<u;l++)a[i[l]]=this.attr(i[l]);return a}if(null!=n){var d={};d[i]=n}else null!=i&&t.is(i,"object")&&(d=i);for(var p in d)h("raphael.attr."+p+"."+this.id,this,d[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&d[e](p)&&t.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(d[p]));this.attrs[p]=d[p];for(var g in f)f[e](g)&&(d[g]=f[g])}return _(this,d),this},T.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&t._tofront(this,e),this},T.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper);this.paper;return this},T.insertAfter=function(e){if(this.removed)return this;var i=e.node||e[e.length-1].node;return i.nextSibling?i.parentNode.insertBefore(this.node,i.nextSibling):i.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this},T.insertBefore=function(e){if(this.removed)return this;var i=e.node||e[0].node;return i.parentNode.insertBefore(this.node,i),t._insertbefore(this,e,this.paper),this},T.blur=function(e){var i=this;if(0!==+e){var n=m("filter"),s=m("feGaussianBlur");i.attrs.blur=e,n.id=t.createUUID(),m(s,{stdDeviation:+e||1.5}),n.appendChild(s),i.paper.defs.appendChild(n),i._blur=n,m(i.node,{filter:"url(#"+n.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter")},t._engine.circle=function(t,e,i,n){var s=m("circle");t.canvas&&t.canvas.appendChild(s);var r=new S(s,t);return r.attrs={cx:e,cy:i,r:n,fill:"none",stroke:"#000"},r.type="circle",m(s,r.attrs),r},t._engine.rect=function(t,e,i,n,s,r){var o=m("rect");t.canvas&&t.canvas.appendChild(o);var a=new S(o,t);return a.attrs={x:e,y:i,width:n,height:s,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},a.type="rect",m(o,a.attrs),a},t._engine.ellipse=function(t,e,i,n,s){var r=m("ellipse");t.canvas&&t.canvas.appendChild(r);var o=new S(r,t);return o.attrs={cx:e,cy:i,rx:n,ry:s,fill:"none",stroke:"#000"},o.type="ellipse",m(r,o.attrs),o},t._engine.image=function(t,e,i,n,s,r){var o=m("image");m(o,{x:i,y:n,width:s,height:r,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(o);var a=new S(o,t);return a.attrs={x:i,y:n,width:s,height:r,src:e},a.type="image",a},t._engine.text=function(e,i,n,s){var r=m("text");e.canvas&&e.canvas.appendChild(r);var o=new S(r,e);return o.attrs={x:i,y:n,"text-anchor":"middle",text:s,font:t._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",_(o,o.attrs),o},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e&&e.container,n=e.x,s=e.y,r=e.width,o=e.height;if(!i)throw new Error("SVG container not found.");var a,l=m("svg"),c="overflow:hidden;";return n=n||0,s=s||0,r=r||512,o=o||342,m(l,{height:o,version:1.1,width:r,xmlns:"http://www.w3.org/2000/svg"}),1==i?(l.style.cssText=c+"position:absolute;left:"+n+"px;top:"+s+"px",t._g.doc.body.appendChild(l),a=1):(l.style.cssText=c+"position:relative",i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l)),i=new t._Paper,i.width=r,i.height=o,i.canvas=l,i.clear(),i._left=i._top=0,a&&(i.renderfix=function(){}),i.renderfix(),i},t._engine.setViewBox=function(t,e,i,n,s){h("raphael.setViewBox",this,this._viewBox,[t,e,i,n,s]);var r,a,l=o(i/this.width,n/this.height),c=this.top,u=s?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,r="0 0 "+this.width+d+this.height):(this._vbSize=l,r=t+d+e+d+i+d+n),m(this.canvas,{viewBox:r,preserveAspectRatio:u});l&&c;)a="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":a}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[t,e,i,n,!!s],this},t.prototype.renderfix=function(){var t,e=this.canvas,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(n){t=e.createSVGMatrix()}var s=-t.e%1,r=-t.f%1;(s||r)&&(s&&(this._left=(this._left+s)%1,i.left=this._left+"px"),r&&(this._top=(this._top+r)%1,i.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(t._g.doc.createTextNode("Created with Raphaël "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=m("defs"))},t.prototype.remove=function(){h("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var E=t.st;for(var M in T)T[e](M)&&!E[e](M)&&(E[M]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(M));return t}}),define("raphael-vml",["raphael-core"],function(t){if(t.vml){var e="hasOwnProperty",i=String,n=parseFloat,s=Math,r=s.round,o=s.max,a=s.min,l=s.abs,c="fill",h=/[, ]+/,u=t.eve,d=" progid:DXImageTransform.Microsoft",p=" ",f="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",x=21600,w={path:1,rect:1,image:1},_={circle:1,ellipse:1},k=function(e){var n=/[ahqstv]/gi,s=t._pathToAbsolute;if(i(e).match(n)&&(s=t._path2curve),n=/[clmz]/g,s==t._pathToAbsolute&&!i(e).match(n)){var o=i(e).replace(m,function(t,e,i){var n=[],s="m"==e.toLowerCase(),o=g[e];return i.replace(y,function(t){s&&2==n.length&&(o+=n+g["m"==e?"l":"L"],n=[]),n.push(r(t*x))}),o+n});return o}var a,l,c=s(e);o=[];for(var h=0,u=c.length;h<u;h++){a=c[h],l=c[h][0].toLowerCase(),"z"==l&&(l="x");for(var d=1,v=a.length;d<v;d++)l+=r(a[d]*x)+(d!=v-1?",":f);o.push(l)}return o.join(p)},C=function(e,i,n){var s=t.matrix();return s.rotate(-e,.5,.5),{dx:s.x(i,n),dy:s.y(i,n)}},S=function(t,e,i,n,s,r){var o=t._,a=t.matrix,h=o.fillpos,u=t.node,d=u.style,f=1,g="",m=x/e,v=x/i;if(d.visibility="hidden",e&&i){if(u.coordsize=l(m)+p+l(v),d.rotation=r*(e*i<0?-1:1),r){var y=C(r,n,s);n=y.dx,s=y.dy}if(e<0&&(g+="x"),i<0&&(g+=" y")&&(f=-1),d.flip=g,u.coordorigin=n*-m+p+s*-v,h||o.fillsize){var b=u.getElementsByTagName(c);b=b&&b[0],u.removeChild(b),h&&(y=C(r,a.x(h[0],h[1]),a.y(h[0],h[1])),b.position=y.dx*f+p+y.dy*f),o.fillsize&&(b.size=o.fillsize[0]*l(e)+p+o.fillsize[1]*l(i)),u.appendChild(b)}d.visibility="visible"}};t.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var T=function(t,e,n){for(var s=i(e).toLowerCase().split("-"),r=n?"end":"start",o=s.length,a="classic",l="medium",c="medium";o--;)switch(s[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=s[o];break;case"wide":case"narrow":c=s[o];break;case"long":case"short":l=s[o]}var h=t.node.getElementsByTagName("stroke")[0];h[r+"arrow"]=a,h[r+"arrowlength"]=l,h[r+"arrowwidth"]=c},E=function(s,l){s.attrs=s.attrs||{};var u=s.node,d=s.attrs,g=u.style,m=w[s.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),v=_[s.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),y=s;for(var b in l)l[e](b)&&(d[b]=l[b]);if(m&&(d.path=t._getPath[s.type](s),s._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&s.blur(l.blur),(l.path&&"path"==s.type||m)&&(u.path=k(~i(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),"image"==s.type&&(s._.fillpos=[d.x,d.y],s._.fillsize=[d.width,d.height],S(s,1,1,0,0,0))),"transform"in l&&s.transform(l.transform),v){var C=+d.cx,E=+d.cy,A=+d.rx||+d.r||0,P=+d.ry||+d.r||0;u.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",r((C-A)*x),r((E-P)*x),r((C+A)*x),r((E+P)*x),r(C*x))}if("clip-rect"in l){var D=i(l["clip-rect"]).split(h);if(4==D.length){D[2]=+D[2]+ +D[0],D[3]=+D[3]+ +D[1];var L=u.clipRect||t._g.doc.createElement("div"),I=L.style;I.clip=t.format("rect({1}px {2}px {3}px {0}px)",D),u.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=s.paper.width+"px",I.height=s.paper.height+"px",u.parentNode.insertBefore(L,u),L.appendChild(u),u.clipRect=L)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(s.textpath){var R=s.textpath.style;l.font&&(R.font=l.font),l["font-family"]&&(R.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),l["font-size"]&&(R.fontSize=l["font-size"]),l["font-weight"]&&(R.fontWeight=l["font-weight"]),l["font-style"]&&(R.fontStyle=l["font-style"])}if("arrow-start"in l&&T(y,l["arrow-start"]),"arrow-end"in l&&T(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var N=u.getElementsByTagName(c),B=!1;if(N=N&&N[0],!N&&(B=N=O(c)),"image"==s.type&&l.src&&(N.src=l.src),l.fill&&(N.on=!0),null!=N.on&&"none"!=l.fill&&null!==l.fill||(N.on=!1),N.on&&l.fill){var H=i(l.fill).match(t._ISURL);if(H){N.parentNode==u&&u.removeChild(N),N.rotate=!0,N.src=H[1],N.type="tile";var j=s.getBBox(1);N.position=j.x+p+j.y,s._.fillpos=[j.x,j.y],t._preload(H[1],function(){s._.fillsize=[this.offsetWidth,this.offsetHeight]})}else N.color=t.getRGB(l.fill).hex,N.src=f,N.type="solid",t.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=i(l.fill).charAt())&&M(y,l.fill,N)&&(d.fill="none",d.gradient=l.fill,N.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var V=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);V=a(o(V,0),1),N.opacity=V,N.src&&(N.color="none")}u.appendChild(N);var F=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],$=!1;!F&&($=F=O("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(F.on=!0),("none"==l.stroke||null===l.stroke||null==F.on||0==l.stroke||0==l["stroke-width"])&&(F.on=!1);var z=t.getRGB(l.stroke);F.on&&l.stroke&&(F.color=z.hex),V=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+z.o+1||2)-1);var Y=.75*(n(l["stroke-width"])||1);if(V=a(o(V,0),1),null==l["stroke-width"]&&(Y=d["stroke-width"]),l["stroke-width"]&&(F.weight=Y),Y&&Y<1&&(V*=Y)&&(F.weight=1),F.opacity=V,l["stroke-linejoin"]&&(F.joinstyle=l["stroke-linejoin"]||"miter"),F.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(F.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};F.dashstyle=W[e](l["stroke-dasharray"])?W[l["stroke-dasharray"]]:f}$&&u.appendChild(F)}if("text"==y.type){y.paper.canvas.style.display=f;var G=y.paper.span,U=100,q=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);g=G.style,d.font&&(g.font=d.font),d["font-family"]&&(g.fontFamily=d["font-family"]),d["font-weight"]&&(g.fontWeight=d["font-weight"]),d["font-style"]&&(g.fontStyle=d["font-style"]),q=n(d["font-size"]||q&&q[0])||10,g.fontSize=q*U+"px",y.textpath.string&&(G.innerHTML=i(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=G.getBoundingClientRect();y.W=d.w=(X.right-X.left)/U,y.H=d.h=(X.bottom-X.top)/U,y.X=d.x,y.Y=d.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=t.format("m{0},{1}l{2},{1}",r(d.x*x),r(d.y*x),r(d.x*x)+1));for(var J=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,K=J.length;Z<K;Z++)if(J[Z]in l){y._.dirty=1;break}switch(d["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},M=function(e,r,o){e.attrs=e.attrs||{};var a=(e.attrs,Math.pow),l="linear",c=".5 .5";if(e.attrs.gradient=r,r=i(r).replace(t._radial_gradient,function(t,e,i){return l="radial",e&&i&&(e=n(e),i=n(i),a(e-.5,2)+a(i-.5,2)>.25&&(i=s.sqrt(.25-a(e-.5,2))*(2*(i>.5)-1)+.5),c=e+p+i),f}),r=r.split(/\s*\-\s*/),"linear"==l){var h=r.shift();if(h=-n(h),isNaN(h))return null}var u=t._parseDots(r);if(!u)return null;if(e=e.shape||e.node,u.length){e.removeChild(o),o.on=!0,o.method="none",o.color=u[0].color,o.color2=u[u.length-1].color;for(var d=[],g=0,m=u.length;g<m;g++)u[g].offset&&d.push(u[g].offset+p+u[g].color);o.colors=d.length?d.join():"0% "+o.color,"radial"==l?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=c,o.angle=0):(o.type="gradient",o.angle=(270-h)%360),e.appendChild(o)}return 1},A=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},P=t.el;A.prototype=P,P.constructor=A,P.transform=function(e){if(null==e)return this._.transform;var n,s=this.paper._viewBoxShift,r=s?"s"+[s.scale,s.scale]+"-1-1t"+[s.dx,s.dy]:f;s&&(n=e=i(e).replace(/\.{3}|\u2026/g,this._.transform||f)),t._extractTransform(this,r+e);var o,a=this.matrix.clone(),l=this.skew,c=this.node,h=~i(this.attrs.fill).indexOf("-"),u=!i(this.attrs.fill).indexOf("url(");if(a.translate(-.5,-.5),u||h||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",o=a.split(),h&&o.noRotation||!o.isSimple){c.style.filter=a.toFilter();var d=this.getBBox(),g=this.getBBox(1),m=d.x-g.x,v=d.y-g.y;c.coordorigin=m*-x+p+v*-x,S(this,1,1,m,v,0)}else c.style.filter=f,S(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);else c.style.filter=f,l.matrix=i(a),l.offset=a.offset();return n&&(this._.transform=n),this},P.rotate=function(t,e,s){if(this.removed)return this;if(null!=t){if(t=i(t).split(h),t.length-1&&(e=n(t[1]),s=n(t[2])),t=n(t[0]),null==s&&(e=s),null==e||null==s){var r=this.getBBox(1);e=r.x+r.width/2,s=r.y+r.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,s]])),this}},P.translate=function(t,e){return this.removed?this:(t=i(t).split(h),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},P.scale=function(t,e,s,r){if(this.removed)return this;if(t=i(t).split(h),t.length-1&&(e=n(t[1]),s=n(t[2]),r=n(t[3]),isNaN(s)&&(s=null),isNaN(r)&&(r=null)),t=n(t[0]),null==e&&(e=t),null==r&&(s=r),null==s||null==r)var o=this.getBBox(1);return s=null==s?o.x+o.width/2:s,r=null==r?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",t,e,s,r]])),this._.dirtyT=1,this},P.hide=function(){return!this.removed&&(this.node.style.display="none"),this},P.show=function(){return!this.removed&&(this.node.style.display=f),this},P._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},P.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},P.attr=function(i,n){if(this.removed)return this;if(null==i){var s={};for(var r in this.attrs)this.attrs[e](r)&&(s[r]=this.attrs[r]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==n&&t.is(i,"string")){if(i==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=i.split(h),a={},l=0,d=o.length;l<d;l++)i=o[l],i in this.attrs?a[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?a[i]=this.paper.customAttributes[i].def:a[i]=t._availableAttrs[i];return d-1?a:a[o[0]]}if(this.attrs&&null==n&&t.is(i,"array")){for(a={},l=0,d=i.length;l<d;l++)a[i[l]]=this.attr(i[l]);return a}var p;null!=n&&(p={},p[i]=n),null==n&&t.is(i,"object")&&(p=i);for(var f in p)u("raphael.attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&p[e](f)&&t.is(this.paper.customAttributes[f],"function")){var g=this.paper.customAttributes[f].apply(this,[].concat(p[f]));this.attrs[f]=p[f];for(var m in g)g[e](m)&&(p[m]=g[m])}p.text&&"text"==this.type&&(this.textpath.string=p.text),E(this,p)}return this},P.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},P.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},P.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},P.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},P.blur=function(e){var i=this.node.runtimeStyle,n=i.filter;n=n.replace(v,f),0!==+e?(this.attrs.blur=e,i.filter=n+p+d+".Blur(pixelradius="+(+e||1.5)+")",i.margin=t.format("-{0}px 0 0 -{0}px",r(+e||1.5))):(i.filter=n,i.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var i=O("shape");i.style.cssText=b,i.coordsize=x+p+x,i.coordorigin=e.coordorigin;var n=new A(i,e),s={fill:"none",stroke:"#000"};t&&(s.path=t),n.type="path",n.path=[],n.Path=f,E(n,s),e.canvas.appendChild(i);var r=O("skew");return r.on=!0,i.appendChild(r),n.skew=r,n.transform(f),n},t._engine.rect=function(e,i,n,s,r,o){var a=t._rectPath(i,n,s,r,o),l=e.path(a),c=l.attrs;return l.X=c.x=i,l.Y=c.y=n,l.W=c.width=s,l.H=c.height=r,c.r=o,c.path=a,l.type="rect",l},t._engine.ellipse=function(t,e,i,n,s){var r=t.path();r.attrs;return r.X=e-n,r.Y=i-s,r.W=2*n,r.H=2*s,r.type="ellipse",E(r,{cx:e,cy:i,rx:n,ry:s}),r},t._engine.circle=function(t,e,i,n){var s=t.path();s.attrs;return s.X=e-n,s.Y=i-n,s.W=s.H=2*n,s.type="circle",E(s,{cx:e,cy:i,r:n}),s},t._engine.image=function(e,i,n,s,r,o){var a=t._rectPath(n,s,r,o),l=e.path(a).attr({stroke:"none"}),h=l.attrs,u=l.node,d=u.getElementsByTagName(c)[0];return h.src=i,l.X=h.x=n,l.Y=h.y=s,l.W=h.width=r,l.H=h.height=o,h.path=a,l.type="image",d.parentNode==u&&u.removeChild(d),d.rotate=!0,d.src=i,d.type="tile",l._.fillpos=[n,s],l._.fillsize=[r,o],u.appendChild(d),S(l,1,1,0,0,0),l},t._engine.text=function(e,n,s,o){var a=O("shape"),l=O("path"),c=O("textpath");n=n||0,s=s||0,o=o||"",l.v=t.format("m{0},{1}l{2},{1}",r(n*x),r(s*x),r(n*x)+1),l.textpathok=!0,c.string=i(o),c.on=!0,a.style.cssText=b,a.coordsize=x+p+x,a.coordorigin="0 0";var h=new A(a,e),u={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:o};h.shape=a,h.path=l,h.textpath=c,h.type="text",h.attrs.text=i(o),h.attrs.x=n,h.attrs.y=s,h.attrs.w=1,h.attrs.h=1,E(h,u),a.appendChild(c),a.appendChild(l),e.canvas.appendChild(a);var d=O("skew");return d.on=!0,a.appendChild(d),h.skew=d,h.transform(f),h},t._engine.setSize=function(e,i){var n=this.canvas.style;return this.width=e,this.height=i,e==+e&&(e+="px"),i==+i&&(i+="px"),n.width=e,n.height=i,n.clip="rect(0 "+e+" "+i+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,i,n,s,r){t.eve("raphael.setViewBox",this,this._viewBox,[e,i,n,s,r]);var a,l,c=this.width,h=this.height,u=1/o(n/c,s/h);return r&&(a=h/s,l=c/n,n*a<c&&(e-=(c-n*a)/2/a),s*l<h&&(i-=(h-s*l)/2/l)),this._viewBox=[e,i,n,s,!!r],this._viewBoxShift={dx:-e,dy:-i,scale:u},this.forEach(function(t){t.transform("...")}),this};var O;t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),O=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(i){O=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e.container,n=e.height,s=e.width,r=e.x,o=e.y;if(!i)throw new Error("VML container not found.");var a=new t._Paper,l=a.canvas=t._g.doc.createElement("div"),c=l.style;return r=r||0,o=o||0,s=s||512,n=n||342,a.width=s,a.height=n,s==+s&&(s+="px"),n==+n&&(n+="px"),a.coordsize=1e3*x+p+1e3*x,a.coordorigin="0 0",a.span=t._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(a.span),c.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,n),1==i?(t._g.doc.body.appendChild(l),c.left=r+"px",c.top=o+"px",c.position="absolute"):i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),a.renderfix=function(){},a},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=f,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var D=t.st;for(var L in P)P[e](L)&&!D[e](L)&&(D[L]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(L));return t}}),define("raphael",["raphael-core","raphael-svg","raphael-vml"],function(t){return t.ninja()}),define("components/pie-chart",["raphael"],function(t){"use strict";var e=function(t){return t%360*Math.PI/180},i=function(i,n,s){s=s||{};var r=i.attr("id"),o=i.width(),a=Math.max(i.width()-100,i.height()),l=o/2,c=.7*l,h=o/2,u=a/2,d=new t(r,o,a),p=d.set(),f=s.colors||[],g=s.startAngle||0,m=s.formatFunction||function(t){return t},v=s.duration||1e3,y=s.fontSize||22,b=s.bgColor||"#fff";d.customAttributes.segment=function(t){var i=e(g),n=e(g+t),s=t>180;return{path:[["M",h,u],["l",l*Math.cos(i),l*Math.sin(i)],["A",l,l,0,+s,1,h+l*Math.cos(n),u+l*Math.sin(n)],["z"]]}},d.customAttributes.textLoc=function(t,i){t=(g+t)%360;var n=e(t+i/2);return{x:h+(l+2*y)*Math.cos(n),y:u+(l+y)*Math.sin(n)}},s.emptyColor&&d.path().attr({segment:359.999,fill:s.emptyColor,stroke:"none"}),f.reverse();for(var x=0;x<n;x++){var w=x<f.length?f[x]:t.hsb(.1*x,1,.75);p.push(d.path().attr({segment:0,fill:w,stroke:"none"}))}f.reverse(),d.circle(h,u,c).attr({fill:b,stroke:"none"}),this.data={paper:d,paths:p,length:n,duration:v,formatFunction:m}};return i.prototype.draw=function(t,e){var i=this.data;if(t.length!=i.length)return void console.log("ERROR: Size of values array ("+t.length+") does not match expected ("+i.length+")");t.reverse();for(var n=0;n<i.length;n++){var s=t[n],r=360*(e?s/e:0);i.paths[n].animate({segment:r},i.duration,">")}return t.reverse(),this},i.prototype.clear=function(){this.data.paper.clear()},i}),function(){function t(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t}function e(){var t,e=arguments.length,i={},n=function(t,e){var i,s;for(s in e)e.hasOwnProperty(s)&&(i=e[s],"object"!=typeof t&&(t={}),t[s]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"number"!=typeof i.nodeType?n(t[s]||{},i):e[s]);return t};for(t=0;t<e;t++)i=n(i,arguments[t]);return i}function i(t,e){return parseInt(t,e||10)}function n(t){return"string"==typeof t}function s(t){return"object"==typeof t}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"number"==typeof t}function a(t){return ht.log(t)/ht.LN10}function l(t){return ht.pow(10,t)}function c(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function h(t){return t!==$&&null!==t}function u(t,e,i){var r,o;if(n(e))h(i)?t.setAttribute(e,i):t&&t.getAttribute&&(o=t.getAttribute(e));else if(h(e)&&s(e))for(r in e)t.setAttribute(r,e[r]);return o}function d(t){return r(t)?t:[t]}function p(){var t,e,i=arguments,n=i.length;for(t=0;t<n;t++)if(e=i[t],"undefined"!=typeof e&&null!==e)return e}function f(e,i){kt&&i&&i.opacity!==$&&(i.filter="alpha(opacity="+100*i.opacity+")"),t(e.style,i)}function g(e,i,n,s,r){return e=lt.createElement(e),i&&t(e,i),r&&f(e,{padding:0,border:Ht,margin:0}),n&&f(e,n),s&&s.appendChild(e),e}function m(e,i){var n=function(){};return n.prototype=new e,t(n.prototype,i),n}function v(t,e,n,s){var r=W.lang,o=e===-1?((t||0).toString().split(".")[1]||"").length:isNaN(e=mt(e))?2:e,e=void 0===n?r.decimalPoint:n,s=void 0===s?r.thousandsSep:s,r=t<0?"-":"",n=String(i(t=mt(+t||0).toFixed(o))),a=n.length>3?n.length%3:0;return r+(a?n.substr(0,a)+s:"")+n.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?e+mt(t-n).toFixed(o).slice(2):"")}function y(t,e){return Array((e||2)+1-String(t).length).join(0)+t}function b(t,e){for(var i,n,s,r,o,a="{",l=!1,c=[];(a=t.indexOf(a))!==-1;){if(i=t.slice(0,a),l){for(n=i.split(":"),s=n.shift().split("."),o=s.length,i=e,r=0;r<o;r++)i=i[s[r]];n.length&&(n=n.join(":"),s=/\.([0-9])/,r=W.lang,o=void 0,/f$/.test(n)?(o=(o=n.match(s))?o[1]:-1,i=v(i,o,r.decimalPoint,n.indexOf(",")>-1?r.thousandsSep:"")):i=G(n,i))}c.push(i),t=t.slice(a+1),a=(l=!l)?"}":"{"}return c.push(t),c.join("");
}function x(t,e,i,n){var s,i=p(i,1);for(s=t/i,e||(e=[1,2,2.5,5,10],n&&n.allowDecimals===!1&&(1===i?e=[1,2,5,10]:i<=.1&&(e=[1/i]))),n=0;n<e.length&&(t=e[n],!(s<=(e[n]+(e[n+1]||e[n]))/2));n++);return t*=i}function w(t,e){var i,n=e||[[Vt,[1,2,5,10,20,25,50,100,200,500]],[Ft,[1,2,5,10,15,30]],[$t,[1,2,5,10,15,30]],[zt,[1,2,3,4,6,8,12]],[Yt,[1,2]],[Wt,[1,2]],[Gt,[1,2,3,4,6]],[Ut,null]],s=n[n.length-1],r=X[s[0]],o=s[1];for(i=0;i<n.length&&(s=n[i],r=X[s[0]],o=s[1],!(n[i+1]&&t<=(r*o[o.length-1]+X[n[i+1][0]])/2));i++);return r===X[Ut]&&t<5*r&&(o=[1,2,5]),r===X[Ut]&&t<5*r&&(o=[1,2,5]),n=x(t/r,o),{unitRange:r,count:n,unitName:s[0]}}function _(e,i,n,s){var r,o=[],a={},l=W.global.useUTC,c=new Date(i),u=e.unitRange,d=e.count;if(h(i)){u>=X[Ft]&&(c.setMilliseconds(0),c.setSeconds(u>=X[$t]?0:d*dt(c.getSeconds()/d))),u>=X[$t]&&c[nt](u>=X[zt]?0:d*dt(c[Z]()/d)),u>=X[zt]&&c[st](u>=X[Yt]?0:d*dt(c[K]()/d)),u>=X[Yt]&&c[rt](u>=X[Gt]?1:d*dt(c[tt]()/d)),u>=X[Gt]&&(c[ot](u>=X[Ut]?0:d*dt(c[et]()/d)),r=c[it]()),u>=X[Ut]&&(r-=r%d,c[at](r)),u===X[Wt]&&c[rt](c[tt]()-c[Q]()+p(s,1)),i=1,r=c[it]();for(var s=c.getTime(),f=c[et](),g=c[tt](),c=l?0:(864e5+6e4*c.getTimezoneOffset())%864e5;s<n;)o.push(s),u===X[Ut]?s=J(r+i*d,0):u===X[Gt]?s=J(r,f+i*d):l||u!==X[Yt]&&u!==X[Wt]?(u<=X[zt]&&s%X[Yt]===c&&(a[s]=Yt),s+=u*d):s=J(r,f,g+i*d*(u===X[Yt]?1:7)),i++;o.push(s)}return o.info=t(e,{higherRanks:a,totalRange:u*d}),o}function k(){this.symbol=this.color=0}function C(t,e){var i,n,s=t.length;for(n=0;n<s;n++)t[n].ss_i=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.ss_i-n.ss_i:i}),n=0;n<s;n++)delete t[n].ss_i}function S(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function T(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function E(t,e){for(var i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function M(t){Y||(Y=g(Bt)),t&&Y.appendChild(t),Y.innerHTML=""}function A(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;ct.console&&console.log(i)}function P(t){return parseFloat(t.toPrecision(14))}function O(t,e){U=p(t,e.animation)}function D(){var t=W.global.useUTC,e=t?"getUTC":"get",i=t?"setUTC":"set";J=t?Date.UTC:function(t,e,i,n,s,r){return new Date(t,e,p(i,1),p(n,0),p(s,0),p(r,0)).getTime()},Z=e+"Minutes",K=e+"Hours",Q=e+"Day",tt=e+"Date",et=e+"Month",it=e+"FullYear",nt=i+"Minutes",st=i+"Hours",rt=i+"Date",ot=i+"Month",at=i+"FullYear"}function L(){}function I(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,!i&&!n&&this.addLabel()}function R(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)}function N(t,e,i,n,s,r){var o=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.stack=s,this.percent="percent"===r,this.alignOptions={align:e.align||(o?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":i?"bottom":"top"),y:p(e.y,o?4:i?14:-6),x:p(e.x,o?i?-6:6:0)},this.textAlign=e.textAlign||(o?i?"right":"left":"center")}function B(){this.init.apply(this,arguments)}function H(){this.init.apply(this,arguments)}function j(t,e){this.init(t,e)}function V(t,e){this.init(t,e)}function F(){this.init.apply(this,arguments)}var $,z,Y,W,G,U,q,X,J,Z,K,Q,tt,et,it,nt,st,rt,ot,at,lt=document,ct=window,ht=Math,ut=ht.round,dt=ht.floor,pt=ht.ceil,ft=ht.max,gt=ht.min,mt=ht.abs,vt=ht.cos,yt=ht.sin,bt=ht.PI,xt=2*bt/360,wt=navigator.userAgent,_t=ct.opera,kt=/msie/i.test(wt)&&!_t,Ct=8===lt.documentMode,St=/AppleWebKit/.test(wt),Tt=/Firefox/.test(wt),Et=/(Mobile|Android|Windows Phone)/.test(wt),Mt="http://www.w3.org/2000/svg",At=!!lt.createElementNS&&!!lt.createElementNS(Mt,"svg").createSVGRect,Pt=Tt&&parseInt(wt.split("Firefox/")[1],10)<4,Ot=!At&&!kt&&!!lt.createElement("canvas").getContext,Dt=lt.documentElement.ontouchstart!==$,Lt={},It=0,Rt=function(){},Nt=[],Bt="div",Ht="none",jt="rgba(192,192,192,"+(At?1e-4:.002)+")",Vt="millisecond",Ft="second",$t="minute",zt="hour",Yt="day",Wt="week",Gt="month",Ut="year",qt="stroke-width",Xt={};ct.Highcharts=ct.Highcharts?A(16,!0):{},G=function(e,i,n){if(!h(i)||isNaN(i))return"Invalid date";var s,e=p(e,"%Y-%m-%d %H:%M:%S"),r=new Date(i),o=r[K](),a=r[Q](),l=r[tt](),c=r[et](),u=r[it](),d=W.lang,f=d.weekdays,r=t({a:f[a].substr(0,3),A:f[a],d:y(l),e:l,b:d.shortMonths[c],B:d.months[c],m:y(c+1),y:u.toString().substr(2,2),Y:u,H:y(o),I:y(o%12||12),l:o%12||12,M:y(r[Z]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:y(r.getSeconds()),L:y(ut(i%1e3),3)},Highcharts.dateFormats);for(s in r)for(;e.indexOf("%"+s)!==-1;)e=e.replace("%"+s,"function"==typeof r[s]?r[s](i):r[s]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},k.prototype={wrapColor:function(t){this.color>=t&&(this.color=0)},wrapSymbol:function(t){this.symbol>=t&&(this.symbol=0)}},X=function(){for(var t=0,e=arguments,i=e.length,n={};t<i;t++)n[e[t++]]=e[t];return n}(Vt,1,Ft,1e3,$t,6e4,zt,36e5,Yt,864e5,Wt,6048e5,Gt,26784e5,Ut,31556952e3),q={init:function(t,e,i){var n,s,r,e=e||"",o=t.shift,a=e.indexOf("C")>-1,l=a?7:3,e=e.split(" "),i=[].concat(i),c=function(t){for(n=t.length;n--;)"M"===t[n]&&t.splice(n+1,0,t[n+1],t[n+2],t[n+1],t[n+2])};if(a&&(c(e),c(i)),t.isArea&&(s=e.splice(e.length-6,6),r=i.splice(i.length-6,6)),o<=i.length/l)for(;o--;)i=[].concat(i).splice(0,l).concat(i);if(t.shift=0,e.length)for(t=i.length;e.length<t;)o=[].concat(e).splice(e.length-l,l),a&&(o[l-6]=o[l-2],o[l-5]=o[l-1]),e=e.concat(o);return s&&(e=e.concat(s),i=i.concat(r)),[e,i]},step:function(t,e,i,n){var s=[],r=t.length;if(1===i)s=n;else if(r===e.length&&i<1)for(;r--;)n=parseFloat(t[r]),s[r]=isNaN(n)?t[r]:i*parseFloat(e[r]-n)+n;else s=e;return s}},function(e){ct.HighchartsAdapter=ct.HighchartsAdapter||e&&{init:function(t){var i,s=e.fx,r=s.step,o=e.Tween,a=o&&o.propHooks;e.extend(e.easing,{easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i}}),e.each(["cur","_default","width","height","opacity"],function(t,e){var i,n,l=r;"cur"===e?l=s.prototype:"_default"===e&&o&&(l=a[e],e="set"),(i=l[e])&&(l[e]=function(s){return s=t?s:this,n=s.elem,n.attr?n.attr(s.prop,"cur"===e?$:s.now):i.apply(this,arguments)})}),i=function(e){var i,n=e.elem;e.started||(i=t.init(n,n.d,n.toD),e.start=i[0],e.end=i[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},o?a.d={set:i}:r.d=i,this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){for(var i=0,n=t.length;i<n;i++)if(e.call(t[i],t[i],i,t)===!1)return i},e.fn.highcharts=function(){var t,e,i="Chart",s=arguments;return n(s[0])&&(i=s[0],s=Array.prototype.slice.call(s,1)),t=s[0],t!==$&&(t.chart=t.chart||{},t.chart.renderTo=this[0],new Highcharts[i](t,s[1]),e=this),t===$&&(e=Nt[u(this[0],"data-highcharts-chart")]),e}},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,i){return e(t)[i]()},grep:e.grep,map:function(t,e){for(var i=[],n=0,s=t.length;n<s;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(t){return e(t).offset()},addEvent:function(t,i,n){e(t).bind(i,n)},removeEvent:function(t,i,n){var s=lt.removeEventListener?"removeEventListener":"detachEvent";lt[s]&&t&&!t[s]&&(t[s]=function(){}),e(t).unbind(i,n)},fireEvent:function(i,n,s,r){var o,a=e.Event(n),l="detached"+n;!kt&&s&&(delete s.layerX,delete s.layerY),t(a,s),i[n]&&(i[l]=i[n],i[n]=null),e.each(["preventDefault","stopPropagation"],function(t,e){var i=a[e];a[e]=function(){try{i.call(a)}catch(t){"preventDefault"===e&&(o=!0)}}}),e(i).trigger(a),i[l]&&(i[n]=i[l],i[l]=null),r&&!a.isDefaultPrevented()&&!o&&r(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===$&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,i,n){var s=e(t);i.d&&(t.toD=i.d,i.d=1),s.stop(),i.opacity!==$&&t.attr&&(i.opacity+="px"),s.animate(i,n)},stop:function(t){e(t).stop()}}}(ct.jQuery);var Jt=ct.HighchartsAdapter,Zt=Jt||{};Jt&&Jt.init.call(Jt,q);var Kt=Zt.adapterRun,Qt=Zt.getScript,te=Zt.inArray,ee=Zt.each,ie=Zt.grep,ne=Zt.offset,se=Zt.map,re=Zt.addEvent,oe=Zt.removeEvent,ae=Zt.fireEvent,le=Zt.washMouseEvent,ce=Zt.animate,he=Zt.stop,Zt={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"}};W={colors:"#2f7ed8,#0d233a,#8bbc21,#910000,#1aadce,#492970,#f28f43,#77a1e5,#c42525,#a6c96a".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.1/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.1/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:"Arial, Helvetica, sans-serif",fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e(Zt,{enabled:!1,formatter:function(){return this.y},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:At,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:Et?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var ue=W.plotOptions,Jt=ue.line;D();var de=function(t){var n,s,r=[];return function(t){t&&t.stops?s=se(t.stops,function(t){return de(t[1])}):(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(t))?r=[i(n[1]),i(n[2]),i(n[3]),parseFloat(n[4],10)]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?r=[i(n[1],16),i(n[2],16),i(n[3],16),1]:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))&&(r=[i(n[1]),i(n[2]),i(n[3]),1])}(t),{get:function(i){var n;return s?(n=e(t),n.stops=[].concat(n.stops),ee(s,function(t,e){n.stops[e]=[n.stops[e][0],t.get(i)]})):n=r&&!isNaN(r[0])?"rgb"===i?"rgb("+r[0]+","+r[1]+","+r[2]+")":"a"===i?r[3]:"rgba("+r.join(",")+")":t,n},brighten:function(t){if(s)ee(s,function(e){e.brighten(t)});else if(o(t)&&0!==t){var e;for(e=0;e<3;e++)r[e]+=i(255*t),r[e]<0&&(r[e]=0),r[e]>255&&(r[e]=255)}return this},rgba:r,setOpacity:function(t){return r[3]=t,this}}};L.prototype={init:function(t,e){this.element="span"===e?g(e):lt.createElementNS(Mt,e),this.renderer=t,this.attrSetters={}},opacity:1,animate:function(t,i,n){i=p(i,U,!0),he(this),i?(i=e(i),n&&(i.complete=n),ce(this,t,i)):(this.attr(t),n&&n())},attr:function(t,e){var s,r,o,a,l,c,d,p=this.element,f=p.nodeName.toLowerCase(),g=this.renderer,m=this.attrSetters,v=this.shadows,y=this;if(n(t)&&h(e)&&(s=t,t={},t[s]=e),n(t))s=t,"circle"===f?s={x:"cx",y:"cy"}[s]||s:"strokeWidth"===s&&(s="stroke-width"),y=u(p,s)||this[s]||0,"d"!==s&&"visibility"!==s&&(y=parseFloat(y));else{for(s in t)if(l=!1,r=t[s],o=m[s]&&m[s].call(this,r,s),o!==!1){if(o!==$&&(r=o),"d"===s)r&&r.join&&(r=r.join(" ")),/(NaN| {2}|^$)/.test(r)&&(r="M 0 0");else if("x"===s&&"text"===f)for(o=0;o<p.childNodes.length;o++)a=p.childNodes[o],u(a,"x")===u(p,"x")&&u(a,"x",r);else if(!this.rotation||"x"!==s&&"y"!==s)if("fill"===s)r=g.color(r,p,s);else if("circle"!==f||"x"!==s&&"y"!==s)if("rect"===f&&"r"===s)u(p,{rx:r,ry:r}),l=!0;else if("translateX"===s||"translateY"===s||"rotation"===s||"verticalAlign"===s||"scaleX"===s||"scaleY"===s)l=d=!0;else if("stroke"===s)r=g.color(r,p,s);else if("dashstyle"===s){if(s="stroke-dasharray",r=r&&r.toLowerCase(),"solid"===r)r=Ht;else if(r){for(r=r.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),o=r.length;o--;)r[o]=i(r[o])*t["stroke-width"];r=r.join(",")}}else"width"===s?r=i(r):"align"===s?(s="text-anchor",r={left:"start",center:"middle",right:"end"}[r]):"title"===s&&(o=p.getElementsByTagName("title")[0],o||(o=lt.createElementNS(Mt,"title"),p.appendChild(o)),o.textContent=r);else s={x:"cx",y:"cy"}[s]||s;else d=!0;if("strokeWidth"===s&&(s="stroke-width"),"stroke-width"!==s&&"stroke"!==s||(this[s]=r,this.stroke&&this["stroke-width"]?(u(p,"stroke",this.stroke),u(p,"stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===s&&0===r&&this.hasStroke&&(p.removeAttribute("stroke"),this.hasStroke=!1),l=!0),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(s)&&(c||(this.symbolAttr(t),c=!0),l=!0),v&&/^(width|height|visibility|x|y|d|transform)$/.test(s))for(o=v.length;o--;)u(v[o],s,"height"===s?ft(r-(v[o].cutHeight||0),0):r);("width"===s||"height"===s)&&"rect"===f&&r<0&&(r=0),this[s]=r,"text"===s?(r!==this.textStr&&delete this.bBox,this.textStr=r,this.added&&g.buildText(this)):l||u(p,s,r)}d&&this.updateTransform()}return y},addClass:function(t){return u(this.element,"class",u(this.element,"class")+" "+t),this},symbolAttr:function(t){var e=this;ee("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(i){e[i]=p(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Ht)},crisp:function(t,e,i,n,s){var r,o,a={},l={},t=t||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;o=ut(t)%2/2,l.x=dt(e||this.x||0)+o,l.y=dt(i||this.y||0)+o,l.width=dt((n||this.width||0)-2*o),l.height=dt((s||this.height||0)-2*o),l.strokeWidth=t;for(r in l)this[r]!==l[r]&&(this[r]=a[r]=l[r]);return a},css:function(e){var i,n=this.element,n=e&&e.width&&"text"===n.nodeName.toLowerCase(),s="",r=function(t,e){return"-"+e.toLowerCase()};if(e&&e.color&&(e.fill=e.color),this.styles=e=t(this.styles,e),Ot&&n&&delete e.width,kt&&!At)n&&delete e.width,f(this.element,e);else{for(i in e)s+=i.replace(/([A-Z])/g,r)+":"+e[i]+";";this.attr({style:s})}return n&&this.added&&this.renderer.buildText(this),this},on:function(t,e){return Dt&&"click"===t&&(this.element.ontouchstart=function(t){t.preventDefault(),e()}),this.element["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},htmlCss:function(e){var i=this.element;return(i=e&&"SPAN"===i.tagName&&e.width)&&(delete e.width,this.textWidth=i,this.updateTransform()),this.styles=t(this.styles,e),f(this.element,e),this},htmlGetBBox:function(){var t=this.element,e=this.bBox;return e||("text"===t.nodeName&&(t.style.position="absolute"),e=this.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),e},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,n=this.translateX||0,s=this.translateY||0,r=this.x||0,o=this.y||0,a=this.textAlign||"left",l={left:0,center:.5,right:1}[a],c=a&&"left"!==a,u=this.shadows;if((n||s)&&(f(e,{marginLeft:n,marginTop:s}),u&&ee(u,function(t){f(t,{marginLeft:n+1,marginTop:s+1})})),this.inverted&&ee(e.childNodes,function(i){t.invertChild(i,e)}),"SPAN"===e.tagName){var d,g,m,v,u=this.rotation,y=0,b=1,y=0;m=i(this.textWidth);var x=this.xCorr||0,w=this.yCorr||0,_=[u,a,e.innerHTML,this.textWidth].join(",");d={},_!==this.cTT&&(h(u)&&(t.isSVG?(x=kt?"-ms-transform":St?"-webkit-transform":Tt?"MozTransform":_t?"-o-transform":"",d[x]=d.transform="rotate("+u+"deg)"):(y=u*xt,b=vt(y),y=yt(y),d.filter=u?["progid:DXImageTransform.Microsoft.Matrix(M11=",b,", M12=",-y,", M21=",y,", M22=",b,", sizingMethod='auto expand')"].join(""):Ht),f(e,d)),d=p(this.elemWidth,e.offsetWidth),g=p(this.elemHeight,e.offsetHeight),d>m&&/[ \-]/.test(e.textContent||e.innerText)&&(f(e,{width:m+"px",display:"block",whiteSpace:"normal"}),d=m),m=t.fontMetrics(e.style.fontSize).b,x=b<0&&-d,w=y<0&&-g,v=b*y<0,x+=y*m*(v?1-l:l),w-=b*m*(u?v?l:1-l:1),c&&(x-=d*l*(b<0?-1:1),u&&(w-=g*l*(y<0?-1:1)),f(e,{textAlign:a})),this.xCorr=x,this.yCorr=w),f(e,{left:r+x+"px",top:o+w+"px"}),St&&(g=e.offsetHeight),this.cTT=_}}else this.alignOnAdd=!0},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,i=this.scaleX,n=this.scaleY,s=this.inverted,r=this.rotation,o=[];s&&(t+=this.attr("width"),e+=this.attr("height")),(t||e)&&o.push("translate("+t+","+e+")"),s?o.push("rotate(90) scale(-1,1)"):r&&o.push("rotate("+r+" "+(this.x||0)+" "+(this.y||0)+")"),(h(i)||h(n))&&o.push("scale("+p(i,1)+" "+p(n,1)+")"),o.length&&u(this.element,"transform",o.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var s,r,o,a,l={};return r=this.renderer,o=r.alignedObjects,t?(this.alignOptions=t,this.alignByTranslate=e,(!i||n(i))&&(this.alignTo=s=i||"renderer",c(o,this),o.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,s=this.alignTo),i=p(i,r[s],r),s=t.align,r=t.verticalAlign,o=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0),"right"!==s&&"center"!==s||(o+=(i.width-(t.width||0))/{right:1,center:2}[s]),l[e?"translateX":"x"]=ut(o),"bottom"!==r&&"middle"!==r||(a+=(i.height-(t.height||0))/({bottom:1,middle:2}[r]||1)),l[e?"translateY":"y"]=ut(a),this[this.placed?"animate":"attr"](l),this.placed=!0,this.alignAttr=l,this},getBBox:function(){var e,i=this.bBox,n=this.renderer,s=this.rotation;e=this.element;var r=this.styles,o=s*xt;if(!i){if(e.namespaceURI===Mt||n.forExport){try{i=e.getBBox?t({},e.getBBox()):{width:e.offsetWidth,height:e.offsetHeight}}catch(a){}(!i||i.width<0)&&(i={width:0,height:0})}else i=this.htmlGetBBox();n.isSVG&&(n=i.width,e=i.height,kt&&r&&"11px"===r.fontSize&&"22.7"===e.toPrecision(3)&&(i.height=e=14),s&&(i.width=mt(e*yt(o))+mt(n*vt(o)),i.height=mt(e*vt(o))+mt(n*yt(o)))),this.bBox=i}return i},show:function(){return this.attr({visibility:"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.hide()}})},add:function(t){var e,n=this.renderer,s=t||n,r=s.element||n.box,o=r.childNodes,a=this.element,l=u(a,"zIndex");if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&n.buildText(this),l&&(s.handleZ=!0,l=i(l)),s.handleZ)for(s=0;s<o.length;s++)if(t=o[s],n=u(t,"zIndex"),t!==a&&(i(n)>l||!h(l)&&h(n))){r.insertBefore(a,t),e=!0;break}return e||r.appendChild(a),this.added=!0,ae(this,"add"),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i=this,n=i.element||{},s=i.shadows;if(n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=n.point=null,he(i),i.clipPath&&(i.clipPath=i.clipPath.destroy()),i.stops){for(e=0;e<i.stops.length;e++)i.stops[e]=i.stops[e].destroy();i.stops=null}i.safeRemoveChild(n),s&&ee(s,function(t){i.safeRemoveChild(t)}),i.alignTo&&c(i.renderer.alignedObjects,i);for(t in i)delete i[t];return null},shadow:function(t,e,i){var n,s,r,o,a,l,c=[],h=this.element;if(t){for(o=p(t.width,3),a=(t.opacity||.15)/o,l=this.parentInverted?"(-1,-1)":"("+p(t.offsetX,1)+", "+p(t.offsetY,1)+")",n=1;n<=o;n++)s=h.cloneNode(0),r=2*o+1-2*n,u(s,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*n,"stroke-width":r,transform:"translate"+l,fill:Ht}),i&&(u(s,"height",ft(u(s,"height")-r,0)),s.cutHeight=r),e?e.element.appendChild(s):h.parentNode.insertBefore(s,h),c.push(s);this.shadows=c}return this}};var pe=function(){this.init.apply(this,arguments)};pe.prototype={Element:L,init:function(t,e,i,n){var s,r=location;s=this.createElement("svg").attr({xmlns:Mt,version:"1.1"}),t.appendChild(s.element),this.isSVG=!0,this.box=s.element,this.boxWrapper=s,this.alignedObjects=[],this.url=(Tt||St)&&lt.getElementsByTagName("base").length?r.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(lt.createTextNode("Created with Highcharts 3.0.1")),this.defs=this.createElement("defs").add(),this.forExport=n,this.gradients={},this.setSize(e,i,!1);var o;Tt&&t.getBoundingClientRect&&(this.subPixelFix=e=function(){f(t,{left:0,top:0}),o=t.getBoundingClientRect(),f(t,{left:pt(o.left)-o.left+"px",top:pt(o.top)-o.top+"px"})},e(),re(ct,"resize",e))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),E(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.subPixelFix&&oe(ct,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e=t.element,n=this,s=n.forExport,r=p(t.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),o=e.childNodes,a=/style="([^"]+)"/,l=/href="([^"]+)"/,c=u(e,"x"),h=t.styles,d=h&&h.width&&i(h.width),g=h&&h.lineHeight,m=o.length;m--;)e.removeChild(o[m]);d&&!t.added&&this.box.appendChild(e),""===r[r.length-1]&&r.pop(),ee(r,function(i,r){var o,p=0,i=i.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");o=i.split("|||"),ee(o,function(i){if(""!==i||1===o.length){var m,v={},y=lt.createElementNS(Mt,"tspan");if(a.test(i)&&(m=i.match(a)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),u(y,"style",m)),l.test(i)&&!s&&(u(y,"onclick",'location.href="'+i.match(l)[1]+'"'),f(y,{cursor:"pointer"})),i=(i.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),y.appendChild(lt.createTextNode(i)),p?v.dx=0:v.x=c,u(y,v),!p&&r&&(!At&&s&&f(y,{display:"block"}),u(y,"dy",g||n.fontMetrics(/px$/.test(y.style.fontSize)?y.style.fontSize:h.fontSize).h,St&&y.offsetHeight)),e.appendChild(y),p++,d)for(var b,i=i.replace(/([^\^])-/g,"$1- ").split(" "),x=[];i.length||x.length;)delete t.bBox,b=t.getBBox().width,v=b>d,v&&1!==i.length?(y.removeChild(y.firstChild),x.unshift(i.pop())):(i=x,x=[],i.length&&(y=lt.createElementNS(Mt,"tspan"),u(y,{dy:g||16,x:c}),m&&u(y,"style",m),e.appendChild(y),b>d&&(d=b))),i.length&&y.appendChild(lt.createTextNode(i.join(" ").replace(/- /g,"-")))}})})},button:function(i,n,s,r,o,a,l){var c,h,u,d,p,f=this.label(i,n,s,null,null,null,null,null,"button"),g=0,i={x1:0,y1:0,x2:0,y2:1},o=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:i,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},o);return u=o.style,delete o.style,a=e(o,{stroke:"#68A",fill:{linearGradient:i,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),d=a.style,delete a.style,l=e(o,{stroke:"#68A",fill:{linearGradient:i,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),p=l.style,delete l.style,re(f.element,"mouseenter",function(){f.attr(a).css(d)}),re(f.element,"mouseleave",function(){c=[o,a,l][g],h=[u,d,p][g],f.attr(c).css(h)}),f.setState=function(t){(g=t)?2===t&&f.attr(l).css(p):f.attr(o).css(u)},f.on("click",function(){r.call(f)}).attr(o).css(t({cursor:"default"},u))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=ut(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=ut(t[2])+e%2/2),t},path:function(e){var i={fill:Ht};return r(e)?i.d=e:s(e)&&t(i,e),this.createElement("path").attr(i)},circle:function(t,e,i){return t=s(t)?t:{x:t,y:e,r:i},this.createElement("circle").attr(t)},arc:function(t,e,i,n,r,o){return s(t)&&(e=t.y,i=t.r,n=t.innerR,r=t.start,o=t.end,t=t.x),this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:r||0,end:o||0})},rect:function(t,e,i,n,r,o){return r=s(t)?t.r:r,r=this.createElement("rect").attr({rx:r,ry:r,fill:Ht}),r.attr(s(t)?t:r.crisp(o,t,e,ft(i,0),ft(n,0)))},setSize:function(t,e,i){var n=this.alignedObjects,s=n.length;for(this.width=t,this.height=e,this.boxWrapper[p(i,!0)?"animate":"attr"]({width:t,height:e});s--;)n[s].align()},g:function(t){var e=this.createElement("g");return h(t)?e.attr({"class":"highcharts-"+t}):e},image:function(e,i,n,s,r){var o={preserveAspectRatio:Ht};return arguments.length>1&&t(o,{x:i,y:n,width:s,height:r}),o=this.createElement("image").attr(o),o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):o.element.setAttribute("hc-svg-href",e),o},symbol:function(e,i,n,s,r,o){var a,l,c,h=this.symbols[e],h=h&&h(ut(i),ut(n),s,r,o),u=/^url\((.*?)\)$/;return h?(a=this.path(h),t(a,{symbolName:e,x:i,y:n,width:s,height:r}),o&&t(a,o)):u.test(e)&&(c=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(ut((s-e[0])/2),ut((r-e[1])/2)))},l=e.match(u)[1],e=Lt[l],a=this.image(l).attr({x:i,y:n}),a.isImg=!0,e?c(a,e):(a.attr({width:0,height:0}),g("img",{onload:function(){c(a,Lt[l]=[this.width,this.height])},src:l}))),a},symbols:{circle:function(t,e,i,n){var s=.166*i;return["M",t+i/2,e,"C",t+i+s,e,t+i+s,e+n,t+i/2,e+n,"C",t-s,e+n,t-s,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,s){var r=s.start,i=s.r||i||n,o=s.end-.001,n=s.innerR,a=s.open,l=vt(r),c=yt(r),h=vt(o),o=yt(o),s=s.end-r<bt?0:1;return["M",t+i*l,e+i*c,"A",i,i,0,s,1,t+i*h,e+i*o,a?"M":"L",t+n*h,e+n*o,"A",n,n,0,s,0,t+n*l,e+n*c,a?"":"Z"]}},clipRect:function(t,e,i,n){var s="highcharts-"+It++,r=this.createElement("clipPath").attr({id:s}).add(this.defs),t=this.rect(t,e,i,n,0).add(r);return t.id=s,t.clipPath=r,t},color:function(t,i,n){var s,o,a,l,c,d,p,f,g=this,m=/^rgba/,v=[];if(t&&t.linearGradient?o="linearGradient":t&&t.radialGradient&&(o="radialGradient"),o){n=t[o],a=g.gradients,c=t.stops,i=i.radialReference,r(n)&&(t[o]=n={x1:n[0],y1:n[1],x2:n[2],y2:n[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&i&&!h(n.gradientUnits)&&(n=e(n,{cx:i[0]-i[2]/2+n.cx*i[2],cy:i[1]-i[2]/2+n.cy*i[2],r:n.r*i[2],gradientUnits:"userSpaceOnUse"}));for(f in n)"id"!==f&&v.push(f,n[f]);for(f in c)v.push(c[f]);return v=v.join(","),a[v]?t=a[v].id:(n.id=t="highcharts-"+It++,a[v]=l=g.createElement(o).attr(n).add(g.defs),l.stops=[],ee(c,function(t){m.test(t[1])?(s=de(t[1]),d=s.get("rgb"),p=s.get("a")):(d=t[1],p=1),t=g.createElement("stop").attr({offset:t[0],"stop-color":d,"stop-opacity":p}).add(l),l.stops.push(t)})),"url("+g.url+"#"+t+")"}return m.test(t)?(s=de(t),u(i,n+"-opacity",s.get("a")),s.get("rgb")):(i.removeAttribute(n+"-opacity"),t)},text:function(t,e,i,n){var s=W.chart.style,r=Ot||!At&&this.forExport;return n&&!this.forExport?this.html(t,e,i):(e=ut(p(e,0)),i=ut(p(i,0)),t=this.createElement("text").attr({x:e,y:i,text:t}).css({fontFamily:s.fontFamily,fontSize:s.fontSize}),r&&t.css({position:"absolute"}),t.x=e,t.y=i,t)},html:function(e,i,n){var s=W.chart.style,r=this.createElement("span"),o=r.attrSetters,a=r.element,l=r.renderer;return o.text=function(t){return t!==a.innerHTML&&delete this.bBox,a.innerHTML=t,!1},o.x=o.y=o.align=function(t,e){return"align"===e&&(e="textAlign"),r[e]=t,r.htmlUpdateTransform(),!1},r.attr({text:e,x:ut(i),y:ut(n)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:s.fontFamily,fontSize:s.fontSize}),r.css=r.htmlCss,l.isSVG&&(r.add=function(e){var i,n=l.box.parentNode,s=[];if(e){if(i=e.div,!i){for(;e;)s.push(e),e=e.parentGroup;ee(s.reverse(),function(e){var s;i=e.div=e.div||g(Bt,{className:u(e.element,"class")},{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px"},i||n),s=i.style,t(e.attrSetters,{translateX:function(t){s.left=t+"px"},translateY:function(t){s.top=t+"px"},visibility:function(t,e){s[e]=t}})})}}else i=n;return i.appendChild(a),r.added=!0,r.alignOnAdd&&r.htmlUpdateTransform(),r}),r},fontMetrics:function(t){var t=i(t||11),t=t<24?t+4:ut(1.2*t),e=ut(.8*t);return{h:t,b:e}},label:function(i,n,s,r,o,a,l,c,u){function d(){var t,i;t=T.element.style,v=(void 0===y||void 0===b||S.styles.textAlign)&&T.getBBox(),S.width=(y||v.width||0)+2*M+A,S.height=(b||v.height||0)+2*M,_=M+C.fontMetrics(t&&t.fontSize).b,k&&(m||(t=ut(-E*M),i=c?-_:0,S.box=m=r?C.symbol(r,t,i,S.width,S.height):C.rect(t,i,S.width,S.height,0,O[qt]),m.add(S)),m.isImg||m.attr(e({width:S.width,height:S.height},O)),O=null)}function p(){var t,e=S.styles,e=e&&e.textAlign,i=A+M*(1-E);t=c?0:_,!h(y)||"center"!==e&&"right"!==e||(i+={center:.5,right:1}[e]*(y-v.width)),(i!==T.x||t!==T.y)&&T.attr({x:i,y:t}),T.x=i,T.y=t}function f(t,e){m?m.attr(t,e):O[t]=e}function g(){T.add(S),S.attr({text:i,x:n,y:s}),m&&h(o)&&S.attr({anchorX:o,anchorY:a})}var m,v,y,b,x,w,_,k,C=this,S=C.g(u),T=C.text("",0,0,l).attr({zIndex:1}),E=0,M=3,A=0,P=0,O={},l=S.attrSetters;re(S,"add",g),l.width=function(t){return y=t,!1},l.height=function(t){return b=t,!1},l.padding=function(t){return h(t)&&t!==M&&(M=t,p()),!1},l.paddingLeft=function(t){return h(t)&&t!==A&&(A=t,p()),!1},l.align=function(t){return E={left:0,center:.5,right:1}[t],!1},l.text=function(t,e){return T.attr(e,t),d(),p(),!1},l[qt]=function(t,e){return k=!0,P=t%2/2,f(e,t),!1},l.stroke=l.fill=l.r=function(t,e){return"fill"===e&&(k=!0),f(e,t),!1},l.anchorX=function(t,e){return o=t,f(e,t+P-x),!1},l.anchorY=function(t,e){return a=t,f(e,t-w),!1},l.x=function(t){return S.x=t,t-=E*((y||v.width)+M),x=ut(t),S.attr("translateX",x),!1},l.y=function(t){return w=S.y=ut(t),S.attr("translateY",w),!1};var D=S.css;return t(S,{css:function(t){if(t){var i={},t=e(t);ee("fontSize,fontWeight,fontFamily,color,lineHeight,width".split(","),function(e){t[e]!==$&&(i[e]=t[e],delete t[e])}),T.css(i)}return D.call(S,t)},getBBox:function(){return{width:v.width+2*M,height:v.height+2*M,x:v.x-M,y:v.y-M}},shadow:function(t){return m&&m.shadow(t),S},destroy:function(){oe(S,"add",g),oe(S.element,"mouseenter"),oe(S.element,"mouseleave"),T&&(T=T.destroy()),m&&(m=m.destroy()),L.prototype.destroy.call(S),S=C=d=p=f=g=null}})}},z=pe;var fe;if(!At&&!Ot){Highcharts.VMLElement=fe={init:function(t,e){var i=["<",e,' filled="f" stroked="f"'],n=["position: ","absolute",";"],s=e===Bt;("shape"===e||s)&&n.push("left:0;top:0;width:1px;height:1px;"),n.push("visibility: ",s?"hidden":"visible"),i.push(' style="',n.join(""),'"/>'),e&&(i=s||"span"===e||"img"===e?i.join(""):t.prepVML(i),this.element=g(i)),this.renderer=t,this.attrSetters={};
},add:function(t){var e=this.renderer,i=this.element,n=e.box,n=t?t.element||t:n;return t&&t.inverted&&e.invertChild(i,n),n.appendChild(i),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),ae(this,"add"),this},updateTransform:L.prototype.htmlUpdateTransform,attr:function(t,e){var i,s,r,a,l,c=this.element||{},d=c.style,p=c.nodeName,f=this.renderer,m=this.symbolName,v=this.shadows,y=this.attrSetters,b=this;if(n(t)&&h(e)&&(i=t,t={},t[i]=e),n(t))i=t,b="strokeWidth"===i||"stroke-width"===i?this.strokeweight:this[i];else for(i in t)if(s=t[i],l=!1,r=y[i]&&y[i].call(this,s,i),r!==!1&&null!==s){if(r!==$&&(s=r),m&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(i))a||(this.symbolAttr(t),a=!0),l=!0;else if("d"===i){s=s||[],this.d=s.join(" "),r=s.length,l=[];for(var x;r--;)o(s[r])?l[r]=ut(10*s[r])-5:"Z"===s[r]?l[r]="x":(l[r]=s[r],!s.isArc||"wa"!==s[r]&&"at"!==s[r]||(x="wa"===s[r]?1:-1,l[r+5]===l[r+7]&&(l[r+7]-=x),l[r+6]===l[r+8]&&(l[r+8]-=x)));if(s=l.join(" ")||"x",c.path=s,v)for(r=v.length;r--;)v[r].path=v[r].cutOff?this.cutOffPath(s,v[r].cutOff):s;l=!0}else if("visibility"===i){if(v)for(r=v.length;r--;)v[r].style[i]=s;"DIV"===p&&(s="hidden"===s?"-999em":0,Ct||(d[i]=s?"visible":"hidden"),i="top"),d[i]=s,l=!0}else"zIndex"===i?(s&&(d[i]=s),l=!0):te(i,["x","y","width","height"])!==-1?(this[i]=s,"x"===i||"y"===i?i={x:"left",y:"top"}[i]:s=ft(0,s),this.updateClipping?(this[i]=s,this.updateClipping()):d[i]=s,l=!0):"class"===i&&"DIV"===p?c.className=s:"stroke"===i?(s=f.color(s,c,i),i="strokecolor"):"stroke-width"===i||"strokeWidth"===i?(c.stroked=!!s,i="strokeweight",this[i]=s,o(s)&&(s+="px")):"dashstyle"===i?((c.getElementsByTagName("stroke")[0]||g(f.prepVML(["<stroke/>"]),null,null,c))[i]=s||"solid",this.dashstyle=s,l=!0):"fill"===i?"SPAN"===p?d.color=s:"IMG"!==p&&(c.filled=s!==Ht,s=f.color(s,c,i,this),i="fillcolor"):"opacity"===i?l=!0:"shape"===p&&"rotation"===i?(this[i]=s,c.style.left=-ut(yt(s*xt)+1)+"px",c.style.top=ut(vt(s*xt))+"px"):"translateX"===i||"translateY"===i||"rotation"===i?(this[i]=s,this.updateTransform(),l=!0):"text"===i&&(this.bBox=null,c.innerHTML=s,l=!0);l||(Ct?c[i]=s:u(c,i,s))}return b},clip:function(t){var e,i=this;return t?(e=t.members,c(e,i),e.push(i),i.destroyClip=function(){c(e,i)},t=t.getCSS(i)):(i.destroyClip&&i.destroyClip(),t={clip:Ct?"inherit":"rect(auto)"}),i.css(t)},css:L.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&M(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),L.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=ct.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var n,t=t.split(/[ ,]/);return n=t.length,9!==n&&11!==n||(t[n-4]=t[n-2]=i(t[n-2])-10*e),t.join(" ")},shadow:function(t,e,n){var s,r,o,a,l,c,h,u=[],d=this.element,f=this.renderer,m=d.style,v=d.path;if(v&&"string"!=typeof v.value&&(v="x"),l=v,t){for(c=p(t.width,3),h=(t.opacity||.15)/c,s=1;s<=3;s++)a=2*c+1-2*s,n&&(l=this.cutOffPath(v.value,a+.5)),o=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',d.style.cssText,'" />'],r=g(f.prepVML(o),null,{left:i(m.left)+p(t.offsetX,1),top:i(m.top)+p(t.offsetY,1)}),n&&(r.cutOff=a+1),o=['<stroke color="',t.color||"black",'" opacity="',h*s,'"/>'],g(f.prepVML(o),null,null,r),e?e.element.appendChild(r):d.parentNode.insertBefore(r,d),u.push(r);this.shadows=u}return this}},fe=m(L,fe);var ge={Element:fe,isIE8:wt.indexOf("MSIE 8.0")>-1,init:function(t,e,i){var n,s;this.alignedObjects=[],n=this.createElement(Bt),s=n.element,s.style.position="relative",t.appendChild(n.element),this.isVML=!0,this.box=s,this.boxWrapper=n,this.setSize(e,i,!1),lt.namespaces.hcv||(lt.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),lt.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,i,n,r){var o=this.createElement(),a=s(e);return t(o,{members:[],left:a?e.x:e,top:a?e.y:i,width:a?e.width:n,height:a?e.height:r,getCSS:function(e){var i=e.element,n=i.nodeName,e=e.inverted,s=this.top-("shape"===n?i.offsetTop:0),r=this.left,i=r+this.width,o=s+this.height,s={clip:"rect("+ut(e?r:s)+"px,"+ut(e?o:i)+"px,"+ut(e?i:o)+"px,"+ut(e?s:r)+"px)"};return!e&&Ct&&"DIV"===n&&t(s,{width:i+"px",height:o+"px"}),s},updateClipping:function(){ee(o.members,function(t){t.css(o.getCSS(t))})}})},color:function(t,e,i,n){var s,r,o,a=this,l=/^rgba/,c=Ht;if(t&&t.linearGradient?o="gradient":t&&t.radialGradient&&(o="pattern"),o){var h,u,d,p,f,m,v,y,b=t.linearGradient||t.radialGradient,x="",t=t.stops,w=[],_=function(){r=['<fill colors="'+w.join(",")+'" opacity="',f,'" o:opacity2="',p,'" type="',o,'" ',x,'focus="100%" method="any" />'],g(a.prepVML(r),null,null,e)};if(d=t[0],y=t[t.length-1],d[0]>0&&t.unshift([0,d[1]]),y[0]<1&&t.push([1,y[1]]),ee(t,function(t,e){l.test(t[1])?(s=de(t[1]),h=s.get("rgb"),u=s.get("a")):(h=t[1],u=1),w.push(100*t[0]+"% "+h),e?(f=u,m=h):(p=u,v=h)}),"fill"===i)if("gradient"===o)i=b.x1||b[0]||0,t=b.y1||b[1]||0,d=b.x2||b[2]||0,b=b.y2||b[3]||0,x='angle="'+(90-180*ht.atan((b-t)/(d-i))/bt)+'"',_();else{var k,c=b.r,C=2*c,S=2*c,T=b.cx,E=b.cy,M=e.radialReference,c=function(){M&&(k=n.getBBox(),T+=(M[0]-k.x)/k.width-.5,E+=(M[1]-k.y)/k.height-.5,C*=M[2]/k.width,S*=M[2]/k.height),x='src="'+W.global.VMLRadialGradientURL+'" size="'+C+","+S+'" origin="0.5,0.5" position="'+T+","+E+'" color2="'+v+'" ',_()};n.added?c():re(n,"add",c),c=m}else c=h}else l.test(t)&&"IMG"!==e.tagName?(s=de(t),r=["<",i,' opacity="',s.get("a"),'"/>'],g(this.prepVML(r),null,null,e),c=s.get("rgb")):(c=e.getElementsByTagName(i),c.length&&(c[0].opacity=1,c[0].type="solid"),c=t);return c},prepVML:function(t){var e=this.isIE8,t=t.join("");return e?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=t.indexOf('style="')===-1?t.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):t.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):t=t.replace("<","<hcv:"),t},text:pe.prototype.html,path:function(e){var i={coordsize:"10 10"};return r(e)?i.d=e:s(e)&&t(i,e),this.createElement("shape").attr(i)},circle:function(t,e,i){return s(t)&&(i=t.r,e=t.y,t=t.x),this.symbol("circle").attr({x:t-i,y:e-i,width:2*i,height:2*i})},g:function(t){var e;return t&&(e={className:"highcharts-"+t,"class":"highcharts-"+t}),this.createElement(Bt).attr(e)},image:function(t,e,i,n,s){var r=this.createElement("img").attr({src:t});return arguments.length>1&&r.attr({x:e,y:i,width:n,height:s}),r},rect:function(t,e,i,n,r,o){s(t)&&(e=t.y,i=t.width,n=t.height,o=t.strokeWidth,t=t.x);var a=this.symbol("rect");return a.r=r,a.attr(a.crisp(o,t,e,ft(i,0),ft(n,0)))},invertChild:function(t,e){var n=e.style;f(t,{flip:"x",left:i(n.width)-1,top:i(n.height)-1,rotation:-90})},symbols:{arc:function(t,e,i,n,s){var r=s.start,o=s.end,a=s.r||i||n,i=s.innerR,n=vt(r),l=yt(r),c=vt(o),h=yt(o);return o-r===0?["x"]:(r=["wa",t-a,e-a,t+a,e+a,t+a*n,e+a*l,t+a*c,e+a*h],s.open&&!i&&r.push("e","M",t,e),r.push("at",t-i,e-i,t+i,e+i,t+i*c,e+i*h,t+i*n,e+i*l,"x","e"),r.isArc=!0,r)},circle:function(t,e,i,n){return["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,s){var r,o=t+i,a=e+n;return h(s)&&s.r?(r=gt(s.r,i,n),o=["M",t+r,e,"L",o-r,e,"wa",o-2*r,e,o,e+2*r,o-r,e,o,e+r,"L",o,a-r,"wa",o-2*r,a-2*r,o,a,o,a-r,o-r,a,"L",t+r,a,"wa",t,a-2*r,t+2*r,a,t+r,a,t,a-r,"L",t,e+r,"wa",t,e,t+2*r,e+2*r,t,e+r,t+r,e,"x","e"]):o=pe.prototype.symbols.square.apply(0,arguments),o}}};Highcharts.VMLRenderer=fe=function(){this.init.apply(this,arguments)},fe.prototype=e(pe.prototype,ge),z=fe}var me;Ot&&(Highcharts.CanVGRenderer=fe=function(){Mt="http://www.w3.org/1999/xhtml"},fe.prototype.symbols={},me=function(){function t(){var t,i=e.length;for(t=0;t<i;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&Qt(n,t),e.push(i)}}}(),z=fe),I.prototype={addLabel:function(){var e,i=this.axis,n=i.options,s=i.chart,r=i.horiz,a=i.categories,c=i.series[0]&&i.series[0].names,u=this.pos,d=n.labels,f=i.tickPositions,r=r&&a&&!d.step&&!d.staggerLines&&!d.rotation&&s.plotWidth/f.length||!r&&(s.optionsMarginLeft||s.plotWidth/2),g=u===f[0],m=u===f[f.length-1],c=a?p(a[u],c&&c[u],u):u,a=this.label,f=f.info;i.isDatetimeAxis&&f&&(e=n.dateTimeLabelFormats[f.higherRanks[u]||f.unitName]),this.isFirst=g,this.isLast=m,n=i.labelFormatter.call({axis:i,chart:s,isFirst:g,isLast:m,dateTimeLabelFormat:e,value:i.isLog?P(l(c)):c}),u=r&&{width:ft(1,ut(r-2*(d.padding||10)))+"px"},u=t(u,d.style),h(a)?a&&a.attr({text:n}).css(u):(r={align:d.align},o(d.rotation)&&(r.rotation=d.rotation),this.label=h(n)&&d.enabled?s.renderer.text(n,0,0,d.useHTML).attr(r).css(u).add(i.labelGroup):null)},getLabelSize:function(){var t=this.label,e=this.axis;return t?(this.labelBBox=t.getBBox())[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.axis.options.labels,e=this.labelBBox.width,t=e*{left:0,center:.5,right:1}[t.align]-t.x;return[-t,e-t]},handleOverflow:function(t,e){var i=!0,n=this.axis,s=n.chart,r=this.isFirst,o=this.isLast,a=e.x,l=n.reversed,c=n.tickPositions;if(r||o){var h=this.getLabelSides(),u=h[0],h=h[1],s=s.plotLeft,d=s+n.len,c=(n=n.ticks[c[t+(r?1:-1)]])&&n.label.xy&&n.label.xy.x+n.getLabelSides()[r?0:1];r&&!l||o&&l?a+u<s&&(a=s-u,n&&a+h>c&&(i=!1)):a+h>d&&(a=d-h,n&&a+u<c&&(i=!1)),e.x=a}return i},getPosition:function(t,e,i,n){var s=this.axis,r=s.chart,o=n&&r.oldChartHeight||r.chartHeight;return{x:t?s.translate(e+i,null,null,n)+s.transB:s.left+s.offset+(s.opposite?(n&&r.oldChartWidth||r.chartWidth)-s.right-s.left:0),y:t?o-s.bottom+s.offset-(s.opposite?s.height:0):o-s.translate(e+i,null,null,n)-s.transB}},getLabelPosition:function(t,e,n,s,r,o,a,l){var c=this.axis,u=c.transA,d=c.reversed,c=c.staggerLines,t=t+r.x-(o&&s?o*u*(d?-1:1):0),e=e+r.y-(o&&!s?o*u*(d?1:-1):0);return h(r.y)||(e+=.9*i(n.styles.lineHeight)-n.getBBox().height/2),c&&(e+=a/(l||1)%c*16),{x:t,y:e}},getMarkPath:function(t,e,i,n,s,r){return r.crispLine(["M",t,e,"L",t+(s?0:-i),e+(s?i:0)],n)},render:function(t,e,i){var n=this.axis,s=n.options,r=n.chart.renderer,o=n.horiz,a=this.type,l=this.label,c=this.pos,h=s.labels,u=this.gridLine,d=a?a+"Grid":"grid",f=a?a+"Tick":"tick",g=s[d+"LineWidth"],m=s[d+"LineColor"],v=s[d+"LineDashStyle"],y=s[f+"Length"],d=s[f+"Width"]||0,b=s[f+"Color"],x=s[f+"Position"],f=this.mark,w=h.step,_=!0,k=n.tickmarkOffset,C=this.getPosition(o,c,k,e),S=C.x,C=C.y,T=o&&S===n.pos||!o&&C===n.pos+n.len?-1:1,E=n.staggerLines;this.isActive=!0,g&&(c=n.getPlotLinePath(c+k,g*T,e,!0),u===$&&(u={stroke:m,"stroke-width":g},v&&(u.dashstyle=v),a||(u.zIndex=1),e&&(u.opacity=0),this.gridLine=u=g?r.path(c).attr(u).add(n.gridGroup):null),!e&&u&&c&&u[this.isNew?"attr":"animate"]({d:c,opacity:i})),d&&y&&("inside"===x&&(y=-y),n.opposite&&(y=-y),e=this.getMarkPath(S,C,y,d*T,o,r),f?f.animate({d:e,opacity:i}):this.mark=r.path(e).attr({stroke:b,"stroke-width":d,opacity:i}).add(n.axisGroup)),l&&!isNaN(S)&&(l.xy=C=this.getLabelPosition(S,C,l,o,h,k,t,w),this.isFirst&&!p(s.showFirstLabel,1)||this.isLast&&!p(s.showLastLabel,1)?_=!1:!E&&o&&"justify"===h.overflow&&!this.handleOverflow(t,C)&&(_=!1),w&&t%w&&(_=!1),_&&!isNaN(C.y)?(C.opacity=i,l[this.isNew?"attr":"animate"](C),this.isNew=!1):l.attr("y",-9999))},destroy:function(){E(this,this.axis)}},R.prototype={render:function(){var t,i=this,n=i.axis,s=n.horiz,r=(n.pointRange||0)/2,o=i.options,l=o.label,c=i.label,u=o.width,d=o.to,f=o.from,g=h(f)&&h(d),m=o.value,v=o.dashStyle,y=i.svgElem,b=[],x=o.color,w=o.zIndex,_=o.events,k=n.chart.renderer;if(n.isLog&&(f=a(f),d=a(d),m=a(m)),u)b=n.getPlotLinePath(m,u),r={stroke:x,"stroke-width":u},v&&(r.dashstyle=v);else{if(!g)return;f=ft(f,n.min-r),d=gt(d,n.max+r),b=n.getPlotBandPath(f,d,o),r={fill:x},o.borderWidth&&(r.stroke=o.borderColor,r["stroke-width"]=o.borderWidth)}if(h(w)&&(r.zIndex=w),y)b?y.animate({d:b},null,y.onGetPath):(y.hide(),y.onGetPath=function(){y.show()});else if(b&&b.length&&(i.svgElem=y=k.path(b).attr(r).add(),_))for(t in o=function(t){y.on(t,function(e){_[t].apply(i,[e])})},_)o(t);return l&&h(l.text)&&b&&b.length&&n.width>0&&n.height>0?(l=e({align:s&&g&&"center",x:s?!g&&4:10,verticalAlign:!s&&g&&"middle",y:s?g?16:10:g?6:-4,rotation:s&&!g&&90},l),c||(i.label=c=k.text(l.text,0,0).attr({align:l.textAlign||l.align,rotation:l.rotation,zIndex:w}).css(l.style).add()),n=[b[1],b[4],p(b[6],b[1])],b=[b[2],b[5],p(b[7],b[2])],s=S(n),g=S(b),c.align(l,!1,{x:s,y:g,width:T(n)-s,height:T(b)-g}),c.show()):c&&c.hide(),i},destroy:function(){c(this.axis.plotLinesAndBands,this),E(this,this.axis)}},N.prototype={destroy:function(){E(this,this.axis)},setTotal:function(t){this.cum=this.total=t},render:function(t){var e=this.options,i=e.formatter.call(this);this.label?this.label.attr({text:i,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(i,0,0,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var i=this.axis,n=i.chart,s=n.inverted,r=this.isNegative,o=i.translate(this.percent?100:this.total,0,0,0,1),i=i.translate(0),i=mt(o-i),a=n.xAxis[0].translate(this.x)+t,l=n.plotHeight,r={x:s?r?o:o-i:a,y:s?l-a-e:r?l-o-i:l-o,width:s?i:e,height:s?e:i};(s=this.label)&&(s.align(this.alignOptions,null,r),r=s.alignAttr,s.attr({visibility:this.options.crop===!1||n.isInsidePlot(r.x,r.y)?At?"inherit":"visible":"hidden"}))}},B.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Zt,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:Zt.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(t,e){var i=e.isX;this.horiz=t.inverted?!i:i,this.xOrY=(this.isXAxis=i)?"x":"y",this.opposite=e.opposite,this.side=this.horiz?this.opposite?0:2:this.opposite?1:3,this.setOptions(e);var n=this.options,s=n.type;this.labelFormatter=n.labels.formatter||this.defaultLabelFormatter,this.staggerLines=this.horiz&&n.labels.staggerLines,this.userOptions=e,this.minPixelPadding=0,this.chart=t,this.reversed=n.reversed,this.zoomEnabled=n.zoomEnabled!==!1,this.categories=n.categories||"category"===s,this.isLog="logarithmic"===s,this.isDatetimeAxis="datetime"===s,this.isLinked=h(n.linkedTo),this.tickmarkOffset=this.categories&&"between"===n.tickmarkPlacement?.5:0,this.ticks={},this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=n.minRange||n.maxZoom,this.range=n.range,this.offset=n.offset||0,this.stacks={},this._stacksTouched=0,this.min=this.max=null;var r,n=this.options.events;te(this,t.axes)===-1&&(t.axes.push(this),t[i?"xAxis":"yAxis"].push(this)),this.series=this.series||[],t.inverted&&i&&this.reversed===$&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(r in n)re(this,r,n[r]);this.isLog&&(this.val2lin=a,this.lin2val=l)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(W[this.isXAxis?"xAxis":"yAxis"],t))},update:function(t,i){var n=this.chart,t=n.options[this.xOrY+"Axis"][this.options.index]=e(this.userOptions,t);this.destroy(),this._addedPlotLB=!1,this.init(n,t),n.isDirtyBox=!0,p(i,!0)&&n.redraw()},remove:function(t){var e=this.chart,i=this.xOrY+"Axis";ee(this.series,function(t){t.remove(!1)}),c(e.axes,this),c(e[i],this),e.options[i].splice(this.options.index,1),this.destroy(),e.isDirtyBox=!0,p(t,!0)&&e.redraw()},defaultLabelFormatter:function(){var t,e=this.axis,i=this.value,n=e.categories,s=this.dateTimeLabelFormat,r=W.lang.numericSymbols,o=r&&r.length,a=e.options.labels.format,e=e.isLog?i:e.tickInterval;if(a)t=b(a,this);else if(n)t=i;else if(s)t=G(s,i);else if(o&&e>=1e3)for(;o--&&t===$;)n=Math.pow(1e3,o+1),e>=n&&null!==r[o]&&(t=v(i/n,-1)+r[o]);return t===$&&(t=i>=1e3?v(i,0):v(i,-1)),t},getSeriesExtremes:function(){var t,e,i=this,n=i.chart,s=i.stacks,r=[],o=[],a=i._stacksTouched+=1;i.hasVisibleSeries=!1,i.dataMin=i.dataMax=null,ee(i.series,function(t){if(t.visible||!n.options.chart.ignoreHiddenSeries){var l,c,u,d,f,g,m,v,y,b,x=t.options,w=x.threshold,_=[],k=0;if(i.hasVisibleSeries=!0,i.isLog&&w<=0&&(w=x.threshold=null),i.isXAxis)x=t.xData,x.length&&(i.dataMin=gt(p(i.dataMin,x[0]),S(x)),i.dataMax=ft(p(i.dataMax,x[0]),T(x)));else{var C,E,M,A=t.cropped,O=t.xAxis.getExtremes(),D=!!t.modifyValue;for(l=x.stacking,i.usePercentage="percent"===l,l&&(f=x.stack,d=t.type+p(f,""),g="-"+d,t.stackKey=d,c=r[d]||[],r[d]=c,u=o[g]||[],o[g]=u),i.usePercentage&&(i.dataMin=0,i.dataMax=99),x=t.processedXData,m=t.processedYData,b=m.length,e=0;e<b;e++)if(v=x[e],y=m[e],l&&(E=(C=y<w)?u:c,M=C?g:d,h(E[v])?(E[v]=P(E[v]+y),y=[y,E[v]]):E[v]=y,s[M]||(s[M]={}),s[M][v]||(s[M][v]=new N(i,i.options.stackLabels,C,v,f,l)),s[M][v].setTotal(E[v]),s[M][v].touched=a),null!==y&&y!==$&&(!i.isLog||y.length||y>0)&&(D&&(y=t.modifyValue(y)),t.getExtremesFromAll||A||(x[e+1]||v)>=O.min&&(x[e-1]||v)<=O.max))if(v=y.length)for(;v--;)null!==y[v]&&(_[k++]=y[v]);else _[k++]=y;!i.usePercentage&&_.length&&(t.dataMin=l=S(_),t.dataMax=t=T(_),i.dataMin=gt(p(i.dataMin,l),l),i.dataMax=ft(p(i.dataMax,t),t)),h(w)&&(i.dataMin>=w?(i.dataMin=w,i.ignoreMinPadding=!0):i.dataMax<w&&(i.dataMax=w,i.ignoreMaxPadding=!0))}}});for(t in s)for(e in s[t])s[t][e].touched<a&&(s[t][e].destroy(),delete s[t][e])},translate:function(t,e,i,n,s,r){var o=this.len,a=1,l=0,c=n?this.oldTransA:this.transA,n=n?this.oldMin:this.min,h=this.minPixelPadding,s=(this.options.ordinal||this.isLog&&s)&&this.lin2val;return c||(c=this.transA),i&&(a*=-1,l=o),this.reversed&&(a*=-1,l-=a*o),e?(t=t*a+l,t-=h,t=t/c+n,s&&(t=this.lin2val(t))):(s&&(t=this.val2lin(t)),t=a*(t-n)*c+l+a*h+(r?c*this.pointRange/2:0)),t},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n){var s,r,o,a,l=this.chart,c=this.left,h=this.top,t=this.translate(t,null,null,i),u=i&&l.oldChartHeight||l.chartHeight,d=i&&l.oldChartWidth||l.chartWidth;return s=this.transB,i=r=ut(t+s),s=o=ut(u-t-s),isNaN(t)?a=!0:this.horiz?(s=h,o=u-this.bottom,(i<c||i>c+this.width)&&(a=!0)):(i=c,r=d-this.right,(s<h||s>h+this.height)&&(a=!0)),a&&!n?null:l.renderer.crispLine(["M",i,s,"L",r,o],e||0)},getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e),n=this.getPlotLinePath(t);return n&&i?n.push(i[4],i[5],i[1],i[2]):n=null,n},getLinearTickPositions:function(t,e,i){for(var n,e=P(dt(e/t)*t),i=P(pt(i/t)*t),s=[];e<=i&&(s.push(e),e=P(e+t),e!==n);)n=e;return s},getLogTickPositions:function(t,e,i,n){var s=this.options,r=this.len,o=[];if(n||(this._minorAutoInterval=null),t>=.5)t=ut(t),o=this.getLinearTickPositions(t,e,i);else if(t>=.08)for(var c,h,u,d,f,r=dt(e),s=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];r<i+1&&!f;r++)for(h=s.length,c=0;c<h&&!f;c++)u=a(l(r)*s[c]),u>e&&(!n||d<=i)&&o.push(d),d>i&&(f=!0),d=u;else e=l(e),i=l(i),t=s[n?"minorTickInterval":"tickInterval"],t=p("auto"===t?null:t,this._minorAutoInterval,(i-e)*(s.tickPixelInterval/(n?5:1))/((n?r/this.tickPositions.length:r)||1)),t=x(t,null,ht.pow(10,dt(ht.log(t)/ht.LN10))),o=se(this.getLinearTickPositions(t,e,i),a),n||(this._minorAutoInterval=t/5);return n||(this.tickInterval=t),o},getMinorTickPositions:function(){var t,e=this.options,i=this.tickPositions,n=this.minorTickInterval,s=[];if(this.isLog)for(t=i.length,e=1;e<t;e++)s=s.concat(this.getLogTickPositions(n,i[e-1],i[e],!0));else if(this.isDatetimeAxis&&"auto"===e.minorTickInterval)s=s.concat(_(w(n),this.min,this.max,e.startOfWeek)),s[0]<this.min&&s.shift();else for(i=this.min+(i[0]-this.min)%n;i<=this.max;i+=n)s.push(i);return s},adjustForMinRange:function(){var t,e,i,n,s,r,o=this.options,a=this.min,l=this.max,c=this.dataMax-this.dataMin>=this.minRange;if(this.isXAxis&&this.minRange===$&&!this.isLog&&(h(o.min)||h(o.max)?this.minRange=null:(ee(this.series,function(t){for(s=t.xData,i=r=t.xIncrement?1:s.length-1;i>0;i--)n=s[i]-s[i-1],(e===$||n<e)&&(e=n)}),this.minRange=gt(5*e,this.dataMax-this.dataMin))),l-a<this.minRange){var u=this.minRange;t=(u-l+a)/2,t=[a-t,p(o.min,a-t)],c&&(t[2]=this.dataMin),a=T(t),l=[a+u,p(o.max,a+u)],c&&(l[2]=this.dataMax),l=S(l),l-a<u&&(t[0]=l-u,t[1]=p(o.min,l-u),a=T(t))}this.min=a,this.max=l},setAxisTranslation:function(t){var e,i=this.max-this.min,n=0,s=0,r=0,o=this.linkedParent,a=this.transA;this.isXAxis&&(o?(s=o.minPointOffset,r=o.pointRangePadding):ee(this.series,function(t){var o=t.pointRange,a=t.options.pointPlacement,l=t.closestPointRange;o>i&&(o=0),n=ft(n,o),s=ft(s,a?0:o/2),r=ft(r,"on"===a?0:o),!t.noSharedTooltip&&h(l)&&(e=h(e)?gt(e,l):l)}),o=this.ordinalSlope?this.ordinalSlope/e:1,this.minPointOffset=s*=o,this.pointRangePadding=r*=o,this.pointRange=gt(n,i),this.closestPointRange=e),t&&(this.oldTransA=a),this.translationSlope=this.transA=a=this.len/(i+r||1),this.transB=this.horiz?this.left:this.bottom,this.minPixelPadding=a*s},setTickPositions:function(t){var e=this,i=e.chart,n=e.options,s=e.isLog,r=e.isDatetimeAxis,o=e.isXAxis,l=e.isLinked,c=e.options.tickPositioner,u=n.maxPadding,d=n.minPadding,f=n.tickInterval,g=n.minTickInterval,m=n.tickPixelInterval,v=e.categories;l?(e.linkedParent=i[o?"xAxis":"yAxis"][n.linkedTo],i=e.linkedParent.getExtremes(),e.min=p(i.min,i.dataMin),e.max=p(i.max,i.dataMax),n.type!==e.linkedParent.options.type&&A(11,1)):(e.min=p(e.userMin,n.min,e.dataMin),e.max=p(e.userMax,n.max,e.dataMax)),s&&(!t&&gt(e.min,p(e.dataMin,e.min))<=0&&A(10,1),e.min=P(a(e.min)),e.max=P(a(e.max))),e.range&&(e.userMin=e.min=ft(e.min,e.max-e.range),e.userMax=e.max,t)&&(e.range=null),e.beforePadding&&e.beforePadding(),e.adjustForMinRange(),!v&&!e.usePercentage&&!l&&h(e.min)&&h(e.max)&&(i=e.max-e.min)&&(h(n.min)||h(e.userMin)||!d||!(e.dataMin<0)&&e.ignoreMinPadding||(e.min-=i*d),h(n.max)||h(e.userMax)||!u||!(e.dataMax>0)&&e.ignoreMaxPadding||(e.max+=i*u)),e.tickInterval=e.min===e.max||void 0===e.min||void 0===e.max?1:l&&!f&&m===e.linkedParent.options.tickPixelInterval?e.linkedParent.tickInterval:p(f,v?1:(e.max-e.min)*m/(e.len||1)),o&&!t&&ee(e.series,function(t){t.processData(e.min!==e.oldMin||e.max!==e.oldMax)}),e.setAxisTranslation(!0),e.beforeSetTickPositions&&e.beforeSetTickPositions(),e.postProcessTickInterval&&(e.tickInterval=e.postProcessTickInterval(e.tickInterval)),!f&&e.tickInterval<g&&(e.tickInterval=g),r||s||(t=ht.pow(10,dt(ht.log(e.tickInterval)/ht.LN10)),f)||(e.tickInterval=x(e.tickInterval,null,t,n)),e.minorTickInterval="auto"===n.minorTickInterval&&e.tickInterval?e.tickInterval/5:n.minorTickInterval,e.tickPositions=c=n.tickPositions?[].concat(n.tickPositions):c&&c.apply(e,[e.min,e.max]),c||(c=r?(e.getNonLinearTimeTicks||_)(w(e.tickInterval,n.units),e.min,e.max,n.startOfWeek,e.ordinalPositions,e.closestPointRange,!0):s?e.getLogTickPositions(e.tickInterval,e.min,e.max):e.getLinearTickPositions(e.tickInterval,e.min,e.max),e.tickPositions=c),l||(s=c[0],r=c[c.length-1],l=e.minPointOffset||0,n.startOnTick?e.min=s:e.min-l>s&&c.shift(),n.endOnTick?e.max=r:e.max+l<r&&c.pop(),1===c.length&&(e.min-=.001,e.max+=.001))},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},i=this.tickPositions,n=this._maxTicksKey=[this.xOrY,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&i&&i.length>(e[n]||0)&&this.options.alignTicks!==!1&&(e[n]=i.length),t.maxTicks=e},adjustTickAmount:function(){var t=this._maxTicksKey,e=this.tickPositions,i=this.chart.maxTicks;if(i&&i[t]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1){var n=this.tickAmount,s=e.length;if(this.tickAmount=t=i[t],s<t){for(;e.length<t;)e.push(P(e[e.length-1]+this.tickInterval));this.transA*=(s-1)/(t-1),this.max=e[e.length-1]}h(n)&&t!==n&&(this.isDirty=!0)}},setScale:function(){var t,e,i,n,s=this.stacks;if(this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),n=this.len!==this.oldAxisLength,ee(this.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(i=!0)}),(n||i||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax)&&(this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=n||this.min!==this.oldMin||this.max!==this.oldMax)),!this.isXAxis)for(t in s)for(e in s[t])s[t][e].cum=s[t][e].total;this.setMaxTicks()},setExtremes:function(e,i,n,s,r){var o=this,a=o.chart,n=p(n,!0),r=t(r,{min:e,max:i});ae(o,"setExtremes",r,function(){o.userMin=e,o.userMax=i,o.isDirtyExtremes=!0,n&&a.redraw(s)})},zoom:function(t,e){return this.allowZoomOutside||(t<=this.dataMin&&(t=$),e>=this.dataMax&&(e=$)),this.displayBtn=t!==$||e!==$,this.setExtremes(t,e,!1,$,{trigger:"zoom"}),!0},setAxisSize:function(){var t,e,i=this.chart,n=this.options,s=n.offsetLeft||0,r=n.offsetRight||0,o=this.horiz;this.left=e=p(n.left,i.plotLeft+s),this.top=t=p(n.top,i.plotTop),this.width=s=p(n.width,i.plotWidth-s+r),this.height=n=p(n.height,i.plotHeight),this.bottom=i.chartHeight-n-t,this.right=i.chartWidth-s-e,this.len=ft(o?s:n,0),this.pos=o?e:t},getExtremes:function(){var t=this.isLog;return{min:t?P(l(this.min)):this.min,max:t?P(l(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,i=e?l(this.min):this.min,e=e?l(this.max):this.max;return i>t||null===t?t=i:e<t&&(t=e),this.translate(t,0,1,0,1)},addPlotBand:function(t){this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new R(this,t).render(),n=this.userOptions;return e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i),i},getOffset:function(){var t,e,i,n=this,s=n.chart,r=s.renderer,o=n.options,a=n.tickPositions,l=n.ticks,c=n.horiz,u=n.side,d=s.inverted?[1,0,3,2][u]:u,f=0,g=0,m=o.title,v=o.labels,y=0,b=s.axisOffset,x=s.clipOffset,w=[-1,1,1,-1][u];if(n.hasData=s=n.hasVisibleSeries||h(n.min)&&h(n.max)&&!!a,n.showAxis=t=s||p(o.showEmpty,!0),n.axisGroup||(n.gridGroup=r.g("grid").attr({zIndex:o.gridZIndex||1}).add(),n.axisGroup=r.g("axis").attr({zIndex:o.zIndex||2}).add(),n.labelGroup=r.g("axis-labels").attr({zIndex:v.zIndex||7}).add()),s||n.isLinked)ee(a,function(t){l[t]?l[t].addLabel():l[t]=new I(n,t)}),ee(a,function(t){0!==u&&2!==u&&{1:"left",3:"right"}[u]!==v.align||(y=ft(l[t].getLabelSize(),y))}),n.staggerLines&&(y+=16*(n.staggerLines-1));else for(i in l)l[i].destroy(),delete l[i];m&&m.text&&m.enabled!==!1&&(n.axisTitle||(n.axisTitle=r.text(m.text,0,0,m.useHTML).attr({zIndex:7,rotation:m.rotation||0,align:m.textAlign||{low:"left",middle:"center",high:"right"}[m.align]}).css(m.style).add(n.axisGroup),n.axisTitle.isNew=!0),t&&(f=n.axisTitle.getBBox()[c?"height":"width"],g=p(m.margin,c?5:10),e=m.offset),n.axisTitle[t?"show":"hide"]()),n.offset=w*p(o.offset,b[u]),n.axisTitleMargin=p(e,y+g+(2!==u&&y&&w*o.labels[c?"y":"x"])),b[u]=ft(b[u],n.axisTitleMargin+f+w*n.offset),x[d]=ft(x[d],o.lineWidth)},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,s=this.horiz,r=this.left+(i?this.width:0)+n;return this.lineTop=n=e.chartHeight-this.bottom-(i?this.height:0)+n,i||(t*=-1),e.renderer.crispLine(["M",s?this.left:r,s?n:this.top,"L",s?e.chartWidth-this.right:r,s?n:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,n=this.top,s=this.len,r=this.options.title,o=t?e:n,a=this.opposite,l=this.offset,c=i(r.style.fontSize||12),s={low:o+(t?0:s),middle:o+s/2,high:o+(t?s:0)}[r.align],e=(t?n+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?c:0);return{x:t?s:e+(a?this.width:0)+l+(r.x||0),y:t?e-(a?this.height:0)+l:s+(r.y||0)}},render:function(){var t,e=this,i=e.chart,n=i.renderer,s=e.options,r=e.isLog,o=e.isLinked,a=e.tickPositions,c=e.axisTitle,u=e.stacks,d=e.ticks,p=e.minorTicks,f=e.alternateBands,g=s.stackLabels,m=s.alternateGridColor,v=e.tickmarkOffset,y=s.lineWidth,b=i.hasRendered&&h(e.oldMin)&&!isNaN(e.oldMin);t=e.hasData;var x,w,_=e.showAxis;if(ee([d,p,f],function(t){for(var e in t)t[e].isActive=!1}),(t||o)&&(e.minorTickInterval&&!e.categories&&ee(e.getMinorTickPositions(),function(t){p[t]||(p[t]=new I(e,t,"minor")),b&&p[t].isNew&&p[t].render(null,!0),p[t].render(null,!1,1)}),a.length&&(ee(a.slice(1).concat([a[0]]),function(t,i){i=i===a.length-1?0:i+1,(!o||t>=e.min&&t<=e.max)&&(d[t]||(d[t]=new I(e,t)),b&&d[t].isNew&&d[t].render(i,!0),d[t].render(i,!1,1))}),v&&0===e.min&&(d[-1]||(d[-1]=new I(e,(-1),null,(!0))),d[-1].render(-1))),m&&ee(a,function(t,i){i%2===0&&t<e.max&&(f[t]||(f[t]=new R(e)),x=t+v,w=a[i+1]!==$?a[i+1]+v:e.max,f[t].options={from:r?l(x):x,to:r?l(w):w,color:m},f[t].render(),f[t].isActive=!0)}),e._addedPlotLB||(ee((s.plotLines||[]).concat(s.plotBands||[]),function(t){e.addPlotBandOrLine(t)}),e._addedPlotLB=!0)),ee([d,p,f],function(t){var e,n,s=[],r=U?U.duration||500:0,o=function(){for(n=s.length;n--;)t[s[n]]&&!t[s[n]].isActive&&(t[s[n]].destroy(),delete t[s[n]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,s.push(e));t!==f&&i.hasRendered&&r?r&&setTimeout(o,r):o()}),y&&(t=e.getLinePath(y),e.axisLine?e.axisLine.animate({d:t}):e.axisLine=n.path(t).attr({stroke:s.lineColor,"stroke-width":y,zIndex:7}).add(e.axisGroup),e.axisLine[_?"show":"hide"]()),c&&_&&(c[c.isNew?"attr":"animate"](e.getTitlePosition()),c.isNew=!1),g&&g.enabled){var k,C,s=e.stackTotalGroup;s||(e.stackTotalGroup=s=n.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),s.translate(i.plotLeft,i.plotTop);for(k in u)for(C in n=u[k])n[C].render(s)}e.isDirty=!1},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=e.length;i--;)e[i].id===t&&e[i].destroy()},setTitle:function(t,e){this.update({title:t},e)},redraw:function(){var t=this.chart.pointer;t.reset&&t.reset(!0),this.render(),ee(this.plotLinesAndBands,function(t){t.render()}),ee(this.series,function(t){t.isDirty=!0})},setCategories:function(t,e){this.update({categories:t},e)},destroy:function(){var t,e=this,i=e.stacks;oe(e);for(t in i)E(i[t]),i[t]=null;ee([e.ticks,e.minorTicks,e.alternateBands,e.plotLinesAndBands],function(t){E(t)}),ee("stackTotalGroup,axisLine,axisGroup,gridGroup,labelGroup,axisTitle".split(","),function(t){e[t]&&(e[t]=e[t].destroy())})}},H.prototype={init:function(t,e){var n=e.borderWidth,s=e.style,r=i(s.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape,null,null,e.useHTML,null,"tooltip").attr({padding:r,fill:e.backgroundColor,"stroke-width":n,r:e.borderRadius,zIndex:8}).css(s).css({padding:0}).hide().add(),Ot||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){ee(this.crosshairs,function(t){t&&t.destroy()}),this.label&&(this.label=this.label.destroy())},move:function(e,i,n,s){var r=this,o=r.now,a=r.options.animation!==!1&&!r.isHidden;t(o,{x:a?(2*o.x+e)/3:e,y:a?(o.y+i)/2:i,anchorX:a?(2*o.anchorX+n)/3:n,anchorY:a?(o.anchorY+s)/2:s
}),r.label.attr(o),a&&(mt(e-o.x)>1||mt(i-o.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){r&&r.move(e,i,n,s)},32))},hide:function(){var t,e=this;this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},p(this.options.hideDelay,500)),t&&ee(t,function(t){t.setState()}),this.chart.hoverPoints=null)},hideCrosshairs:function(){ee(this.crosshairs,function(t){t&&t.hide()})},getAnchor:function(t,e){var i,n,s=this.chart,r=s.inverted,o=s.plotTop,a=0,l=0,t=d(t);return i=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===$&&(e=s.pointer.normalize(e)),i=[e.chartX-s.plotLeft,e.chartY-o]),i||(ee(t,function(t){n=t.series.yAxis,a+=t.plotX,l+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!r&&n?n.top-o:0)}),a/=t.length,l/=t.length,i=[r?s.plotWidth-l:a,this.shared&&!r&&t.length>1&&e?e.chartY-o:r?s.plotHeight-a:l]),se(i,ut)},getPosition:function(t,e,i){var n,s=this.chart,r=s.plotLeft,o=s.plotTop,a=s.plotWidth,l=s.plotHeight,c=p(this.options.distance,12),h=i.plotX,i=i.plotY,s=h+r+(s.inverted?c:-t-c),u=i-e+o+15;return s<7&&(s=r+ft(h,0)+c),s+t>r+a&&(s-=s+t-(r+a),u=i-e+o-c,n=!0),u<o+5&&(u=o+5,n&&i>=u&&i<=u+e&&(u=i+o+c)),u+e>o+l&&(u=ft(o,o+l-e-c)),{x:s,y:u}},defaultFormatter:function(t){var e,i=this.points||d(this),n=i[0].series;return e=[n.tooltipHeaderFormatter(i[0])],ee(i,function(t){n=t.series,e.push(n.tooltipFormatter&&n.tooltipFormatter(t)||t.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var i,n,s,r,o=this.chart,l=this.label,c=this.options,h={},u=[];r=c.formatter||this.defaultFormatter;var f,h=o.hoverPoints,g=c.crosshairs;if(s=this.shared,clearTimeout(this.hideTimer),this.followPointer=d(t)[0].series.tooltipOptions.followPointer,n=this.getAnchor(t,e),i=n[0],n=n[1],!s||t.series&&t.series.noSharedTooltip?h=t.getLabelConfig():(o.hoverPoints=t,h&&ee(h,function(t){t.setState()}),ee(t,function(t){t.setState("hover"),u.push(t.getLabelConfig())}),h={x:t[0].category,y:t[0].y},h.points=u,t=t[0]),r=r.call(h,this),h=t.series,s=s||!h.isCartesian||h.tooltipOutsidePlot||o.isInsidePlot(i,n),r!==!1&&s?(this.isHidden&&(he(l),l.attr("opacity",1).show()),l.attr({text:r}),f=c.borderColor||t.color||h.color||"#606060",l.attr({stroke:f}),this.updatePosition({plotX:i,plotY:n}),this.isHidden=!1):this.hide(),g)for(g=d(g),l=g.length;l--;)c=t.series[l?"yAxis":"xAxis"],g[l]&&c&&(s=l?p(t.stackY,t.y):t.x,c.isLog&&(s=a(s)),c=c.getPlotLinePath(s,1),this.crosshairs[l]?this.crosshairs[l].attr({d:c,visibility:"visible"}):(s={"stroke-width":g[l].width||1,stroke:g[l].color||"#C0C0C0",zIndex:g[l].zIndex||2},g[l].dashStyle&&(s.dashstyle=g[l].dashStyle),this.crosshairs[l]=o.renderer.path(c).attr(s).add()));ae(o,"tooltipRefresh",{text:r,x:i+o.plotLeft,y:n+o.plotTop,borderColor:f})},updatePosition:function(t){var e=this.chart,i=this.label,i=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(ut(i.x),ut(i.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)}},j.prototype={init:function(t,e){var i,n=Ot?"":e.chart.zoomType,s=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(n),this.zoomY=n=/y/.test(n),this.zoomHor=i&&!s||n&&s,this.zoomVert=n&&!s||i&&s,this.pinchDown=[],this.lastValidTouch={},e.tooltip.enabled&&(t.tooltip=new H(t,e.tooltip)),this.setDOMEvents()},normalize:function(e){var i,n,s,e=e||ct.event;return e.target||(e.target=e.srcElement),e=le(e),s=e.touches?e.touches.item(0):e,this.chartPosition=i=ne(this.chart.container),s.pageX===$?(n=e.x,i=e.y):(n=s.pageX-i.left,i=s.pageY-i.top),t(e,{chartX:ut(n),chartY:ut(i)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return ee(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,i,n,s=this.chart,r=s.series,o=s.tooltip,a=s.hoverPoint,l=s.hoverSeries,c=s.chartWidth,h=this.getIndex(t);if(o&&this.options.tooltip.shared&&(!l||!l.noSharedTooltip)){for(e=[],i=r.length,n=0;n<i;n++)r[n].visible&&r[n].options.enableMouseTracking!==!1&&!r[n].noSharedTooltip&&r[n].tooltipPoints.length&&(s=r[n].tooltipPoints[h],s.series)&&(s._dist=mt(h-s.clientX),c=gt(c,s._dist),e.push(s));for(i=e.length;i--;)e[i]._dist>c&&e.splice(i,1);e.length&&e[0].clientX!==this.hoverX&&(o.refresh(e,t),this.hoverX=e[0].clientX)}l&&l.tracker?(s=l.tooltipPoints[h])&&s!==a&&s.onMouseOver(t):o&&o.followPointer&&!o.isHidden&&(t=o.getAnchor([{}],t),o.updatePosition({plotX:t[0],plotY:t[1]}))},reset:function(t){var e=this.chart,i=e.hoverSeries,n=e.hoverPoint,s=e.tooltip,e=s&&s.shared?e.hoverPoints:n;(t=t&&s&&e)&&d(e)[0].plotX===$&&(t=!1),t?s.refresh(e):(n&&n.onMouseOut(),i&&i.onMouseOut(),s&&(s.hide(),s.hideCrosshairs()),this.hoverX=null)},scaleGroups:function(t,e){var i=this.chart;ee(i.series,function(n){n.xAxis.zoomEnabled&&(n.group.attr(t),n.markerGroup&&(n.markerGroup.attr(t),n.markerGroup.clip(e?i.clipRect:null)),n.dataLabelsGroup&&n.dataLabelsGroup.attr(t))}),i.clipRect.attr(e||i.clipBox)},pinchTranslateDirection:function(t,e,i,n,s,r,o){var a,l,c,h=this.chart,u=t?"x":"y",d=t?"X":"Y",p="chart"+d,f=t?"width":"height",g=h["plot"+(t?"Left":"Top")],m=1,v=h.inverted,y=h.bounds[t?"h":"v"],b=1===e.length,x=e[0][p],w=i[0][p],_=!b&&e[1][p],k=!b&&i[1][p],i=function(){!b&&mt(x-_)>20&&(m=mt(w-k)/mt(x-_)),l=(g-w)/m+x,a=h["plot"+(t?"Width":"Height")]/m};i(),e=l,e<y.min?(e=y.min,c=!0):e+a>y.max&&(e=y.max-a,c=!0),c?(w-=.8*(w-o[u][0]),b||(k-=.8*(k-o[u][1])),i()):o[u]=[w,k],v||(r[u]=l-g,r[f]=a),r=v?1/m:m,s[f]=a,s[u]=e,n[v?t?"scaleY":"scaleX":"scale"+d]=m,n["translate"+d]=r*g+(w-r*x)},pinch:function(e){var i=this,n=i.chart,s=i.pinchDown,r=n.tooltip.options.followTouchMove,o=e.touches,a=o.length,l=i.lastValidTouch,c=i.zoomHor||i.pinchHor,h=i.zoomVert||i.pinchVert,u=c||h,d=i.selectionMarker,p={},f={};"touchstart"===e.type&&r&&(i.inClass(e.target,"highcharts-tracker")?(!n.runTrackerClick||a>1)&&e.preventDefault():(!n.runChartClick||a>1)&&e.preventDefault()),se(o,function(t){return i.normalize(t)}),"touchstart"===e.type?(ee(o,function(t,e){s[e]={chartX:t.chartX,chartY:t.chartY}}),l.x=[s[0].chartX,s[1]&&s[1].chartX],l.y=[s[0].chartY,s[1]&&s[1].chartY],ee(n.axes,function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,s=t.toPixels(t.dataMin),r=t.toPixels(t.dataMax),o=gt(s,r),s=ft(s,r);e.min=gt(t.pos,o-i),e.max=ft(t.pos+t.len,s+i)}})):s.length&&(d||(i.selectionMarker=d=t({destroy:Rt},n.plotBox)),c&&i.pinchTranslateDirection(!0,s,o,p,d,f,l),h&&i.pinchTranslateDirection(!1,s,o,p,d,f,l),i.hasPinched=u,i.scaleGroups(p,f),!u&&r&&1===a&&this.runPointActions(i.normalize(e)))},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,this.mouseDownY=t.chartY},drag:function(t){var e,i=this.chart,n=i.options.chart,s=t.chartX,t=t.chartY,r=this.zoomHor,o=this.zoomVert,a=i.plotLeft,l=i.plotTop,c=i.plotWidth,h=i.plotHeight,u=this.mouseDownX,d=this.mouseDownY;s<a?s=a:s>a+c&&(s=a+c),t<l?t=l:t>l+h&&(t=l+h),this.hasDragged=Math.sqrt(Math.pow(u-s,2)+Math.pow(d-t,2)),this.hasDragged>10&&(e=i.isInsidePlot(u-a,d-l),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!this.selectionMarker&&(this.selectionMarker=i.renderer.rect(a,l,r?1:c,o?1:h,0).attr({fill:n.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&r&&(r=s-u,this.selectionMarker.attr({width:mt(r),x:(r>0?0:r)+u})),this.selectionMarker&&o&&(r=t-d,this.selectionMarker.attr({height:mt(r),y:(r>0?0:r)+d})),e&&!this.selectionMarker&&n.panning&&i.pan(s))},drop:function(e){var i=this.chart,n=this.hasPinched;if(this.selectionMarker){var s,r={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},o=this.selectionMarker,a=o.x,l=o.y;(this.hasDragged||n)&&(ee(i.axes,function(t){if(t.zoomEnabled){var e=t.horiz,i=t.minPixelPadding,n=t.toValue((e?a:l)+i),e=t.toValue((e?a+o.width:l+o.height)-i);!isNaN(n)&&!isNaN(e)&&(r[t.xOrY+"Axis"].push({axis:t,min:gt(n,e),max:ft(n,e)}),s=!0)}}),s&&ae(i,"selection",r,function(e){i.zoom(t(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups({translateX:i.plotLeft,translateY:i.plotTop,scaleX:1,scaleY:1})}i&&(f(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){this.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition,n=e.hoverSeries,t=le(t);i&&n&&n.isCartesian&&!e.isInsidePlot(t.pageX-i.left-e.plotLeft,t.pageY-i.top-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset(),this.chartPosition=null},onContainerMouseMove:function(t){var e=this.chart,t=this.normalize(t);t.returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=u(t,"class")){if(i.indexOf(e)!==-1)return!0;if(i.indexOf("highcharts-container")!==-1)return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries;!e||e.options.stickyTracking||this.inClass(t.toElement||t.relatedTarget,"highcharts-tooltip")||e.onMouseOut()},onContainerClick:function(e){var i,n,s,r=this.chart,o=r.hoverPoint,a=r.plotLeft,l=r.plotTop,c=r.inverted,e=this.normalize(e);e.cancelBubble=!0,r.cancelClick||(o&&this.inClass(e.target,"highcharts-tracker")?(i=this.chartPosition,n=o.plotX,s=o.plotY,t(o,{pageX:i.left+a+(c?r.plotWidth-s:n),pageY:i.top+l+(c?r.plotHeight-n:s)}),ae(o.series,"click",t(e,{point:o})),o.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),r.isInsidePlot(e.chartX-a,e.chartY-l)&&ae(r,"click",e)))},onContainerTouchStart:function(t){var e=this.chart;1===t.touches.length?(t=this.normalize(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&(this.runPointActions(t),this.pinch(t))):2===t.touches.length&&this.pinch(t)},onContainerTouchMove:function(t){(1===t.touches.length||2===t.touches.length)&&this.pinch(t)},onDocumentTouchEnd:function(t){this.drop(t)},setDOMEvents:function(){var t,e=this,i=e.chart.container;this._events=t=[[i,"onmousedown","onContainerMouseDown"],[i,"onmousemove","onContainerMouseMove"],[i,"onclick","onContainerClick"],[i,"mouseleave","onContainerMouseLeave"],[lt,"mousemove","onDocumentMouseMove"],[lt,"mouseup","onDocumentMouseUp"]],Dt&&t.push([i,"ontouchstart","onContainerTouchStart"],[i,"ontouchmove","onContainerTouchMove"],[lt,"touchend","onDocumentTouchEnd"]),ee(t,function(t){e["_"+t[2]]=function(i){e[t[2]](i)},0===t[1].indexOf("on")?t[0][t[1]]=e["_"+t[2]]:re(t[0],t[1],e["_"+t[2]])})},destroy:function(){var t=this;ee(t._events,function(e){0===e[1].indexOf("on")?e[0][e[1]]=null:oe(e[0],e[1],t["_"+e[2]])}),delete t._events,clearInterval(t.tooltipTimeout)}},V.prototype={init:function(t,n){var s=this,r=n.itemStyle,o=p(n.padding,8),a=n.itemMarginTop||0;this.options=n,n.enabled&&(s.baseline=i(r.fontSize)+3+a,s.itemStyle=r,s.itemHiddenStyle=e(r,n.itemHiddenStyle),s.itemMarginTop=a,s.padding=o,s.initialItemX=o,s.initialItemY=o-5,s.maxItemWidth=0,s.chart=t,s.itemHeight=0,s.lastLineHeight=0,s.render(),re(s.chart,"endResize",function(){s.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n=this.options,s=t.legendItem,r=t.legendLine,o=t.legendSymbol,a=this.itemHiddenStyle.color,n=e?n.itemStyle.color:a,l=e?t.color:a,a=t.options&&t.options.marker,c={stroke:l,fill:l};if(s&&s.css({fill:n,color:n}),r&&r.attr({stroke:l}),o){if(a)for(i in a=t.convertAttribs(a))s=a[i],s!==$&&(c[i]=s);o.attr(c)}},positionItem:function(t){var e=this.options,i=e.symbolPadding,e=!e.rtl,n=t._legendItemPos,s=n[0],n=n[1],r=t.checkbox;t.legendGroup&&t.legendGroup.translate(e?s:this.legendWidth-s-2*i-4,n),r&&(r.x=s,r.y=n)},destroyItem:function(t){var e=t.checkbox;ee(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&t[e].destroy()}),e&&M(t.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,ee(this.allItems,function(s){var r,o=s.checkbox;o&&(r=e+o.y+(t||0)+3,f(o,{left:i.translateX+s.legendItemWidth+o.x-20+"px",top:r+"px",display:r>e-6&&r<e+n-6?"":Ht}))}))},renderTitle:function(){var t=this.padding,e=this.options.title,i=0;e.text&&(this.title||(this.title=this.chart.renderer.label(e.text,t-3,t-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(e.style).add(this.group)),i=this.title.getBBox().height,this.contentGroup.attr({translateY:i})),this.titleHeight=i},renderItem:function(t){var i,n=this,s=n.chart,r=s.renderer,o=n.options,a="horizontal"===o.layout,l=o.symbolWidth,c=o.symbolPadding,h=n.itemStyle,u=n.itemHiddenStyle,d=n.padding,p=!o.rtl,f=o.width,m=o.itemMarginBottom||0,v=n.itemMarginTop,y=n.initialItemX,x=t.legendItem,w=t.series||t,_=w.options,k=_.showCheckbox,C=o.useHTML;!x&&(t.legendGroup=r.g("legend-item").attr({zIndex:1}).add(n.scrollGroup),w.drawLegendSymbol(n,t),t.legendItem=x=r.text(o.labelFormat?b(o.labelFormat,t):o.labelFormatter.call(t),p?l+c:-c,n.baseline,C).css(e(t.visible?h:u)).attr({align:p?"left":"right",zIndex:2}).add(t.legendGroup),(C?x:t.legendGroup).on("mouseover",function(){t.setState("hover"),x.css(n.options.itemHoverStyle)}).on("mouseout",function(){x.css(t.visible?h:u),t.setState()}).on("click",function(e){var i=function(){t.setVisible()},e={browserEvent:e};t.firePointEvent?t.firePointEvent("legendItemClick",e,i):ae(t,"legendItemClick",e,i)}),n.colorizeItem(t,t.visible),_&&k)&&(t.checkbox=g("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},o.itemCheckboxStyle,s.container),re(t.checkbox,"click",function(e){ae(t,"checkboxClick",{checked:e.target.checked},function(){t.select()})})),r=x.getBBox(),i=t.legendItemWidth=o.itemWidth||l+c+r.width+d+(k?20:0),o=i,n.itemHeight=l=r.height,a&&n.itemX-y+o>(f||s.chartWidth-2*d-y)&&(n.itemX=y,n.itemY+=v+n.lastLineHeight+m,n.lastLineHeight=0),n.maxItemWidth=ft(n.maxItemWidth,o),n.lastItemY=v+n.itemY+m,n.lastLineHeight=ft(l,n.lastLineHeight),t._legendItemPos=[n.itemX,n.itemY],a?n.itemX+=o:(n.itemY+=v+l+m,n.lastLineHeight=l),n.offsetWidth=f||ft(a?n.itemX-y:o,n.offsetWidth)},render:function(){var e,i,n,s,r=this,o=r.chart,a=o.renderer,l=r.group,c=r.box,u=r.options,d=r.padding,p=u.borderWidth,f=u.backgroundColor;r.itemX=r.initialItemX,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,l||(r.group=l=a.g("legend").attr({zIndex:7}).add(),r.contentGroup=a.g().attr({zIndex:1}).add(l),r.scrollGroup=a.g().add(r.contentGroup),r.clipRect=a.clipRect(0,0,9999,o.chartHeight),r.contentGroup.clip(r.clipRect)),r.renderTitle(),e=[],ee(o.series,function(t){var i=t.options;i.showInLegend&&!h(i.linkedTo)&&(e=e.concat(t.legendItems||("point"===i.legendType?t.data:t)))}),C(e,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),u.reversed&&e.reverse(),r.allItems=e,r.display=i=!!e.length,ee(e,function(t){r.renderItem(t)}),n=u.width||r.offsetWidth,s=r.lastItemY+r.lastLineHeight+r.titleHeight,s=r.handleOverflow(s),(p||f)&&(n+=d,s+=d,c?n>0&&s>0&&(c[c.isNew?"attr":"animate"](c.crisp(null,null,null,n,s)),c.isNew=!1):(r.box=c=a.rect(0,0,n,s,u.borderRadius,p||0).attr({stroke:u.borderColor,"stroke-width":p||0,fill:f||Ht}).add(l).shadow(u.shadow),c.isNew=!0),c[i?"show":"hide"]()),r.legendWidth=n,r.legendHeight=s,ee(e,function(t){r.positionItem(t)}),i&&l.align(t({width:n,height:s},u),!0,"spacingBox"),o.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e=this,i=this.chart,n=i.renderer,s=this.options,r=s.y,r=i.spacingBox.height+("top"===s.verticalAlign?-r:r)-this.padding,o=s.maxHeight,a=this.clipRect,l=s.navigation,c=p(l.animation,!0),h=l.arrowSize||12,u=this.nav;return"horizontal"===s.layout&&(r/=2),o&&(r=gt(r,o)),t>r&&!s.useHTML?(this.clipHeight=i=r-20-this.titleHeight,this.pageCount=pt(t/i),this.currentPage=p(this.currentPage,1),this.fullHeight=t,a.attr({height:i}),u||(this.nav=u=n.g().attr({zIndex:1}).add(this.group),this.up=n.symbol("triangle",0,0,h,h).on("click",function(){e.scroll(-1,c)}).add(u),this.pager=n.text("",15,10).css(l.style).add(u),this.down=n.symbol("triangle-down",0,0,h,h).on("click",function(){e.scroll(1,c)}).add(u)),e.scroll(0),t=r):u&&(a.attr({height:i.chartHeight}),u.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i=this.pageCount,n=this.currentPage+t,s=this.clipHeight,r=this.options.navigation,o=r.activeColor,a=r.inactiveColor,r=this.pager,l=this.padding;n>i&&(n=i),n>0&&(e!==$&&O(e,this.chart),this.nav.attr({translateX:l,translateY:s+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===n?a:o}).css({cursor:1===n?"default":"pointer"}),r.attr({text:n+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:n===i?a:o}).css({cursor:n===i?"default":"pointer"}),s=-gt(s*(n-1),this.fullHeight-s+l)+1,this.scrollGroup.animate({translateY:s}),r.attr({text:n+"/"+i}),this.currentPage=n,this.positionCheckboxes(s))}},F.prototype={init:function(t,i){var n,r=t.series;t.series=null,n=e(W,t),n.series=t.series=r;var r=n.chart,o=r.margin,o=s(o)?o:[o,o,o,o];this.optionsMarginTop=p(r.marginTop,o[0]),this.optionsMarginRight=p(r.marginRight,o[1]),this.optionsMarginBottom=p(r.marginBottom,o[2]),this.optionsMarginLeft=p(r.marginLeft,o[3]),this.runChartClick=(o=r.events)&&!!o.click,this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var a,l=this;if(l.index=Nt.length,Nt.push(l),r.reflow!==!1&&re(l,"load",function(){l.initReflow()}),o)for(a in o)re(l,a,o[a]);l.xAxis=[],l.yAxis=[],l.animation=!Ot&&p(r.animation,!0),l.pointCount=0,l.counters=new k,l.firstRender()},initSeries:function(t){var e=this.options.chart;return(e=Xt[t.type||e.type||e.defaultSeriesType])||A(17,!0),e=new e,e.init(this,t),e},addSeries:function(t,e,i){var n,s=this;return t&&(e=p(e,!0),ae(s,"addSeries",{options:t},function(){n=s.initSeries(t),s.isDirtyLegend=!0,e&&s.redraw(i)})),n},addAxis:function(t,i,n,s){var i=i?"xAxis":"yAxis",r=this.options;new B(this,e(t,{index:this[i].length})),r[i]=d(r[i]||{}),r[i].push(t),p(n,!0)&&this.redraw(s)},isInsidePlot:function(t,e,i){var n=i?e:t,t=i?t:e;return n>=0&&n<=this.plotWidth&&t>=0&&t<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&ee(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(t){var e,i=this.axes,n=this.series,s=this.pointer,r=this.legend,o=this.isDirtyLegend,a=this.isDirtyBox,l=n.length,c=l,h=this.renderer,u=h.isHidden(),d=[];for(O(t,this),u&&this.cloneRenderTo();c--;)if(t=n[c],t.isDirty&&t.options.stacking){e=!0;break}if(e)for(c=l;c--;)t=n[c],t.options.stacking&&(t.isDirty=!0);ee(n,function(t){t.isDirty&&"point"===t.options.legendType&&(o=!0)}),o&&r.options.enabled&&(r.render(),this.isDirtyLegend=!1),this.hasCartesianSeries&&(this.isResizing||(this.maxTicks=null,ee(i,function(t){t.setScale()})),this.adjustTickAmounts(),this.getMargins(),ee(i,function(t){t.isDirtyExtremes&&(t.isDirtyExtremes=!1,d.push(function(){ae(t,"afterSetExtremes",t.getExtremes())})),(t.isDirty||a||e)&&(t.redraw(),a=!0)})),a&&this.drawChartBox(),ee(n,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),s&&s.reset&&s.reset(!0),h.draw(),ae(this,"redraw"),u&&this.cloneRenderTo(!0),ee(d,function(t){t.call()})},showLoading:function(e){var i=this.options,n=this.loadingDiv,s=i.loading;n||(this.loadingDiv=n=g(Bt,{className:"highcharts-loading"},t(s.style,{zIndex:10,display:Ht}),this.container),this.loadingSpan=g("span",null,s.labelStyle,n)),this.loadingSpan.innerHTML=e||i.lang.loading,this.loadingShown||(f(n,{opacity:0,display:"",left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px"}),ce(n,{opacity:s.style.opacity},{duration:s.showDuration||0}),this.loadingShown=!0)},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&ce(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){f(e,{display:Ht})}}),this.loadingShown=!1},get:function(t){var e,i,n=this.axes,s=this.series;for(e=0;e<n.length;e++)if(n[e].options.id===t)return n[e];for(e=0;e<s.length;e++)if(s[e].options.id===t)return s[e];for(e=0;e<s.length;e++)for(i=s[e].points||[],n=0;n<i.length;n++)if(i[n].id===t)return i[n];return null},getAxes:function(){var t=this,e=this.options,i=e.xAxis=d(e.xAxis||{}),e=e.yAxis=d(e.yAxis||{});ee(i,function(t,e){t.index=e,t.isX=!0}),ee(e,function(t,e){t.index=e}),i=i.concat(e),ee(i,function(e){new B(t,e)}),t.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return ee(this.series,function(e){t=t.concat(ie(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return ie(this.series,function(t){return t.selected})},showResetZoom:function(){var t=this,e=W.lang,i=t.options.chart.resetZoomButton,n=i.theme,s=n.states,r="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,s&&s.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,r)},zoomOut:function(){var t=this;ae(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this.pointer,r=!1;!t||t.resetSelection?ee(this.axes,function(t){e=t.zoom()}):ee(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,s=i.isXAxis;(n[s?"zoomX":"zoomY"]||n[s?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(r=!0))}),i=this.resetZoomButton,r&&!i?this.showResetZoom():!r&&s(i)&&(this.resetZoomButton=i.destroy()),e&&this.redraw(p(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(t){var e=this.xAxis[0],i=this.mouseDownX,n=e.pointRange/2,s=e.getExtremes(),r=e.translate(i-t,!0)+n,i=e.translate(i+this.plotWidth-t,!0)-n;(n=this.hoverPoints)&&ee(n,function(t){t.setState()}),e.series.length&&r>gt(s.dataMin,s.min)&&i<ft(s.dataMax,s.max)&&e.setExtremes(r,i,!0,!1,{trigger:"pan"}),this.mouseDownX=t,f(this.container,{cursor:"move"})},setTitle:function(t,i){var n,s,r=this,o=r.options;s=o.title=e(o.title,t),n=o.subtitle=e(o.subtitle,i),o=n,ee([["title",t,s],["subtitle",i,o]],function(t){var e=t[0],i=r[e],n=t[1],t=t[2];i&&n&&(r[e]=i=i.destroy()),t&&t.text&&!i&&(r[e]=r.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,"class":"highcharts-"+e,zIndex:t.zIndex||4}).css(t.style).add().align(t,!1,"spacingBox"))})},getChartSize:function(){var t=this.options.chart,e=this.renderToClone||this.renderTo;this.containerWidth=Kt(e,"width"),this.containerHeight=Kt(e,"height"),this.chartWidth=ft(0,t.width||this.containerWidth||600),this.chartHeight=ft(0,p(t.height,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),M(e),delete this.renderToClone):(i&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),f(e,{position:"absolute",top:"-9999px",display:"block"}),lt.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var e,s,r,o,a=this.options.chart;this.renderTo=e=a.renderTo,o="highcharts-"+It++,n(e)&&(this.renderTo=e=lt.getElementById(e)),e||A(13,!0),s=i(u(e,"data-highcharts-chart")),!isNaN(s)&&Nt[s]&&Nt[s].destroy(),u(e,"data-highcharts-chart",this.index),e.innerHTML="",e.offsetWidth||this.cloneRenderTo(),this.getChartSize(),s=this.chartWidth,r=this.chartHeight,this.container=e=g(Bt,{className:"highcharts-container"+(a.className?" "+a.className:""),id:o},t({position:"relative",overflow:"hidden",width:s+"px",height:r+"px",textAlign:"left",lineHeight:"normal",zIndex:0},a.style),this.renderToClone||e),this._cursor=e.style.cursor,this.renderer=a.forExport?new pe(e,s,r,(!0)):new z(e,s,r),Ot&&this.renderer.create(this,e,s,r)},getMargins:function(){var t,e=this.options.chart,i=e.spacingTop,n=e.spacingRight,s=e.spacingBottom,e=e.spacingLeft,r=this.legend,o=this.optionsMarginTop,a=this.optionsMarginLeft,l=this.optionsMarginRight,c=this.optionsMarginBottom,u=this.options.title,d=this.options.subtitle,f=this.options.legend,g=p(f.margin,10),m=f.x,v=f.y,y=f.align,b=f.verticalAlign;this.resetMargins(),t=this.axisOffset,!this.title&&!this.subtitle||h(this.optionsMarginTop)||(d=ft(this.title&&!u.floating&&!u.verticalAlign&&u.y||0,this.subtitle&&!d.floating&&!d.verticalAlign&&d.y||0))&&(this.plotTop=ft(this.plotTop,d+p(u.margin,15)+i)),r.display&&!f.floating&&("right"===y?h(l)||(this.marginRight=ft(this.marginRight,r.legendWidth-m+g+n)):"left"===y?h(a)||(this.plotLeft=ft(this.plotLeft,r.legendWidth+m+g+e)):"top"===b?h(o)||(this.plotTop=ft(this.plotTop,r.legendHeight+v+g+i)):"bottom"!==b||h(c)||(this.marginBottom=ft(this.marginBottom,r.legendHeight-v+g+s))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&ee(this.axes,function(t){t.getOffset()}),h(a)||(this.plotLeft+=t[3]),h(o)||(this.plotTop+=t[0]),h(c)||(this.marginBottom+=t[2]),h(l)||(this.marginRight+=t[1]),this.setChartSize()},initReflow:function(){function t(t){var r=n.width||Kt(s,"width"),o=n.height||Kt(s,"height"),t=t?t.target:ct;i.hasUserSize||!r||!o||t!==ct&&t!==lt||(r===i.containerWidth&&o===i.containerHeight||(clearTimeout(e),i.reflowTimeout=e=setTimeout(function(){i.container&&(i.setSize(r,o,!1),i.hasUserSize=null)},100)),i.containerWidth=r,i.containerHeight=o)}var e,i=this,n=i.options.chart,s=i.renderTo;re(ct,"resize",t),re(i,"destroy",function(){oe(ct,"resize",t)})},setSize:function(t,e,i){var n,s,r,o=this;o.isResizing+=1,r=function(){o&&ae(o,"endResize",null,function(){o.isResizing-=1})},O(i,o),o.oldChartHeight=o.chartHeight,o.oldChartWidth=o.chartWidth,h(t)&&(o.chartWidth=n=ft(0,ut(t)),o.hasUserSize=!!n),h(e)&&(o.chartHeight=s=ft(0,ut(e))),f(o.container,{width:n+"px",height:s+"px"}),o.setChartSize(!0),o.renderer.setSize(n,s,i),o.maxTicks=null,ee(o.axes,function(t){t.isDirty=!0,t.setScale()}),ee(o.series,function(t){t.isDirty=!0}),o.isDirtyLegend=!0,o.isDirtyBox=!0,o.getMargins(),o.redraw(i),o.oldChartHeight=null,ae(o,"resize"),U===!1?r():setTimeout(r,U&&U.duration||500)},setChartSize:function(t){var e,i,n,s,r=this.inverted,o=this.renderer,a=this.chartWidth,l=this.chartHeight,c=this.options.chart,h=c.spacingTop,u=c.spacingRight,d=c.spacingBottom,p=c.spacingLeft,f=this.clipOffset;this.plotLeft=e=ut(this.plotLeft),this.plotTop=i=ut(this.plotTop),this.plotWidth=n=ft(0,ut(a-e-this.marginRight)),this.plotHeight=s=ft(0,ut(l-i-this.marginBottom)),this.plotSizeX=r?s:n,this.plotSizeY=r?n:s,this.plotBorderWidth=r=c.plotBorderWidth||0,this.spacingBox=o.spacingBox={x:p,y:h,width:a-p-u,height:l-h-d},this.plotBox=o.plotBox={x:e,y:i,width:n,height:s},o=pt(ft(r,f[3])/2),a=pt(ft(r,f[0])/2),this.clipBox={x:o,y:a,width:dt(this.plotSizeX-ft(r,f[1])/2-o),height:dt(this.plotSizeY-ft(r,f[2])/2-a)},t||ee(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this.options.chart,e=t.spacingRight,i=t.spacingBottom,n=t.spacingLeft;this.plotTop=p(this.optionsMarginTop,t.spacingTop),this.marginRight=p(this.optionsMarginRight,e),this.marginBottom=p(this.optionsMarginBottom,i),this.plotLeft=p(this.optionsMarginLeft,n),this.axisOffset=[0,0,0,0],this.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e=this.options.chart,i=this.renderer,n=this.chartWidth,s=this.chartHeight,r=this.chartBackground,o=this.plotBackground,a=this.plotBorder,l=this.plotBGImage,c=e.borderWidth||0,h=e.backgroundColor,u=e.plotBackgroundColor,d=e.plotBackgroundImage,p=e.plotBorderWidth||0,f=this.plotLeft,g=this.plotTop,m=this.plotWidth,v=this.plotHeight,y=this.plotBox,b=this.clipRect,x=this.clipBox;t=c+(e.shadow?8:0),(c||h)&&(r?r.animate(r.crisp(null,null,null,n-t,s-t)):(r={fill:h||Ht},c&&(r.stroke=e.borderColor,r["stroke-width"]=c),this.chartBackground=i.rect(t/2,t/2,n-t,s-t,e.borderRadius,c).attr(r).add().shadow(e.shadow))),u&&(o?o.animate(y):this.plotBackground=i.rect(f,g,m,v,0).attr({fill:u}).add().shadow(e.plotShadow)),d&&(l?l.animate(y):this.plotBGImage=i.image(d,f,g,m,v).add()),b?b.animate({width:x.width,height:x.height}):this.clipRect=i.clipRect(x),p&&(a?a.animate(a.crisp(null,f,g,m,v)):this.plotBorder=i.rect(f,g,m,v,0,p).attr({stroke:e.plotBorderColor,"stroke-width":p,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,s=n.options.chart,r=n.options.series;ee(["inverted","angular","polar"],function(o){for(t=Xt[s.type||s.defaultSeriesType],i=n[o]||s[o]||t&&t.prototype[o],e=r&&r.length;!i&&e--;)(t=Xt[r[e].type])&&t.prototype[o]&&(i=!0);n[o]=i})},render:function(){var e,n=this,s=n.axes,r=n.renderer,o=n.options,a=o.labels,l=o.credits;n.setTitle(),n.legend=new V(n,o.legend),ee(s,function(t){t.setScale()}),n.getMargins(),n.maxTicks=null,ee(s,function(t){t.setTickPositions(!0),t.setMaxTicks()}),n.adjustTickAmounts(),n.getMargins(),n.drawChartBox(),n.hasCartesianSeries&&ee(s,function(t){t.render()}),n.seriesGroup||(n.seriesGroup=r.g("series-group").attr({zIndex:3}).add()),ee(n.series,function(t){t.translate(),t.setTooltipPoints(),t.render()}),a.items&&ee(a.items,function(e){var s=t(a.style,e.style),o=i(s.left)+n.plotLeft,l=i(s.top)+n.plotTop+12;delete s.left,delete s.top,r.text(e.html,o,l).attr({zIndex:2}).css(s).add()}),l.enabled&&!n.credits&&(e=l.href,n.credits=r.text(l.text,0,0).on("click",function(){e&&(location.href=e)}).attr({align:l.position.align,zIndex:8}).css(l.style).add().align(l.position)),n.hasRendered=!0},destroy:function(){var t,e=this,i=e.axes,n=e.series,s=e.container,r=s&&s.parentNode;for(ae(e,"destroy"),Nt[e.index]=$,e.renderTo.removeAttribute("data-highcharts-chart"),oe(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();ee("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),s&&(s.innerHTML="",oe(s),r&&M(s));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!(!At&&ct==ct.top&&"complete"!==lt.readyState||Ot&&!ct.canvg)||(Ot?me.push(function(){t.firstRender()},t.options.global.canvasToolsURL):lt.attachEvent("onreadystatechange",function(){lt.detachEvent("onreadystatechange",t.firstRender),"complete"===lt.readyState&&t.firstRender()}),!1)},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),ae(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),ee(e.series||[],function(e){t.initSeries(e)}),ae(t,"beforeRender"),t.pointer=new j(t,e),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),ee(t.callbacks,function(e){e.apply(t,[t])}),t.cloneRenderTo(!0),ae(t,"load"))}},F.prototype.callbacks=[];var ve=function(){};ve.prototype={init:function(t,e,i){return this.series=t,this.applyOptions(e,i),this.pointAttr={},t.options.colorByPoint&&(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter++],t.colorCounter===e.length)&&(t.colorCounter=0),t.chart.pointCount++,this},applyOptions:function(e,i){var n=this.series,s=n.pointValKey,e=ve.prototype.optionsToObject.call(this,e);return t(this,e),this.options=this.options?t(this.options,e):e,s&&(this.y=this[s]),this.x===$&&n&&(this.x=i===$?n.autoIncrement():i),this},optionsToObject:function(t){var e,i=this.series,n=i.pointArrayMap||["y"],s=n.length,o=0,a=0;if("number"==typeof t||null===t)e={y:t};else if(r(t))for(e={},t.length>s&&(i=typeof t[0],"string"===i?e.name=t[0]:"number"===i&&(e.x=t[0]),o++);a<s;)e[n[a++]]=t[o++];else"object"==typeof t&&(e=t,t.dataLabels&&(i._hasPointLabels=!0),t.marker&&(i._hasPointMarkers=!0));return e},destroy:function(){var t,e=this.series.chart,i=e.hoverPoints;e.pointCount--,i&&(this.setState(),c(i,this),!i.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut(),
(this.graphic||this.dataLabel)&&(oe(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this);for(t in this)this[t]=null},destroyElements:function(){for(var t,e="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),i=6;i--;)t=e[i],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},select:function(t,e){var i=this,n=i.series,s=n.chart,t=p(t,!i.selected);i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[te(i,n.data)]=i.options,i.setState(t&&"select"),e||ee(s.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[te(t,n.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this.series,i=e.chart,n=i.tooltip,s=i.hoverPoint;s&&s!==this&&s.onMouseOut(),this.firePointEvent("mouseOver"),n&&(!n.shared||e.noSharedTooltip)&&n.refresh(this,t),this.setState("hover"),i.hoverPoint=this},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;e&&te(this,e)!==-1||(this.firePointEvent("mouseOut"),this.setState(),t.hoverPoint=null)},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=p(i.valueDecimals,""),s=i.valuePrefix||"",r=i.valueSuffix||"";return ee(e.pointArrayMap||["y"],function(e){e="{point."+e,(s||r)&&(t=t.replace(e+"}",s+e+"}"+r)),t=t.replace(e+"}",e+":,."+n+"f}")}),b(t,{point:this,series:this.series})},update:function(t,e,i){var n,r=this,o=r.series,a=r.graphic,l=o.data,c=o.chart,e=p(e,!0);r.firePointEvent("update",{options:t},function(){r.applyOptions(t),s(t)&&(o.getAttribs(),a&&a.attr(r.pointAttr[o.state])),n=te(r,l),o.xData[n]=r.x,o.yData[n]=o.toYData?o.toYData(r):r.y,o.zData[n]=r.z,o.options.data[n]=r.options,o.isDirty=!0,o.isDirtyData=!0,e&&c.redraw(i)})},remove:function(t,e){var i,n=this,s=n.series,r=s.chart,o=s.data;O(e,r),t=p(t,!0),n.firePointEvent("remove",null,function(){i=te(n,o),o.splice(i,1),s.options.data.splice(i,1),s.xData.splice(i,1),s.yData.splice(i,1),s.zData.splice(i,1),n.destroy(),s.isDirty=!0,s.isDirtyData=!0,t&&r.redraw()})},firePointEvent:function(t,e,i){var n=this,s=this.series.options;(s.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&s.allowPointSelect&&(i=function(t){n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),ae(this,t,e,i)},importEvents:function(){if(!this.hasImportedEvents){var t,i=e(this.series.options.point,this.options).events;this.events=i;for(t in i)re(this,t,i[t]);this.hasImportedEvents=!0}},setState:function(t){var i=this.plotX,n=this.plotY,s=this.series,r=s.options.states,o=ue[s.type].marker&&s.options.marker,a=o&&!o.enabled,l=o&&o.states[t],c=l&&l.enabled===!1,h=s.stateMarkerGraphic,u=this.marker||{},d=s.chart,p=this.pointAttr,t=t||"";t===this.state||this.selected&&"select"!==t||r[t]&&r[t].enabled===!1||t&&(c||a&&!l.enabled)||(this.graphic?(r=o&&this.graphic.symbolName&&p[t].r,this.graphic.attr(e(p[t],r?{x:i-r,y:n-r,width:2*r,height:2*r}:{}))):(t&&l&&(r=l.radius,u=u.symbol||s.symbol,h&&h.currentSymbol!==u&&(h=h.destroy()),h?h.attr({x:i-r,y:n-r}):(s.stateMarkerGraphic=h=d.renderer.symbol(u,i-r,n-r,2*r,2*r).attr(p[t]).add(s.markerGroup),h.currentSymbol=u)),h&&h[t&&d.isInsidePlot(i,n)?"show":"hide"]()),this.state=t)}};var ye=function(){};ye.prototype={isCartesian:!0,type:"line",pointClass:ve,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},colorCounter:0,init:function(e,i){var s,r,o=e.series;this.chart=e,this.options=i=this.setOptions(i),this.bindAxes(),t(this,{name:i.name,state:"",pointAttr:{},visible:i.visible!==!1,selected:i.selected===!0}),Ot&&(i.animation=!1),r=i.events;for(s in r)re(this,s,r[s]);(r&&r.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(e.runTrackerClick=!0),this.getColor(),this.getSymbol(),this.setData(i.data,!1),this.isCartesian&&(e.hasCartesianSeries=!0),o.push(this),this._i=o.length-1,C(o,function(t,e){return p(t.options.index,t._i)-p(e.options.index,t._i)}),ee(o,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)}),s=i.linkedTo,this.linkedSeries=[],n(s)&&(s=":previous"===s?o[this.index-1]:e.get(s))&&(s.linkedSeries.push(this),this.linkedParent=s)},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;e.isCartesian&&ee(["xAxis","yAxis"],function(s){ee(n[s],function(n){t=n.options,(i[s]===t.index||i[s]!==$&&i[s]===t.id||i[s]===$&&0===t.index)&&(n.series.push(e),e[s]=n,n.isDirty=!0)}),e[s]||A(17,!0)})},autoIncrement:function(){var t=this.options,e=this.xIncrement,e=p(e,t.pointStart,0);return this.pointInterval=p(this.pointInterval,t.pointInterval,1),this.xIncrement=e+this.pointInterval,e},getSegments:function(){var t,e=-1,i=[],n=this.points,s=n.length;if(s)if(this.options.connectNulls){for(t=s;t--;)null===n[t].y&&n.splice(t,1);n.length&&(i=[n])}else ee(n,function(t,r){null===t.y?(r>e+1&&i.push(n.slice(e+1,r)),e=r):r===s-1&&i.push(n.slice(e+1,r+1))});this.segments=i},setOptions:function(t){var i=this.chart.options,n=i.plotOptions,s=n[this.type];return this.userOptions=t,t=e(s,n.series,t),this.tooltipOptions=e(i.tooltip,t.tooltip),null===s.marker&&delete t.marker,t},getColor:function(){var t,e=this.options,i=this.userOptions,n=this.chart.options.colors,s=this.chart.counters;t=e.color||ue[this.type].color,t||e.colorByPoint||(h(i._colorIndex)?e=i._colorIndex:(i._colorIndex=s.color,e=s.color++),t=n[e]),this.color=t,s.wrapColor(n.length)},getSymbol:function(){var t=this.userOptions,e=this.options.marker,i=this.chart,n=i.options.symbols,i=i.counters;this.symbol=e.symbol,this.symbol||(h(t._symbolIndex)?t=t._symbolIndex:(t._symbolIndex=i.symbol,t=i.symbol++),this.symbol=n[t]),/^url/.test(this.symbol)&&(e.radius=0),i.wrapSymbol(n.length)},drawLegendSymbol:function(t){var e,i=this.options,n=i.marker,s=t.options.symbolWidth,r=this.chart.renderer,o=this.legendGroup,t=t.baseline;i.lineWidth&&(e={"stroke-width":i.lineWidth},i.dashStyle&&(e.dashstyle=i.dashStyle),this.legendLine=r.path(["M",0,t-4,"L",s,t-4]).attr(e).add(o)),n&&n.enabled&&(i=n.radius,this.legendSymbol=r.symbol(this.symbol,s/2-i,t-4-i,2*i,2*i).add(o))},addPoint:function(t,e,i,n){var s=this.options,r=this.data,o=this.graph,a=this.area,l=this.chart,c=this.xData,h=this.yData,u=this.zData,d=this.names,f=o&&o.shift||0,g=s.data;O(n,l),o&&i&&(o.shift=f+1),a&&(i&&(a.shift=f+1),a.isArea=!0),e=p(e,!0),n={series:this},this.pointClass.prototype.applyOptions.apply(n,[t]),c.push(n.x),h.push(this.toYData?this.toYData(n):n.y),u.push(n.z),d&&(d[n.x]=n.name),g.push(t),"point"===s.legendType&&this.generatePoints(),i&&(r[0]&&r[0].remove?r[0].remove(!1):(r.shift(),c.shift(),h.shift(),u.shift(),g.shift())),this.getAttribs(),this.isDirtyData=this.isDirty=!0,e&&l.redraw()},setData:function(t,e){var i,s=this.points,a=this.options,l=this.chart,c=null,h=this.xAxis,u=h&&h.categories&&!h.categories.length?[]:null;this.xIncrement=null,this.pointRange=h&&h.categories?1:a.pointRange,this.colorCounter=0;var d=[],f=[],g=[],m=t?t.length:[],v=(i=this.pointArrayMap)&&i.length,y=!!this.toYData;if(m>(a.turboThreshold||1e3)){for(i=0;null===c&&i<m;)c=t[i],i++;if(o(c)){for(c=p(a.pointStart,0),a=p(a.pointInterval,1),i=0;i<m;i++)d[i]=c,f[i]=t[i],c+=a;this.xIncrement=c}else if(r(c))if(v)for(i=0;i<m;i++)a=t[i],d[i]=a[0],f[i]=a.slice(1,v+1);else for(i=0;i<m;i++)a=t[i],d[i]=a[0],f[i]=a[1]}else for(i=0;i<m;i++)t[i]!==$&&(a={series:this},this.pointClass.prototype.applyOptions.apply(a,[t[i]]),d[i]=a.x,f[i]=y?this.toYData(a):a.y,g[i]=a.z,u&&a.name)&&(u[i]=a.name);for(this.requireSorting&&d.length>1&&d[1]<d[0]&&A(15),n(f[0])&&A(14,!0),this.data=[],this.options.data=t,this.xData=d,this.yData=f,this.zData=g,this.names=u,i=s&&s.length||0;i--;)s[i]&&s[i].destroy&&s[i].destroy();h&&(h.minRange=h.userMinRange),this.isDirty=this.isDirtyData=l.isDirtyBox=!0,p(e,!0)&&l.redraw(!1)},remove:function(t,e){var i=this,n=i.chart,t=p(t,!0);i.isRemoving||(i.isRemoving=!0,ae(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,t&&n.redraw(e)})),i.isRemoving=!1},processData:function(t){var e,i,n=this.xData,s=this.yData,r=n.length,o=0,a=r,l=this.xAxis,c=this.options,h=c.cropThreshold,u=this.isCartesian;if(u&&!this.isDirty&&!l.isDirty&&!this.yAxis.isDirty&&!t)return!1;if(u&&this.sorted&&(!h||r>h||this.forceCrop))if(t=l.getExtremes(),l=t.min,h=t.max,n[r-1]<l||n[0]>h)n=[],s=[];else if(n[0]<l||n[r-1]>h){for(t=0;t<r;t++)if(n[t]>=l){o=ft(0,t-1);break}for(;t<r;t++)if(n[t]>h){a=t+1;break}n=n.slice(o,a),s=s.slice(o,a),e=!0}for(t=n.length-1;t>0;t--)r=n[t]-n[t-1],r>0&&(i===$||r<i)&&(i=r);this.cropped=e,this.cropStart=o,this.processedXData=n,this.processedYData=s,null===c.pointRange&&(this.pointRange=i||1),this.closestPointRange=i},generatePoints:function(){var t,e,i,n,s=this.options.data,r=this.data,o=this.processedXData,a=this.processedYData,l=this.pointClass,c=o.length,h=this.cropStart||0,u=this.hasGroupedData,p=[];for(r||u||(r=[],r.length=s.length,r=this.data=r),n=0;n<c;n++)e=h+n,u?p[n]=(new l).init(this,[o[n]].concat(d(a[n]))):(r[e]?i=r[e]:s[e]!==$&&(r[e]=i=(new l).init(this,s[e],o[n])),p[n]=i);if(r&&(c!==(t=r.length)||u))for(n=0;n<t;n++)n===h&&!u&&(n+=c),r[n]&&(r[n].destroyElements(),r[n].plotX=$);this.data=r,this.points=p},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var t,e=this.options,i=e.stacking,n=this.xAxis,s=n.categories,r=this.yAxis,o=this.points,a=o.length,l=!!this.modifyValue,c=r.series,u=c.length,d="between"===e.pointPlacement,e=e.threshold;u--;)if(c[u].visible){c[u]===this&&(t=!0);break}for(u=0;u<a;u++){var c=o[u],f=c.x,g=c.y,m=c.low,v=r.stacks[(g<e?"-":"")+this.stackKey];r.isLog&&g<=0&&(c.y=g=null),c.plotX=n.translate(f,0,0,0,1,d),i&&this.visible&&v&&v[f]&&(m=v[f],v=m.total,m.cum=m=m.cum-g,g=m+g,t&&(m=p(e,r.min)),r.isLog&&m<=0&&(m=null),"percent"===i&&(m=v?100*m/v:0,g=v?100*g/v:0),c.percentage=v?100*c.y/v:0,c.total=c.stackTotal=v,c.stackY=g),c.yBottom=h(m)?r.translate(m,0,1,0,1):null,l&&(g=this.modifyValue(g,c)),c.plotY="number"==typeof g&&g!==1/0?ut(10*r.translate(g,0,1,0,1))/10:$,c.clientX=d?n.translate(f,0,0,0,1):c.plotX,c.negative=c.y<(e||0),c.category=s&&s[c.x]!==$?s[c.x]:c.x}this.getSegments()},setTooltipPoints:function(t){var e,i,n,s,r=[],o=(e=this.xAxis)?e.tooltipLen||e.len:this.chart.plotSizeX,a=[];if(this.options.enableMouseTracking!==!1){for(t&&(this.tooltipPoints=null),ee(this.segments||this.points,function(t){r=r.concat(t)}),e&&e.reversed&&(r=r.reverse()),t=r.length,s=0;s<t;s++)for(n=r[s],e=r[s-1]?i+1:0,i=r[s+1]?ft(0,dt((n.clientX+(r[s+1]?r[s+1].clientX:o))/2)):o;e>=0&&e<=i;)a[e++]=n;this.tooltipPoints=a}},tooltipHeaderFormatter:function(t){var e,i=this.tooltipOptions,n=i.xDateFormat,s=this.xAxis,r=s&&"datetime"===s.options.type,a=i.headerFormat;if(r&&!n)for(e in X)if(X[e]>=s.closestPointRange){n=i.dateTimeLabelFormats[e];break}return r&&n&&o(t.key)&&(a=a.replace("{point.key}","{point.key:"+n+"}")),b(a,{point:t,series:this})},onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&ae(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,i=e.tooltip,n=e.hoverPoint;n&&n.onMouseOut(),this&&t.events.mouseOut&&ae(this,"mouseOut"),i&&!t.stickyTracking&&(!i.shared||this.noSharedTooltip)&&i.hide(),this.setState(),e.hoverSeries=null},animate:function(e){var i,n=this,r=n.chart,o=r.renderer;i=n.options.animation;var a,l=r.clipBox,c=r.inverted;i&&!s(i)&&(i=ue[n.type].animation),a="_sharedClip"+i.duration+i.easing,e?(e=r[a],i=r[a+"m"],e||(r[a]=e=o.clipRect(t(l,{width:0})),r[a+"m"]=i=o.clipRect(-99,c?-r.plotLeft:-r.plotTop,99,c?r.chartWidth:r.chartHeight)),n.group.clip(e),n.markerGroup.clip(i),n.sharedClipKey=a):((e=r[a])&&(e.animate({width:r.plotSizeX},i),r[a+"m"].animate({width:r.plotSizeX+99},i)),n.animate=null,n.animationTimeout=setTimeout(function(){n.afterAnimate()},i.duration))},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,i=this.group;i&&this.options.clip!==!1&&(i.clip(t.clipRect),this.markerGroup.clip()),setTimeout(function(){e&&t[e]&&(t[e]=t[e].destroy(),t[e+"m"]=t[e+"m"].destroy())},100)},drawPoints:function(){var e,i,n,s,r,o,a,l,c,h,u=this.points,d=this.chart,f=this.options.marker,g=this.markerGroup;if(f.enabled||this._hasPointMarkers)for(s=u.length;s--;)r=u[s],i=r.plotX,n=r.plotY,c=r.graphic,a=r.marker||{},e=f.enabled&&a.enabled===$||a.enabled,h=d.isInsidePlot(i,n,d.inverted),e&&n!==$&&!isNaN(n)&&null!==r.y?(e=r.pointAttr[r.selected?"select":""],o=e.r,a=p(a.symbol,this.symbol),l=0===a.indexOf("url"),c?c.attr({visibility:h?At?"inherit":"visible":"hidden"}).animate(t({x:i-o,y:n-o},c.symbolName?{width:2*o,height:2*o}:{})):h&&(o>0||l)&&(r.graphic=d.renderer.symbol(a,i-o,n-o,2*o,2*o).attr(e).add(g))):c&&(r.graphic=c.destroy())},convertAttribs:function(t,e,i,n){var s,r,o=this.pointAttrToOptions,a={},t=t||{},e=e||{},i=i||{},n=n||{};for(s in o)r=o[s],a[s]=p(t[r],e[s],i[s],n[s]);return a},getAttribs:function(){var e,i,n,s=this,r=s.options,o=ue[s.type].marker?r.marker:r,a=o.states,l=a.hover,c=s.color,u={stroke:c,fill:c},d=s.points||[],p=[],f=s.pointAttrToOptions,g=r.negativeColor;for(r.marker?(l.radius=l.radius||o.radius+2,l.lineWidth=l.lineWidth||o.lineWidth+1):l.color=l.color||de(l.color||c).brighten(l.brightness).get(),p[""]=s.convertAttribs(o,u),ee(["hover","select"],function(t){p[t]=s.convertAttribs(a[t],p[""])}),s.pointAttr=p,c=d.length;c--;){if(u=d[c],(o=u.options&&u.options.marker||u.options)&&o.enabled===!1&&(o.radius=0),u.negative&&g&&(u.color=u.fillColor=g),e=r.colorByPoint||u.color,u.options)for(n in f)h(o[f[n]])&&(e=!0);e?(o=o||{},i=[],a=o.states||{},e=a.hover=a.hover||{},r.marker||(e.color=de(e.color||u.color).brighten(e.brightness||l.brightness).get()),i[""]=s.convertAttribs(t({color:u.color},o),p[""]),i.hover=s.convertAttribs(a.hover,p.hover,i[""]),i.select=s.convertAttribs(a.select,p.select,i[""]),u.negative&&r.marker&&(i[""].fill=i.hover.fill=i.select.fill=s.convertAttribs({fillColor:g}).fill)):i=p,u.pointAttr=i}},update:function(i,n){var s=this.chart,r=this.type,i=e(this.userOptions,{animation:!1,index:this.index,pointStart:this.xData[0]},i);this.remove(!1),t(this,Xt[i.type||r].prototype),this.init(s,i),p(n,!0)&&s.redraw(!1)},destroy:function(){var t,e,i,n,s,r=this,o=r.chart,a=/AppleWebKit\/533/.test(wt),l=r.data||[];for(ae(r,"destroy"),oe(r),ee(["xAxis","yAxis"],function(t){(s=r[t])&&(c(s.series,r),s.isDirty=s.forceRedraw=!0)}),r.legendItem&&r.chart.legend.destroyItem(r),e=l.length;e--;)(i=l[e])&&i.destroy&&i.destroy();r.points=null,clearTimeout(r.animationTimeout),ee("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(e){r[e]&&(t=a&&"group"===e?"hide":"destroy",r[e][t]())}),o.hoverSeries===r&&(o.hoverSeries=null),c(o.series,r);for(n in r)delete r[n]},drawDataLabels:function(){var t,i,n,s,r=this,o=r.options.dataLabels,a=r.points;(o.enabled||r._hasPointLabels)&&(r.dlProcessOptions&&r.dlProcessOptions(o),s=r.plotGroup("dataLabelsGroup","data-labels",r.visible?"visible":"hidden",o.zIndex||6),i=o,ee(a,function(a){var l,c,u,d=a.dataLabel,f=a.connector,g=!0;if(t=a.options&&a.options.dataLabels,l=i.enabled||t&&t.enabled,d&&!l)a.dataLabel=d.destroy();else if(l){if(l=o.rotation,o=e(i,t),c=a.getLabelConfig(),n=o.format?b(o.format,c):o.formatter.call(c,o),o.style.color=p(o.color,o.style.color,r.color,"black"),d)h(n)?(d.attr({text:n}),g=!1):(a.dataLabel=d=d.destroy(),f&&(a.connector=f.destroy()));else if(h(n)){d={fill:o.backgroundColor,stroke:o.borderColor,"stroke-width":o.borderWidth,r:o.borderRadius||0,rotation:l,padding:o.padding,zIndex:1};for(u in d)d[u]===$&&delete d[u];d=a.dataLabel=r.chart.renderer[l?"text":"label"](n,0,-999,null,null,null,o.useHTML).attr(d).css(o.style).add(s).shadow(o.shadow)}d&&r.alignDataLabel(a,d,o,null,g)}}))},alignDataLabel:function(e,i,n,s,r){var o=this.chart,a=o.inverted,l=p(e.plotX,-999),e=p(e.plotY,-999),c=i.getBBox(),s=t({x:a?o.plotWidth-e:l,y:ut(a?o.plotHeight-l:e),width:0,height:0},s);t(n,{width:c.width,height:c.height}),n.rotation?(s={align:n.align,x:s.x+n.x+s.width/2,y:s.y+n.y+s.height/2},i[r?"attr":"animate"](s)):i.align(n,null,s),i.attr({visibility:n.crop===!1||o.isInsidePlot(l,e,a)?o.renderer.isSVG?"inherit":"visible":"hidden"})},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return ee(t,function(s,r){var o,a=s.plotX,l=s.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,s,r)):(i.push(r?"L":"M"),n&&r&&(o=t[r-1],"right"===n?i.push(o.plotX,l):"center"===n?i.push((o.plotX+a)/2,o.plotY,(o.plotX+a)/2,l):i.push(a,o.plotY)),i.push(s.plotX,s.plotY))}),i},getGraphPath:function(){var t,e=this,i=[],n=[];return ee(e.segments,function(s){t=e.getSegmentPath(s),s.length>1?i=i.concat(t):n.push(s[0])}),e.singlePoints=n,e.graphPath=i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color]],n=e.lineWidth,s=e.dashStyle,r=this.getGraphPath(),o=e.negativeColor;o&&i.push(["graphNeg",o]),ee(i,function(i,o){var a=i[0],l=t[a];l?(he(l),l.animate({d:r})):n&&r.length&&(l={stroke:i[1],"stroke-width":n,zIndex:1},s&&(l.dashstyle=s),t[a]=t.chart.renderer.path(r).attr(l).add(t.group).shadow(!o&&e.shadow))})},clipNeg:function(){var t,e=this.options,i=this.chart,n=i.renderer,s=e.negativeColor,r=this.posClip,o=this.negClip;t=i.chartWidth;var a=i.chartHeight,l=ft(t,a);s&&this.graph&&(s=pt(this.yAxis.len-this.yAxis.translate(e.threshold||0)),e={x:0,y:0,width:l,height:s},l={x:0,y:s,width:l,height:l-s},i.inverted&&n.isVML&&(e={x:i.plotWidth-s-i.plotLeft,y:0,width:t,height:a},l={x:s+i.plotLeft-t,y:0,width:i.plotLeft+s,height:t}),this.yAxis.reversed?(i=l,t=e):(i=e,t=l),r?(r.animate(i),o.animate(t)):(this.posClip=r=n.clipRect(i),this.graph.clip(r),this.negClip=o=n.clipRect(t),this.graphNeg.clip(o),this.area&&(this.area.clip(r),this.areaNeg.clip(o))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};ee(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;re(i,"resize",t),re(e,"destroy",function(){oe(i,"resize",t)}),t(),e.invertGroups=t},plotGroup:function(t,e,i,n,s){var r=this[t],o=!r,a=this.chart,l=this.xAxis,c=this.yAxis;return o&&(this[t]=r=a.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(s)),r[o?"attr":"animate"]({translateX:l?l.left:a.plotLeft,translateY:c?c.top:a.plotTop,scaleX:1,scaleY:1}),r},render:function(){var t,e=this.chart,i=this.options,n=i.animation&&!!this.animate&&e.renderer.isSVG,s=this.visible?"visible":"hidden",r=i.zIndex,o=this.hasRendered,a=e.seriesGroup;t=this.plotGroup("group","series",s,r,a),this.markerGroup=this.plotGroup("markerGroup","markers",s,r,a),n&&this.animate(!0),this.getAttribs(),t.inverted=e.inverted,this.drawGraph&&(this.drawGraph(),this.clipNeg()),this.drawDataLabels(),this.drawPoints(),this.options.enableMouseTracking!==!1&&this.drawTracker(),e.inverted&&this.invertGroups(),i.clip!==!1&&!this.sharedClipKey&&!o&&t.clip(e.clipRect),n?this.animate():o||this.afterAnimate(),this.isDirty=this.isDirtyData=!1,this.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirtyData,i=this.group,n=this.xAxis,s=this.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:p(n&&n.left,t.plotLeft),translateY:p(s&&s.top,t.plotTop)})),this.translate(),this.setTooltipPoints(!0),this.render(),e&&ae(this,"updatedData")},setState:function(t){var e=this.options,i=this.graph,n=this.graphNeg,s=e.states,e=e.lineWidth,t=t||"";this.state!==t&&(this.state=t,s[t]&&s[t].enabled===!1||(t&&(e=s[t].lineWidth||e+1),i&&!i.dashstyle&&(t={"stroke-width":e},i.attr(t),n&&n.attr(t))))},setVisible:function(t,e){var i,n=this,s=n.chart,r=n.legendItem,o=s.options.chart.ignoreHiddenSeries,a=n.visible;i=(n.visible=t=n.userOptions.visible=t===$?!a:t)?"show":"hide",ee(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),s.hoverSeries===n&&n.onMouseOut(),r&&s.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&ee(s.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),ee(n.linkedSeries,function(e){e.setVisible(t,!1)}),o&&(s.isDirtyBox=!0),e!==!1&&s.redraw(),ae(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=t===$?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),ae(this,t?"select":"unselect")},drawTracker:function(){var t,e=this,i=e.options,n=i.trackByArea,s=[].concat(n?e.areaPath:e.graphPath),r=s.length,o=e.chart,a=o.pointer,l=o.renderer,c=o.options.tooltip.snap,h=e.tracker,u=i.cursor,u=u&&{cursor:u},d=e.singlePoints,p=function(){o.hoverSeries!==e&&e.onMouseOver()};if(r&&!n)for(t=r+1;t--;)"M"===s[t]&&s.splice(t+1,0,s[t+1]-c,s[t+2],"L"),(t&&"M"===s[t]||t===r)&&s.splice(t,0,"L",s[t-2]+c,s[t-1]);for(t=0;t<d.length;t++)r=d[t],s.push("M",r.plotX-c,r.plotY,"L",r.plotX+c,r.plotY);h?h.attr({d:s}):(e.tracker=h=l.path(s).attr({"class":"highcharts-tracker","stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:jt,fill:n?jt:Ht,"stroke-width":i.lineWidth+(n?0:2*c),zIndex:2}).addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(t){a.onTrackerMouseOut(t)}).css(u).add(e.markerGroup),Dt&&h.on("touchstart",p))}},Zt=m(ye),Xt.line=Zt,ue.area=e(Jt,{threshold:0}),Zt=m(ye,{type:"area",getSegments:function(){var t,e,i,n,s=[],r=[],o=[],a=this.xAxis,l=this.yAxis,c=l.stacks[this.stackKey],h={},u=this.points;if(this.options.stacking&&!this.cropped){for(i=0;i<u.length;i++)h[u[i].x]=u[i];for(n in c)o.push(+n);o.sort(function(t,e){return t-e}),ee(o,function(i){h[i]?r.push(h[i]):(t=a.translate(i),e=l.toPixels(c[i].cum,!0),r.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:Rt}))}),r.length&&s.push(r)}else ye.prototype.getSegments.call(this),s=this.segments;this.segments=s},getSegmentPath:function(t){var e,i=ye.prototype.getSegmentPath.call(this,t),n=[].concat(i),s=this.options;if(3===i.length&&n.push("L",i[1],i[2]),s.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)e<t.length-1&&s.step&&n.push(t[e+1].plotX,t[e].yBottom),n.push(t[e].plotX,t[e].yBottom);else this.closeSegment(n,t);return this.areaPath=this.areaPath.concat(n),i},closeSegment:function(t,e){var i=this.yAxis.getThreshold(this.options.threshold);t.push("L",e[e.length-1].plotX,i,"L",e[0].plotX,i)},drawGraph:function(){this.areaPath=[],ye.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=[["area",this.color,i.fillColor]];i.negativeColor&&n.push(["areaNeg",i.negativeColor,i.negativeFillColor]),ee(n,function(n){var s=n[0],r=t[s];r?r.animate({d:e}):t[s]=t.chart.renderer.path(e).attr({fill:p(n[2],de(n[1]).setOpacity(i.fillOpacity||.75).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:function(t,e){e.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,t.options.symbolWidth,12,2).attr({zIndex:3}).add(e.legendGroup)}}),Xt.area=Zt,ue.spline=e(Jt),fe=m(ye,{type:"spline",getPointSpline:function(t,e,i){var n,s,r,o,a=e.plotX,l=e.plotY,c=t[i-1],h=t[i+1];if(c&&h){t=c.plotY,r=h.plotX;var u,h=h.plotY;n=(1.5*a+c.plotX)/2.5,s=(1.5*l+t)/2.5,r=(1.5*a+r)/2.5,o=(1.5*l+h)/2.5,u=(o-s)*(r-a)/(r-n)+l-o,s+=u,o+=u,s>t&&s>l?(s=ft(t,l),o=2*l-s):s<t&&s<l&&(s=gt(t,l),o=2*l-s),o>h&&o>l?(o=ft(h,l),s=2*l-o):o<h&&o<l&&(o=gt(h,l),s=2*l-o),e.rightContX=r,e.rightContY=o}return i?(e=["C",c.rightContX||c.plotX,c.rightContY||c.plotY,n||a,s||l,a,l],c.rightContX=c.rightContY=null):e=["M",a,l],e}}),Xt.spline=fe,ue.areaspline=e(ue.area),ge=Zt.prototype,fe=m(fe,{type:"areaspline",closedStacks:!0,getSegmentPath:ge.getSegmentPath,closeSegment:ge.closeSegment,drawGraph:ge.drawGraph}),Xt.areaspline=fe,ue.column=e(Jt,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0}),fe=m(ye,{type:"column",tooltipOutsidePlot:!0,requireSorting:!1,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},trackerGroups:["group","dataLabelsGroup"],init:function(){ye.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&ee(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,i=this,n=i.chart,s=i.options,r=this.xAxis,o=r.reversed,a={},l=0;s.grouping===!1?l=1:ee(n.series,function(n){var s=n.options;n.type===i.type&&n.visible&&i.options.group===s.group&&(s.stacking?(t=n.stackKey,a[t]===$&&(a[t]=l++),e=a[t]):s.grouping!==!1&&(e=l++),n.columnIndex=e)});var n=gt(mt(r.transA)*(r.ordinalSlope||s.pointRange||r.closestPointRange||1),r.len),r=n*s.groupPadding,c=(n-2*r)/l,u=s.pointWidth,s=h(u)?(c-u)/2:c*s.pointPadding,u=p(u,c-2*s);return i.columnMetrics={width:u,offset:s+(r+((o?l-(i.columnIndex||0):i.columnIndex)||0)*c-n/2)*(o?-1:1)}},translate:function(){var t=this,e=t.chart,i=t.options,n=i.stacking,s=i.borderWidth,r=t.yAxis,o=t.translatedThreshold=r.getThreshold(i.threshold),a=p(i.minPointLength,5),i=t.getColumnMetrics(),l=i.width,c=pt(ft(l,1+2*s)),h=i.offset;ye.prototype.translate.apply(t),ee(t.points,function(i){var u=gt(ft(-999,i.plotY),r.len+999),d=p(i.yBottom,o),f=i.plotX+h,g=pt(gt(u,d)),u=pt(ft(u,d)-g),m=r.stacks[(i.y<0?"-":"")+t.stackKey];n&&t.visible&&m&&m[i.x]&&m[i.x].setOffset(h,c),mt(u)<a&&a&&(u=a,g=mt(g-o)>a?d-a:o-(r.translate(i.y,0,1,0,1)<=o?a:0)),i.barX=f,i.pointWidth=l,i.shapeType="rect",i.shapeArgs=i=e.renderer.Element.prototype.crisp.call(0,s,f,g,c,u),s%2&&(i.y-=1,i.height+=1)})},getSymbol:Rt,drawLegendSymbol:Zt.prototype.drawLegendSymbol,drawGraph:Rt,drawPoints:function(){var t,i=this,n=i.options,s=i.chart.renderer;ee(i.points,function(r){var o=r.plotY,a=r.graphic;o===$||isNaN(o)||null===r.y?a&&(r.graphic=a.destroy()):(t=r.shapeArgs,a?(he(a),a.animate(e(t))):r.graphic=s[r.shapeType](t).attr(r.pointAttr[r.selected?"select":""]).add(i.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius))})},drawTracker:function(){var t=this,e=t.chart.pointer,i=t.options.cursor,n=i&&{cursor:i},s=function(e){var i,n=e.target;for(t.onMouseOver();n&&!i;)i=n.point,n=n.parentNode;i!==$&&i.onMouseOver(e)};ee(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking?t._hasTracking=!0:ee(t.trackerGroups,function(i){t[i]&&(t[i].addClass("highcharts-tracker").on("mouseover",s).on("mouseout",function(t){e.onTrackerMouseOut(t)}).css(n),Dt)&&t[i].on("touchstart",s)})},alignDataLabel:function(t,i,n,s,r){var o=this.chart,a=o.inverted,l=t.dlBox||t.shapeArgs,c=t.below||t.plotY>p(this.translatedThreshold,o.plotSizeY),h=p(n.inside,!!this.options.stacking);l&&(s=e(l),a&&(s={x:o.plotWidth-s.y-s.height,y:o.plotHeight-s.x-s.width,width:s.height,height:s.width}),!h)&&(a?(s.x+=c?0:s.width,s.width=0):(s.y+=c?s.height:0,s.height=0)),n.align=p(n.align,!a||h?"center":c?"right":"left"),n.verticalAlign=p(n.verticalAlign,a||h?"middle":c?"top":"bottom"),ye.prototype.alignDataLabel.call(this,t,i,n,s,r)},animate:function(t){var e=this.yAxis,i=this.options,n=this.chart.inverted,s={};At&&(t?(s.scaleY=.001,t=gt(e.pos+e.len,ft(e.pos,e.toPixels(i.threshold))),n?s.translateX=t-e.len:s.translateY=t,this.group.attr(s)):(s.scaleY=1,s[n?"translateX":"translateY"]=e.pos,this.group.animate(s,this.options.animation),this.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&ee(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),ye.prototype.remove.apply(t,arguments)}}),Xt.column=fe,ue.bar=e(ue.column),ge=m(fe,{type:"bar",inverted:!0}),Xt.bar=ge,ue.scatter=e(Jt,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1}),ge=m(ye,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],drawTracker:fe.prototype.drawTracker,setTooltipPoints:Rt}),Xt.scatter=ge,ue.pie=e(Jt,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),Jt={type:"pie",isCartesian:!1,pointClass:m(ve,{init:function(){ve.prototype.init.apply(this,arguments);var e,i=this;return i.y<0&&(i.y=null),t(i,{visible:i.visible!==!1,name:p(i.name,"Slice")}),e=function(){i.slice()},re(i,"select",e),re(i,"unselect",e),i},setVisible:function(t){var e,i=this,n=i.series,s=n.chart;i.visible=i.options.visible=t=t===$?!i.visible:t,n.options.data[te(i,n.data)]=i.options,e=t?"show":"hide",ee(["graphic","dataLabel","connector","shadowGroup"],function(t){i[t]&&i[t][e]()}),i.legendItem&&s.legend.colorizeItem(i,t),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,s.redraw())},slice:function(t,e,i){var n=this.series;O(i,n.chart),p(e,!0),this.sliced=this.options.sliced=t=h(t)?t:!this.sliced,n.options.data[te(this,n.data)]=this.options,t=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(t),this.shadowGroup&&this.shadowGroup.animate(t)}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:Rt,animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(ee(i,function(t){var i=t.graphic,t=t.shapeArgs;i&&(i.attr({r:e.center[3]/2,start:n,end:n}),i.animate({r:t.r,start:t.start,end:t.end},e.options.animation))}),e.animate=null)},setData:function(t,e){ye.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),p(e,!0)&&this.chart.redraw()},getCenter:function(){var t,e,n=this.options,s=this.chart,r=2*(n.slicedOffset||0),o=s.plotWidth-2*r,a=s.plotHeight-2*r,s=n.center,n=[p(s[0],"50%"),p(s[1],"50%"),n.size||"100%",n.innerSize||0],l=gt(o,a);return se(n,function(n,s){return e=/%$/.test(n),t=s<2||2===s&&e,(e?[o,a,l,l][s]*i(n)/100:n)+(t?r:0)})},translate:function(t){this.generatePoints();var e,i,n,s,r,o=0,a=0,l=this.options,c=l.slicedOffset,h=c+l.borderWidth,u=this.startAngleRad=bt/180*((l.startAngle||0)%360-90),d=this.points,p=2*bt,f=l.dataLabels.distance,g=l.ignoreHiddenPoint,m=d.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,i){return n=ht.asin((e-t[1])/(t[2]/2+f)),t[0]+(i?-1:1)*vt(n)*(t[2]/2+f)},s=0;s<m;s++)r=d[s],o+=g&&!r.visible?0:r.y;for(s=0;s<m;s++)r=d[s],l=o?r.y/o:0,e=ut(1e3*(u+a*p))/1e3,g&&!r.visible||(a+=l),i=ut(1e3*(u+a*p))/1e3,r.shapeType="arc",r.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:e,end:i},n=(i+e)/2,n>.75*p&&(n-=2*bt),r.slicedTranslation={translateX:ut(vt(n)*c),translateY:ut(yt(n)*c)},e=vt(n)*t[2]/2,i=yt(n)*t[2]/2,r.tooltipPos=[t[0]+.7*e,t[1]+.7*i],r.half=n<p/4?0:1,r.angle=n,h=gt(h,f/2),r.labelPos=[t[0]+e+vt(n)*f,t[1]+i+yt(n)*f,t[0]+e+vt(n)*h,t[1]+i+yt(n)*h,t[0]+e,t[1]+i,f<0?"center":r.half?"right":"left",n],r.percentage=100*l,r.total=o;this.setTooltipPoints()},drawGraph:null,drawPoints:function(){var e,i,n,s,r=this,o=r.chart.renderer,a=r.options.shadow;a&&!r.shadowGroup&&(r.shadowGroup=o.g("shadow").add(r.group)),ee(r.points,function(l){i=l.graphic,s=l.shapeArgs,n=l.shadowGroup,a&&!n&&(n=l.shadowGroup=o.g("shadow").add(r.shadowGroup)),e=l.sliced?l.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(e),i?i.animate(t(s,e)):l.graphic=i=o.arc(s).setRadialReference(r.center).attr(l.pointAttr[l.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(e).add(r.group).shadow(a,n),l.visible===!1&&l.setVisible(!1)})},drawDataLabels:function(){var t,e,i,n,s,r,o,a,l,c,h,u,d=this,f=d.data,g=d.chart,m=d.options.dataLabels,v=p(m.connectorPadding,10),y=p(m.connectorWidth,1),b=g.plotWidth,g=g.plotHeight,x=p(m.softConnector,!0),w=m.distance,_=d.center,k=_[2]/2,C=_[1],S=w>0,E=[[],[]],M=[0,0,0,0],A=function(t,e){
return e.y-t.y},P=function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})};if(m.enabled||d._hasPointLabels){for(ye.prototype.drawDataLabels.apply(d),ee(f,function(t){t.dataLabel&&E[t.half].push(t)}),h=0;!o&&f[h];)o=f[h]&&f[h].dataLabel&&(f[h].dataLabel.getBBox().height||21),h++;for(h=2;h--;){var O,f=[],D=[],L=E[h],I=L.length;if(P(L,h-.5),w>0){for(u=C-k-w;u<=C+k+w;u+=o)f.push(u);if(s=f.length,I>s){for(t=[].concat(L),t.sort(A),u=I;u--;)t[u].rank=u;for(u=I;u--;)L[u].rank>=s&&L.splice(u,1);I=L.length}for(u=0;u<I;u++){t=L[u],r=t.labelPos,t=9999;var R,N;for(N=0;N<s;N++)R=mt(f[N]-r[1]),R<t&&(t=R,O=N);if(O<u&&null!==f[u])O=u;else for(s<I-u+O&&null!==f[u]&&(O=s-I+u);null===f[O];)O++;D.push({i:O,y:f[O]}),f[O]=null}D.sort(A)}for(u=0;u<I;u++)t=L[u],r=t.labelPos,n=t.dataLabel,c=t.visible===!1?"hidden":"visible",t=r[1],w>0?(s=D.pop(),O=s.i,l=s.y,(t>l&&null!==f[O+1]||t<l&&null!==f[O-1])&&(l=t)):l=t,a=m.justify?_[0]+(h?-1:1)*(k+w):d.getX(0===O||O===f.length-1?t:l,h),n._attr={visibility:c,align:r[6]},n._pos={x:a+m.x+({left:v,right:-v}[r[6]]||0),y:l+m.y-10},n.connX=a,n.connY=l,null===this.options.size&&(s=n.width,a-s<v?M[3]=ft(ut(s-a+v),M[3]):a+s>b-v&&(M[1]=ft(ut(a+s-b+v),M[1])),l-o/2<0?M[0]=ft(ut(-l+o/2),M[0]):l+o/2>g&&(M[2]=ft(ut(l+o/2-g),M[2])))}(0===T(M)||this.verifyDataLabelOverflow(M))&&(this.placeDataLabels(),S&&y&&ee(this.points,function(t){e=t.connector,r=t.labelPos,(n=t.dataLabel)&&n._pos?(a=n.connX,l=n.connY,i=x?["M",a+("left"===r[6]?5:-5),l,"C",a,l,2*r[2]-r[4],2*r[3]-r[5],r[2],r[3],"L",r[4],r[5]]:["M",a+("left"===r[6]?5:-5),l,"L",r[2],r[3],"L",r[4],r[5]],e?(e.animate({d:i}),e.attr("visibility",c)):t.connector=e=d.chart.renderer.path(i).attr({"stroke-width":y,stroke:m.connectorColor||t.color||"#606060",visibility:c}).add(d.group)):e&&(t.connector=e.destroy())}))}},verifyDataLabelOverflow:function(t){var e,i=this.center,n=this.options,s=n.center,r=n=n.minSize||80;return null!==s[0]?r=ft(i[2]-ft(t[1],t[3]),n):(r=ft(i[2]-t[1]-t[3],n),i[0]+=(t[3]-t[1])/2),null!==s[1]?r=ft(gt(r,i[2]-ft(t[0],t[2])),n):(r=ft(gt(r,i[2]-t[0]-t[2]),n),i[1]+=(t[0]-t[2])/2),r<i[2]?(i[2]=r,this.translate(i),ee(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels()):e=!0,e},placeDataLabels:function(){ee(this.points,function(t){var e,t=t.dataLabel;t&&((e=t._pos)?(t.attr(t._attr),t[t.moved?"animate":"attr"](e),t.moved=!0):t&&t.attr({y:-999}))})},alignDataLabel:Rt,drawTracker:fe.prototype.drawTracker,drawLegendSymbol:Zt.prototype.drawLegendSymbol,getSymbol:Rt},Jt=m(ye,Jt),Xt.pie=Jt,t(Highcharts,{Axis:B,Chart:F,Color:de,Legend:V,Pointer:j,Point:ve,Tick:I,Tooltip:H,Renderer:z,Series:ye,SVGElement:L,SVGRenderer:pe,arrayMin:S,arrayMax:T,charts:Nt,dateFormat:G,format:b,pathAnim:q,getOptions:function(){return W},hasBidiBug:Pt,isTouchDevice:Et,numberFormat:v,seriesTypes:Xt,setOptions:function(t){return W=e(W,t),D(),W},addEvent:re,removeEvent:oe,createElement:g,discardElement:M,css:f,each:ee,extend:t,map:se,merge:e,pick:p,splat:d,extendClass:m,pInt:i,wrap:function(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}},svg:At,canvas:Ot,vml:!At&&!Ot,product:"Highcharts",version:"3.0.1"})}(),define("highcharts",function(){}),define("components/bar-chart",["highcharts"],function(){"use strict";var t=function(t,e){e=e||{},e.mini=!!e.mini||!1,e.yAxisTitle=e.yAxisTitle||"",e.barColor=e.barColor||"#7cb9e6",e.fontSize=e.fontSize||(e.mini?"12px":"16px"),e.duration=e.duration||1e3,this.maxBars=e.maxBars||(e.mini?6:24),this.chartOptions={chart:{backgroundColor:"none",spacingTop:15,spacingLeft:e.mini?0:15,spacingRight:e.mini?26:82,spacingBottom:e.mini?5:10,renderTo:t[0]},credits:{enabled:!1},exporting:{enabled:!1},title:{text:""},tooltip:{enabled:!1},xAxis:{type:"category",labels:{style:{fontSize:e.fontSize},y:e.mini?15:25,formatter:function(){return e.mini?this.value.substring(0,1):this.value.substring(0,3)}}},yAxis:{min:0,title:{enabled:!!e.yAxisTitle,text:e.yAxisTitle,style:{fontSize:"18px",color:"#666",fontWeight:"normal"},x:e.mini?0:-5},labels:{formatter:function(){return"$"+this.value},style:{fontSize:e.fontSize}}},legend:{enabled:!1},series:[{type:"column",color:e.barColor,stroke:"none",tooltip:{enabled:!1},states:{hover:{enabled:!1}},borderColor:"none",dataLabels:{enabled:!1,color:"#4d4c49",formatter:function(){return"$"+this.y},align:"center",x:0,y:-2,style:{fontSize:e.fontSize,fontWeight:"600"}},animation:{duration:e.duration}}]}};return t.prototype.draw=function(t){this.clear();var e=t.length;e>this.maxBars&&(t=t.slice(e-this.maxBars),e=this.maxBars);for(var i=0,n=0;n<e;n++)i+=t[n][1]/e;this.chartOptions.series[0].data=t,this.chart=new Highcharts.Chart(this.chartOptions)},t.prototype.clear=function(){this.chart&&this.chart.destroy()},t}),define("txt!templates/components/activity-offer.html",[],function(){return'<div class="product-col col-xs-7 col-sm-6">\n  <div class="offer">\n    <img class="offer-image" src="{{ imageUrl }}" />\n    <div class="summary">\n        <h4 class="offer-title">{{brand}}</h4>\n        <p class="offer-subtitle">{{formatOfferValueText valueText }} on {{brand}}</p>\n    </div>\n  </div>\n</div>\n\n<div class="status-col col-xs-3 col-sm-3">\n  <div class="status">\n    {{#if redeemedDate}}\n        <i class="inmico inm-ico_redeem"></i> Redeemed\n    {{else}}\n        <i class="inmico inm-ico_expire"></i> Expired\n    {{/if}}\n  </div>\n</div>\n\n<div class="savings-col col-xs-2 col-sm-3">\n    <div class="savings">${{formatCurrency value}}</div>\n</div>\n'}),define("components/activity-offer",["marionette","controls/vent","txt!templates/components/activity-offer.html"],function(t,e,i){"use strict";return t.ItemView.extend({className:"activity-offer clearfix",template:i,onRender:function(){this.model.get("redeemedDate")?this.$el.removeClass("expired"):this.$el.addClass("expired")}})}),define("txt!templates/savings.html",[],function(){return'{{#if hasSavings}}\n    <section class="summary section col-xs-12 col-sm-6">\n        <h1 class="title">\n            <i class="icon-ruler"></i>Measure\n        </h1>\n        <div class="wrap">\n            <div class="datarow {{saverType}}">\n                <section class="col-xs-12 col-sm-6 text-center lifetime-savings">\n                  <div class="v-center">\n                    <i class="fa fa-tag"></i><br />\n                    <span class="label">Lifetime Savings</span>\n                    <div class="value">\n                        ${{formatCurrency lifetimeSavings}}</div>\n                  </div>\n                </section>\n\n                <section class="col-xs-12 col-sm-6 text-center saver-rank">\n                  <div class="v-center">\n                    <i class="fa fa-star"></i><br />\n                    <span class="label">Saver Rank</span>\n                    <div class="value">\n                        {{#compare saverType \'bottom\'}}\n                            <span class="pre">\n                                bottom</span>{{inverse rank}}%\n                        {{else}}\n                            <span class="pre">\n                                top</span>{{rank}}%\n                        {{/compare}}\n                    </div>\n                  </div>\n                </section>\n            </div>\n        </div>\n    </section>\n\n    {{#if recommended.missed}}\n        <section class="optimize section col-xs-12 col-sm-6">\n            <h1 class="title">\n                <i class="fa fa-dashboard"></i>Optimize\n            </h1>\n            <div class="wrap">\n                <div class="datarow">\n                    <div class="missed optimize-col text-center {{recommended.missedType}}">\n                        <div class="pie-chart" id="missed-chart"></div>\n                        <div class="pie-label">\n                            <h2 class="value">{{recommended.missed}}%</h2>\n                            <span class="label">Missed</span>\n                        </div>\n                        <h4>You can\'t save if you don\'t select!</h4>\n                        <p>{{recommended.missed}}% of other users are selecting more offers than you.</p>\n                        <a class="btn btn-primary" href="#/">\n                            <i class="fa fa-tags"/>View Digital Coupons\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </section>\n    {{else if recommended.expired}}\n        <section class="optimize section col-xs-12 col-sm-6">\n            <h1 class="title">\n                <i class="fa fa-dashboard"></i>Optimize\n            </h1>\n            <div class="wrap">\n                <div class="datarow">\n                    <div class="expired optimize-col text-center {{recommended.expiredType}}">\n                        <div class="pie-chart" id="expired-chart"></div>\n                        <div class="pie-label">\n                            <h2 class="value">{{recommended.expired}}%</h2>\n                            <span class="label">Expired</span>\n                        </div>\n                        <h4>Remember to use your loyalty card!</h4>\n                        <p>Your coupons expire more than\n                            {{recommended.expired}}% of other users.</p>\n                        <a class="btn btn-primary" href="#/wallet">\n                            <i class="fa fa-credit-card"></i>What\'s on my card?\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </section>\n    {{/if}}\n\n    {{#if hasMonthlySavings}}\n        <section class="monthly-savings section col-xs-12">\n            <h1 class="title">\n                <i class="fa fa-line-chart"></i>Track\n            </h1>\n            <div class="wrap">\n                <div class="bar-chart" id="savings-chart"></div>\n            </div>\n        </section>\n    {{/if}}\n\n    <div class="last-updated">\n        <i class="fa fa-refresh"></i>\n        Last updated\n        {{formatDate updatedDate \'MMMM DD\'}}\n    </div>\n{{else}}\n    <div class="no-savings-data section col-xs-12">\n        <h3 class="empty-text">You don\'t have any savings yet.  Redeem your digital coupons to see useful savings data here.</h3>\n    </div>\n{{/if}}\n\n<section class="recent-activity col-xs-12">\n    <h3 class="title">Recent Activity</h3>\n    <div class="recent-activity-container"></div>\n</section>\n'}),define("views/savings",["marionette","components/pie-chart","components/bar-chart","components/activity-offer","controls/vent","txt!templates/savings.html","jquery"],function(t,e,i,n,s,r,o){"use strict";var a=1200,l=992,c={BACKGROUND:o("body").css("background-color"),EMPTY:"#e1e1e1",LOW:"#fec01e",MID:"#fc6908",HIGH:"#ac3534"};c.BACKGROUND.indexOf("rgba")>-1&&(c.BACKGROUND="#ffffff");var h=function(t){return t>=80?c.HIGH:t>=65?c.MID:c.LOW},u=function(t,e){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},d=t.ItemView.extend({id:"empty",className:"col-xs-12",template:'<h4 class="empty-text">No recent activity.</h4>'});return t.CompositeView.extend({id:"savings",className:"row",template:r,ui:{missedChart:"#missed-chart",expiredChart:"#expired-chart",savingsChart:"#savings-chart",header:".recent-activity .header"},itemViewContainer:".recent-activity-container",itemView:n,emptyView:d,onShow:function(){var t=this,e=this.model.get("recommended");if(e&&(this.createOptimizeChart(this.ui.missedChart,e.missed),this.createOptimizeChart(this.ui.expiredChart,e.expired)),this.createSavingsChart(this.ui.savingsChart,this.model.getChartData()),!this.collection.length){var i=o(Config.LOADER);this.$itemViewContainer.html(i),this.ui.header.hide(),this.collection.fetch({silent:!0}).done(function(){i.remove(),t.collection.length&&t.ui.header.show(),t._renderChildren()})}o(window).on("resize",function(){(!t.mini&&this.innerWidth<l||t.mini&&this.innerWidth>=l)&&t.createSavingsChart(t.ui.savingsChart,t.model.getChartData())})},onClose:function(){o(window).off("resize")},createOptimizeChart:function(t,i){if(!t||!t.length)return null;var n={colors:[h(i)],bgColor:c.BACKGROUND,emptyColor:c.EMPTY,startAngle:-90,duration:a};return new e(t,1,n).draw([i],100)},createSavingsChart:function(t,e){if(!t||!t.length)return null;this.mini=window.innerWidth<l;var n={duration:a,mini:this.mini};return new i(t,n).draw(e)},appendHtml:function(e,i,n){var s=i.model.get("activityDate");if(s&&(!this.lastActivityDate||!u(s,this.lastActivityDate))){var r=o('<div class="date"><i class="fa fa-calendar"></i>'+Config.formatDate(s,"MMMM Do")+'</div><div class="container-fluid header clearfix"><div class="product-col col-xs-7 col-sm-6">Offer</div><div class="status-col col-xs-3 col-sm-3">Status</div><div class="savings-col col-xs-2 col-sm-3 ">Savings</div></div>'),a=r[0],l=r[1];e.isBuffering?(e.elBuffer.appendChild(a),e.elBuffer.appendChild(l),e._bufferedChildren.push(a),e._bufferedChildren.push(l)):(e.$itemViewContainer.append(a),e.$itemViewContainer.append(l)),this.lastActivityDate=s}t.CompositeView.prototype.appendHtml.call(this,e,i,n)},appendBuffer:function(){t.CompositeView.prototype.appendBuffer.apply(this,arguments)}})}),define("txt!templates/change-password.html",[],function(){return'<form id="changePasswordForm" class="col-xs-12" role="form" method="post" autocomplete="off" novalidate>\n  <fieldset>\n    <div id="result-labels">\n      <div class="error-text">\n        <i class="fa fa-warning"></i>\n        <span></span>\n      </div>\n      <div class="success-text">\n        <i class="fa fa-check-circle"></i>\n        <span></span>\n      </div>\n    </div>\n    <legend>Change Password</legend>\n    <div class="row">\n      <div class="inputs col-sm-6 col-md-5">\n        <div class="form-group">\n          <label class="control-label" for="currentPassword">Current Password</label>\n          <input class="form-control" type="password" id="currentPassword" name="current" required/>\n          <div class="error-text">\n            <i class="fa fa-warning"></i>\n            <span></span>\n          </div>\n        </div>\n        <div class="form-group">\n          <label class="control-label" for="newPassword">New Password</label>\n          <input class="form-control" type="password" id="newPassword" name="updated" data-differ="currentPassword" placeholder="Minimum 8 characters" required/>\n          <div class="error-text">\n            <i class="fa fa-warning"></i>\n            <span></span>\n          </div>\n        </div>\n        <div class="form-group">\n          <label class="control-label" for="confirmPassword">Confirm\n            <span class="hidden-xs">New </span>Password</label>\n          <input class="form-control" type="password" id="confirmPassword" data-match="newPassword" required/>\n          <div class="error-text">\n            <i class="fa fa-warning"></i>\n            <span></span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </fieldset>\n<div class="form-actions">\n  <div>\n    <button class="btn btn-primary btn-lg" id="submit" type="submit" disabled>Submit</button>\n  </div>\n</div>\n</form>\n'}),define("views/change-password",["views/form","txt!templates/change-password.html"],function(t,e){"use strict";return t.extend({id:"change-password",className:"row",template:e,modelFunction:"changePassword",success:"Password changed"})}),define("models/user",["backbone","controls/config","models/auth"],function(t,e,i){"use strict";return t.Model.extend({url:"/user",idType:e.IS_LOYALTY_TYPE_PHONE?"phone":"loyaltyId",isNew:function(){return!0},save:function(e,n){if(n=n||{},n.ignoreFail=!0,n.sendEmpty=!0,n.fieldConstraints=[["firstName","lastName"]],n.toJSON={isSync:!0},n.data=this.changedAttributes(e),this.get(this.idType)!==e[this.idType]){var s=this,r={};return r.username=e[this.idType],i.changeId(r).then(function(){return t.Model.prototype.save.call(s,e,n)})}return t.Model.prototype.save.call(this,e,n)},toJSON:function(i){i=i||{};var n=t.Model.prototype.toJSON.call(this,i);return i.isSync||(n.States=e.States),n}})}),define("models/savings",["backbone","collections/offers"],function(t,e){"use strict";return t.Model.extend({url:"/user/history",defaults:{savingsThisYear:0,savingsLastTwelveMonths:0,lifetimeSavings:0,averageMonthlySavings:0,rank:0,saverType:"",recommended:{},monthlySavings:[],updatedDate:null},parse:function(t){return t.updatedDate=t.updatedDate&&t.updatedDate.iso?new Date(t.updatedDate.iso):null,t.recommended&&t.recommended.expired&&(t.recommended.expiredType=this.getType(t.recommended.expired)),t.recommended&&t.recommended.missed&&(t.recommended.missedType=this.getType(t.recommended.missed)),t},getType:function(t){return t>85?"high":t>60?"mid":"low"},toJSON:function(e){var i=t.Model.prototype.toJSON.call(this,e);return i.hasSavings=this.hasSavings(),i.hasRecommended=!(!i.recommended||!i.recommended.missed&&!i.recommended.expired),i.hasMonthlySavings=!(!i.monthlySavings||!i.monthlySavings.length),i},hasSavings:function(){return!!this.get("lifetimeSavings")},getChartData:function(){var t=[];return _.each(this.get("monthlySavings"),function(e){t.push([Config.MONTHS[e.month-1],e.value/100])}),t}})}),define("collections/recent-activity",["backbone","models/offer","jquery"],function(t,e,i){"use strict";return t.Collection.extend({model:e,url:"/offers",comparator:"activityDate",sort:function(e){return e=e||{},t.Collection.prototype.sort.call(this,{silent:!0}),this.models.reverse(),e.silent||this.trigger("sort",this,e),this},fetch:function(e){return e=e||{},e.data=e.data||{},e.reset=!1,e.remove=!1,e.data.limit=1e3,Config.DEBUG&&(e.url="/redeemedoffers"),e.data.groups=["redeemed","expired"],t.Collection.prototype.fetch.call(this,e)}})}),define("txt!templates/account.html",[],function(){return'<section class="header menu-box">\n  <div id="inMenu">\n    <div class="container-fluid">\n      <div class="menu col-xs-12">\n        <div class="wrapper">\n          <button id="view-coupons" class="btn btn-success view-coupons">\n            <i class="fa fa-angle-left"></i> Browse\n            <span class="hidden-xs"> Digital Coupons</span>\n          </button>\n          <div class="pull-right">\n            <div id="account-nav" class="btn-group dropdown"></div>\n          </div>\n        </div>\n        <div id="to-top"><i class="fa fa-angle-up"></i> Back to Top</div>\n      </div>\n    </div>\n  </div>\n</section>\n\n<section class="container-fluid content">\n\n</section>\n'}),define("txt!templates/mobile/account.html",[],function(){return'<section class="header menu-box">\n  <div id="inMenu">\n    <div class="mobile-menu profile">\n\n      <nav>\n        <ol>\n          <li><button id="menu-button-browse" type="button">\n            <span class="fa fa-angle-left"></span>\n            <span class="text">Browse</span></button>\n          </li>\n          <li><button id="menu-button-profile" type="button"><span class="inmico inm-ico_profile"></span></button></li>\n        </ol>\n      </nav>\n\n      <div class="menu-dropdown-wrapper">\n\n        <aside id="menu-dropdown-profile" class="menu-dropdown profile">\n          <div class="tip"></div>\n\n          <header>\n            <span class="title">My Account</span>\n          </header>\n\n          <ol class="dropdown-items">\n            <li><a href="#account/savings">My Savings<span class="fa fa-angle-right"></span></a></li>\n            <li><a href="#wallet">Coupon Check List<span class="fa fa-angle-right"></span></a></li>\n          </ol>\n        </aside>\n\n      </div>\n\n    </div>\n    <div id="to-top"><i class="fa fa-angle-up"></i> Back to Top</div>\n  </div>\n</section>\n\n<section class="container-fluid content">\n\n</section>\n'}),define("views/account",["marionette","components/account-nav","views/profile","views/savings","views/change-password","models/user","models/savings","collections/recent-activity","models/auth","controls/vent","txt!templates/account.html","txt!templates/mobile/account.html","jquery"],function(t,e,i,n,s,r,o,a,l,c,h,u,d){"use strict";return t.Layout.extend({id:"account",template:h,modelEvents:{"change:currentView":"render"},events:{"click .view-coupons":"onViewCouponsClick","click #to-top":"backToTop","click .mobile-menu li > button":"onMenuDropdownClick","click #menu-button-browse":"onViewCouponsClick","click #menu-dropdown-profile a.logout":"mobileOnLogoutClick"},regions:{accountNav:"#account-nav",content:"section.content"},ui:{menu:"#inMenu"},initialize:function(){Config.isMobileCSS()&&(this.template=u),this.accountNavView=new e,this.user=new r,this.savings=new o,this.recentActivity=new a,this.profileView=new i({model:this.user}),this.savingsView=new n({model:this.savings,collection:this.recentActivity}),this.changePasswordView=new s({model:l}),this.initialized=!1},onRender:function(){if(this.initialized){this.accountNav.show(this.accountNavView);var t=this,e=this.ui.menu.offset(),i=this.ui.menu.affix({offset:{top:e.top}});i.css("width",d("#inWrap").css("width")),i.on("affix.bs.affix",function(){d(this).css("width",d("#inWrap").css("width"))}),i.on("affixed-top.bs.affix",function(){d(this).css("width","inherit")}),d(window).on("resize",function(){t.$el.css("width",d("#inWrap").css("width"))});var n=this.model.subViews,s=this.model.get("currentView");switch(s){case n.PROFILE:this.content.show(this.profileView);break;case n.SAVINGS:this.content.show(this.savingsView);break;case n.CHANGE_PASSWORD:this.content.show(this.changePasswordView)}}},onShow:function(){var t=this;d(this.content.el).html(d(Config.LOADER)),d.when(this.user.fetch(),this.savings.fetch(),this.recentActivity.fetch()).done(function(){t.initialized=!0,t.render(),t.content.$el.hide().fadeIn()})},onMenuDropdownClick:function(t){var e=d(t.target).closest("button");e.toggleClass("active").parent().siblings().find("button").removeClass("active"),d("#".concat(e.attr("id").replace("button","dropdown"))).toggleClass("open").siblings().removeClass("open")},mobileOnLogoutClick:function(t){l.reset(),c.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN)},onClose:function(){this.initialized=!1,d(this.ui.menu).off(".affix").removeData("bs.affix")},backToTop:function(){d("body,html").animate({scrollTop:0},800)},onViewCouponsClick:function(){c.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)}})}),define("models/account",["backbone"],function(t){"use strict";var e={PROFILE:"profile",SAVINGS:"savings",CHANGE_PASSWORD:"change-password"};return t.Model.extend({defaults:{currentView:e.PROFILE},subViews:e})}),define("controls/controller",["views/home","views/feature","views/login","views/register","views/forgot-password","views/reset-password","views/wallet","views/basket-history","views/account","models/account","models/auth","controls/vent","jquery","underscore"],function(t,e,i,n,s,r,o,a,l,c,h,u,d,p){"use strict";var f=function(t){this.currentView=null,this.content=t};return p.extend(f.prototype,{showDefault:function(t){Config.ENABLE_DEFAULT_ROUTE&&(console.log('Unknown Path: "'+t+'". Redirecting to Home View.'),u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME))},showHome:function(e){return e&&!h.isAuthenticated()?(d.jStorage.set("dest",Config.Paths.CATEGORY+"/"+e),void u.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN)):void this.content.show(new t({category:e}))},showTargeted:function(e,i){if(e=e||!0,!h.isAuthenticated()){var n=Config.Paths.TARGET.concat(p.isBoolean(e)?"":"/"+e);return d.jStorage.set("dest",n),void u.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN)}Config.TARGETED_OFFERS?this.content.show(new t({targeted:e})):u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)},showFeature:function(t){Config.ENABLE_FEATURES&&t?Config.featuredData().then(function(){Config.FEATURE_DATA&&Config.FEATURE_DATA[t]?this.content.show(new e({featureId:t})):u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)}.bind(this),function(){u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)}):u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)},showAuthenticatedFeature:function(t,e,i){var n={};e&&e.length>1&&h.tokenLogin(e),i&&i.length>1&&(n=Config.getQueryStringParameters(i)),u.trigger(Config.Events.NAVIGATE,Config.Paths.FEATURE+"/"+t)},showWallet:function(){return h.isAuthenticated()?void this.content.show(new o):(d.jStorage.set("dest",Config.Paths.WALLET),void u.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN))},showBasket:function(){return h.isAuthenticated()?void this.content.show(new a):(d.jStorage.set("dest",Config.Paths.BASKET),void u.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN))},showAccount:function(t){if(!h.isAuthenticated())return d.jStorage.set("dest",Config.Paths.ACCOUNT+"/"+t),void u.trigger(Config.Events.NAVIGATE,Config.Paths.LOGIN);var e=this.content.currentView;e instanceof l?e.model.set("currentView",t):this.content.show(new l({model:new c({currentView:t})}))},showLogin:function(t){return h.isAuthenticated()&&!t?void u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME):Config.SSO_ENABLE&&!t?void u.trigger("SSORedirect",Config.SSO_Paths.SSO_LOGIN):t&&t.length>1?(h.tokenLogin(t),void u.trigger(Config.Events.NAVIGATE,d.jStorage.get("dest",Config.Paths.HOME))):void this.content.show(new i)},showRegister:function(){return h.isAuthenticated()?void u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME):Config.SSO_ENABLE?void u.trigger("SSORedirect",Config.SSO_Paths.SSO_REGISTER):void this.content.show(new n)},showForgotPassword:function(){return h.isAuthenticated()?void u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME):Config.SSO_ENABLE?void u.trigger("SSORedirect",Config.SSO_Paths.SSO_LOGIN):void this.content.show(new s)},showResetPassword:function(t){return h.isAuthenticated()&&h.reset(),Config.SSO_ENABLE?void u.trigger("SSORedirect",Config.SSO_Paths.SSO_LOGIN):void this.content.show(new r({token:t}))},doLogout:function(){h.isAuthenticated()&&h.reset(),Config.SSO_ENABLE&&Config.SSO_Paths.SSO_LOGOUT?u.trigger("SSORedirect",Config.SSO_Paths.SSO_LOGOUT):u.trigger(Config.Events.NAVIGATE,Config.Paths.HOME)},reloadCurrentView:function(){var t=this.content.currentView;if(t instanceof l){var e=t.model.get("currentView");t.model.unset("currentView"),t.model.set({currentView:e})}else this.content.close(),this.content.show(t)}}),f}),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!s&&r.toggle&&"show"==e&&(e=!e),s||n.data("bs.collapse",s=new i(this,r)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.1.1",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var s=n.data("bs.collapse");if(s&&s.transitioning)return;e.call(n,"hide"),s||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var o=function(e){return e&&e.target!=this.$element[0]?void this.$element.one(t.support.transition.end,t.proxy(o,this)):(this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,void this.$element.off(t.support.transition.end+".bs.collapse").trigger("shown.bs.collapse"))};if(!t.support.transition)return o.call(this);var a=t.camelCase(["scroll",r].join("-"));this.$element.on(t.support.transition.end+".bs.collapse",t.proxy(o,this)).emulateTransitionEnd(350)[r](this.$element[0][a])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(e){return e&&e.target!=this.$element[0]?void this.$element.one(t.support.transition.end,t.proxy(n,this)):(this.transitioning=0,void this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse"))};return t.support.transition?void this.$element[i](0).one(t.support.transition.end,t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,s=t(this),r=s.attr("data-target")||i.preventDefault()||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=t(r),a=o.data("bs.collapse"),l=a?"toggle":s.data(),c=s.attr("data-parent"),h=c&&t(c);a&&a.transitioning||(h&&h.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(s).addClass("collapsed"),s[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(o,l)})}(jQuery),define("bootstrap/collapse",["jquery","bootstrap/transition"],function(){}),+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),r=s.data("bs.modal"),o=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);r||s.data("bs.modal",r=new i(this,o)),"string"==typeof e?r[e](n):o.show&&r.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.1.1",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one(t.support.transition.end,function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){
this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,r).emulateTransitionEnd(150):r()}else e&&e()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),r=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},r.data(),n.data());n.is("a")&&i.preventDefault(),e.call(r,o,this),r.one("hide.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})})}(jQuery),define("bootstrap/modal",["jquery","bootstrap/transition"],function(){}),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(r).each(function(){var n=i(t(this)),s={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",s))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var s=".dropdown-backdrop",r='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.1.1",o.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var r=i(s),o=r.hasClass("open");if(e(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;s.trigger("focus"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},o.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),o=s.hasClass("open");if(!o||o&&27==e.keyCode)return 27==e.which&&s.find(r).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",l=s.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(l.filter(":focus"));38==e.keyCode&&c>0&&c--,40==e.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r+', [role="menu"], [role="listbox"]',o.prototype.keydown)}(jQuery),define("bootstrap/dropdown",["jquery","bootstrap/transition"],function(){}),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),o="string"==typeof e?e:r.slide;s||n.data("bs.carousel",s=new i(this,r)),"number"==typeof e?s.to(e):o?s[o]():r.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};i.VERSION="3.1.1",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(".item"),this.$items.index(this.$active)},i.prototype.to=function(e){var i=this,n=this.getActiveIndex();if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,i){var n=this.$element.find(".item.active"),s=i||n[e](),r=this.interval,o="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[a]()}if(s.hasClass("active"))return this.sliding=!1;var c=s[0],h=t.Event("slide.bs.carousel",{relatedTarget:c,direction:o});if(this.$element.trigger(h),!h.isDefaultPrevented()){this.sliding=!0,r&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")}));var u=t.Event("slid.bs.carousel",{relatedTarget:c,direction:o});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(o),s.addClass(o),n.one(t.support.transition.end,function(){s.removeClass([e,o].join(" ")).addClass("active"),n.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(u)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(u)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var n,s=t(this),r=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=t.extend({},r.data(),s.data()),a=s.attr("data-slide-to");a&&(o.interval=!1),e.call(r,o),(a=s.attr("data-slide-to"))&&r.data("bs.carousel").to(a),i.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),define("bootstrap/carousel",["jquery"],function(){}),!function(t){function e(){var t=document.createElement("smartbanner"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}var i=function(e){this.origHtmlMargin=parseFloat(t("body").css("margin-top")),this.options=t.extend({},t.smartbanner.defaults,e);var i=navigator.standalone,n=navigator.userAgent;if(this.options.force?this.type=this.options.force:null!=n.match(/iPhone|iPod/i)||n.match(/iPad/)&&this.options.iOSUniversalApp?null!=n.match(/Safari/i)&&(null!=n.match(/CriOS/i)||window.Number(n.substr(n.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):n.match(/\bSilk\/(.*\bMobile Safari\b)?/)||n.match(/\bKF\w/)||n.match("Kindle Fire")?this.type="kindle":null!=n.match(/Android/i)?this.type="android":null!=n.match(/Windows NT 6.2/i)&&null!==n.match(/Touch/i)&&(this.type="windows"),this.type&&!i&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?t(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var s=t("android"==this.type?'meta[name="google-play-app"]':"ios"==this.type?'meta[name="apple-itunes-app"]':"kindle"==this.type?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');0!=s.length&&("windows"==this.type?(this.pfn=t('meta[name="msApplication-PackageFamilyName"]').attr("content"),this.appId=s.attr("content")[1]):this.appId=/app-id=([^\s,]+)/.exec(s.attr("content"))[1],this.title=this.options.title?this.options.title:s.data("title")||t("title").text().replace(/\s*[|\-·].*$/,""),this.author=this.options.author?this.options.author:s.data("author")||(t('meta[name="author"]').length?t('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=s.data("icon-url"),this.price=s.data("price"),this.create(),this.show(),this.listen())}};i.prototype={constructor:i,create:function(){var e,i=this.options.url?this.options.url:("windows"==this.type?"ms-windows-store:PDP?PFN="+this.pfn:"android"==this.type?"market://details?id=":"kindle"==this.type?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,n=this.price||this.options.price,s=n?n+" - "+("android"==this.type?this.options.inGooglePlay:"kindle"==this.type?this.options.inAmazonAppStore:"ios"==this.type?this.options.inAppStore:this.options.inWindowsStore):"",r=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;this.options.url?i=this.options.url:"android"==this.type?(i="market://details?id="+this.appId,this.options.GooglePlayParams&&(i=i+"&referrer="+this.options.GooglePlayParams)):i="https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId;var o='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+s+'</span></div><a href="'+i+'" class="sb-button"><span>'+this.options.button+'</span></a><a href="#" class="sb-close">&times;</a></div></div>';this.options.layer?t(this.options.appendToSelector).append(o):t(this.options.appendToSelector).prepend(o),this.options.icon?e=this.options.icon:this.iconUrl?e=this.iconUrl:t('link[rel="apple-touch-icon-precomposed"]').length>0?(e=t('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(r=!1)):t('link[rel="apple-touch-icon"]').length>0?e=t('link[rel="apple-touch-icon"]').attr("href"):t('meta[name="msApplication-TileImage"]').length>0?e=t('meta[name="msApplication-TileImage"]').attr("content"):t('meta[name="msapplication-TileImage"]').length>0&&(e=t('meta[name="msapplication-TileImage"]').attr("content")),e?(t("#smartbanner .sb-icon").css("background-image","url("+e+")"),r&&t("#smartbanner .sb-icon").addClass("gloss")):t("#smartbanner").addClass("no-icon"),this.bannerHeight=t("#smartbanner").outerHeight()+2,this.scale>1&&(t("#smartbanner").css("top",parseFloat(t("#smartbanner").css("top"))*this.scale).css("height",parseFloat(t("#smartbanner").css("height"))*this.scale).hide(),t("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",t(window).width()/this.scale)),t("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){t("#smartbanner .sb-close").on("click",t.proxy(this.close,this)),t("#smartbanner .sb-button").on("click",t.proxy(this.install,this))},show:function(e){var i=t("#smartbanner");if(i.stop(),this.options.layer)i.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show(),t("body").animate({marginTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",e);else if(t.support.transition){i.animate({top:0},this.options.speedIn).addClass("shown");var n=function(){t("body").removeClass("sb-animation"),e&&e()};t("body").addClass("sb-animation").one(t.support.transition.end,n).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else i.slideDown(this.options.speedIn).addClass("shown")},hide:function(e){var i=t("#smartbanner");if(i.stop(),this.options.layer)i.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),t("body").animate({marginTop:this.origHtmlMargin},this.options.speedIn,"swing",e);else if(t.support.transition){i.css("top",-1*this.bannerHeight*this.scale).removeClass("shown");var n=function(){t("body").removeClass("sb-animation"),e&&e()};t("body").addClass("sb-animation").one(t.support.transition.end,n).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else i.slideUp(this.options.speedOut).removeClass("shown")},close:function(t){t.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(t){this.options.hideOnInstall&&this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(t,e,i){var n=new Date;n.setDate(n.getDate()+i),e=encodeURI(e)+(null==i?"":"; expires="+n.toUTCString()),document.cookie=t+"="+e+"; path=/;"},getCookie:function(t){var e,i,n,s=document.cookie.split(";");for(e=0;e<s.length;e++)if(i=s[e].substr(0,s[e].indexOf("=")),n=s[e].substr(s[e].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==t)return decodeURI(n);return null},switchType:function(){var e=this;this.hide(function(){e.type="android"==e.type?"ios":"android";var i=t("android"==e.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");e.appId=/app-id=([^\s,]+)/.exec(i)[1],t("#smartbanner").detach(),e.create(),e.show()})}},t.smartbanner=function(e){var n=t(window),s=n.data("smartbanner"),r="object"==typeof e&&e;s||n.data("smartbanner",s=new i(r)),"string"==typeof e&&s[e]()},t.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:!0,layer:!1,iOSUniversalApp:!0,appendToSelector:"body"},t.smartbanner.Constructor=i,void 0===t.support.transition&&(t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e()}))}(window.jQuery),define("smartbanner",["jquery"],function(){}),function(t){"function"==typeof define&&define.amd?define("xdomainrequest",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){if(!t.support.cors&&t.ajaxTransport&&window.XDomainRequest){var e=/^https?:\/\//i,i=/^get|post$/i,n=new RegExp("^"+location.protocol,"i");t.ajaxTransport("* text html xml json",function(s,r,o){if(s.crossDomain&&s.async&&i.test(s.type)&&e.test(s.url)&&n.test(s.url)){var a=null;return{send:function(e,i){var n="",o=(r.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(r.timeout)&&(a.timeout=r.timeout),a.ontimeout=function(){i(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,n={code:200,message:"success"},s={text:a.responseText};try{if("html"===o||/text\/html/i.test(a.contentType))s.html=a.responseText;else if("json"===o||"text"!==o&&/\/json/i.test(a.contentType))try{s.json=t.parseJSON(a.responseText)}catch(r){n.code=500,n.message="parseerror"}else if("xml"===o||"text"!==o&&/\/xml/i.test(a.contentType)){var l=new ActiveXObject("Microsoft.XMLDOM");l.async=!1;try{l.loadXML(a.responseText)}catch(r){l=void 0}if(!l||!l.documentElement||l.getElementsByTagName("parsererror").length)throw n.code=500,n.message="parseerror","Invalid XML: "+a.responseText;s.xml=l}}catch(c){throw c}finally{i(n.code,n.message,s,e)}},a.onprogress=function(){},a.onerror=function(){i(500,"error",{text:a.responseText})},r.data&&(n="string"===t.type(r.data)?r.data:t.param(r.data)),a.open(s.type,s.url),a.send(n)},abort:function(){a&&a.abort()}}}})}}),define("controls/app",["backbone","marionette","controls/config","controls/router","controls/controller","modals/error","models/auth","controls/vent","jquery","bootstrap/collapse","bootstrap/modal","bootstrap/dropdown","bootstrap/carousel","bootstrap/tooltip","smartbanner","xdomainrequest"],function(t,e,i,n,s,r,o,a,l){"use strict";t.emulateHTTP=!0,t._sync=t.sync,t.sync=function(e,n,s){var c,h,u,d=l.Deferred();if(s=s||{},s.url||(s.url=_.isFunction(n.url)?n.url():n.url),i.DEBUG)return s.url=i.DEBUG_URL+s.url.substring(s.url.lastIndexOf("/"))+".json",t._sync("read",n,s);if(s.url=i.REMOTE_URL+s.url,s.ignoreFail||(s.timeout=i.REQUEST_TIMEOUT),s.data||(s.toJSON=s.toJSON||{},s.data="create"===e||"update"===e?n.toJSON(s.toJSON):{}),i.X_RETAILER&&(s.headers=_.extend({},s.headers,{"x-retailer":i.X_RETAILER})),o.isAuthenticated()?s.headers&&Object.keys(s.headers).length>0?s.headers=_.extend({},s.headers,{"x-auth-token":o.get("token")}):s.data.token=o.get("token"):!o.isAuthenticated()&&s.hasOwnProperty("cache")&&s.cache===!1&&(s.cache=!0),s.data){var p={};for(var f in s.data)if(s.data.hasOwnProperty(f)){var g=s.data[f];(s.sendEmpty||g&&(!_.isArray(g)||g.length))&&(p[f]=g.toString())}}if(s.fieldConstraints&&s.data){var m=this;p=p||{};var v=_.keys(s.data);_.each(s.fieldConstraints,function(t){var e=_.intersection(t,v);if(e.length<t.length){var i=_.difference(t,e);_.each(i,function(t){p[t]=m.attributes[t]})}})}return s.data=l.param(p),i.isIE()&&(s.url=s.url.replace(/^[^\/\/]*/,window.location.protocol),l.support.cors||"create"===e&&(s.contentType="text/plain",s.data=JSON.stringify(p))),s.error=function(t,e,n){if(/feature\/.+/i.test(window.location.href)&&/offers\/clip/i.test(this.url))return d.fail(t,e,{error:n,internalErrorCode:"BAD_FEATURE_OFFERS_CLIP"});if(h&&/basket/.test(window.location.href)&&/receipts\/link/i.test(this.url))return d.fail(t,e,{error:n,internalErrorCode:"BAD_RECEIPT_LINK"});if(!u)if(i.FAIL_CODES.indexOf(t.status)>=0&&!s.ignoreFail)if(h){var p={status:t.status,url:s.url.replace(i.REMOTE_URL,"")};a.trigger(i.Events.MODAL,new r(p))}else{h=!0;var f=this;setTimeout(function(){c=l.ajax(f).done(d.resolve)},500)}else 401===t.status&&o.isAuthenticated()&&!s.ignoreUnauthorized?(o.reset(),a.trigger(i.Events.NAVIGATE,i.Paths.LOGIN)):d.rejectWith(t,Array.prototype.slice.call(arguments))},c=t._sync(e,n,s).done(d.resolve),d.abort=function(){u=!0,c.abort()},d};var c=new e.Application;return c.vent=a,c.addRegions({content:"#inWrap > #inmContent",dialog:"#inWrap > #modal > .modal-dialog"}),c.on("start",function(t){c._regionManager.each(function(t){return _.isUndefined(t.getEl(t.el)[0])?(console.log("Element does not exist: "+t.el),!1):(t.getEl(t.el).length>1&&(console.log("Multiple elements with this selector: "+t.el),console.log("Continuing app start, however, this may cause issues.")),!0)})}),c.addInitializer(function(){var e=l.fn.modal.noConflict();l.fn.inModal=e;var r=l.fn.dropdown.noConflict();l.fn.inDropdown=r,l.fn.dropdown&&l(".dropdown-toggle").dropdown();var o=l.fn.carousel.noConflict();l.fn.inCarousel=o;var h=l.fn.tooltip.noConflict();l.fn.inTooltip=h;var u=new s(this.content),d=new n({controller:u});a.on(i.Events.NAVIGATE,function(t,e){e&&(t+="/"+e),d.navigate(t,{trigger:!0})}),i.SSO_ENABLE&&a.on("SSORedirect",function(t){window.location=t&&0===t.trim().indexOf("http")?t:window.location.href.split(window.location.pathname)[0].concat(t)}),a.on(i.Events.RELOAD,function(){u.reloadCurrentView()}),a.on(i.Events.MODAL,function(t){c.dialog.show(t);var e=c.dialog.$el.parent();e.on("hidden.bs.modal",function(){c.dialog.close(),e.off()}),e.inModal()}),i.SMARTBANNER_ENABLED&&l.smartbanner({layer:!0}),t.history.start()}),c}),require.config({paths:{collections:"models/collections",components:"views/components",modals:"views/modals",txt:"vendor/text",jquery:"vendor/jquery/jquery.min",xdomainrequest:"vendor/jquery/jquery.xdomainrequest.min","serialize-object":"vendor/jquery/jquery.serialize-object.min",jreject:"vendor/jquery/jquery.reject.min",jstorage:"vendor/jstorage/jstorage.min",nanoscroller:"vendor/jquery/jquery.nanoscroller.min",smartbanner:"vendor/jquery/jquery.smartbanner",effects:"vendor/jquery/jquery-ui.effects.min",json2:"vendor/json2",moment:"vendor/moment",underscore:"vendor/underscore/underscore-min",handlebars:"vendor/handlebars/handlebars-v3.3.0",backbone:"vendor/backbone/backbone","backbone.wreqr":"vendor/backbone.wreqr/backbone.wreqr.min","backbone.eventbinder":"vendor/backbone.eventbinder/backbone.eventbinder.min","backbone.babysitter":"vendor/backbone.babysitter/backbone.babysitter.min",marionette:"vendor/backbone.marionette/core/amd/backbone.marionette.min",bootstrap:"vendor/bootstrap",chosen:"vendor/chosen/chosen.jquery.min",eve:"vendor/raphael/eve","raphael-core":"vendor/raphael/raphael.core","raphael-svg":"vendor/raphael/raphael.svg","raphael-vml":"vendor/raphael/raphael.vml",raphael:"vendor/raphael/raphael.amd",highcharts:"vendor/highcharts/highcharts"},shim:{jquery:{exports:"jQuery"},underscore:{exports:"_"},backbone:{deps:["jquery","underscore"],exports:"Backbone"},handlebars:{exports:"Handlebars"},"bootstrap/transition":{deps:["jquery"]},"bootstrap/carousel":{deps:["jquery"]},"bootstrap/affix":{deps:["jquery","bootstrap/transition"]},"bootstrap/collapse":{deps:["jquery","bootstrap/transition"]},"bootstrap/dropdown":{deps:["jquery","bootstrap/transition"]},"bootstrap/modal":{deps:["jquery","bootstrap/transition"]},"bootstrap/tooltip":{deps:["jquery"]},smartbanner:{deps:["jquery"]}},deps:["jquery","underscore","backbone"]}),window.jQuery&&define("jquery",[],function(){return window.jQuery}),require(["controls/app"],function(t){"use strict";t.start()}),define("main",function(){}),require(["main"]);